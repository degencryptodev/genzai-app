"use strict";(self.webpackChunkrubic=self.webpackChunkrubic||[]).push([[586],{35586:(Od,Zt,d)=>{d.r(Zt),d.d(Zt,{TradeModule:()=>Ad});var De=d(74710),e=d(17705);let ui=(()=>{class n{constructor(t){this.router=t}canActivate(){return this.router.navigate(["/"]),!1}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(De.Ix))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S=d(74523),b=d(49969),L=d(84412),Y=d(20140),_i=d(44668),Te=d(1807),Z=d(70152),C=d(96354),se=d(5964),$=d(99172),B=d(23294),I=d(25558),Ge=d(13946),H=d(61594),s=d(55748),q=d(39795),ie=function(n){return n[n.NOT_INITIATED=0]="NOT_INITIATED",n[n.DISABLED=1]="DISABLED",n[n.LOADING=2]="LOADING",n[n.READY_TO_APPROVE=3]="READY_TO_APPROVE",n[n.APPROVE_IN_PROGRESS=4]="APPROVE_IN_PROGRESS",n[n.READY_TO_SWAP=5]="READY_TO_SWAP",n[n.SWAP_IN_PROGRESS=6]="SWAP_IN_PROGRESS",n[n.OLD_TRADE_DATA=7]="OLD_TRADE_DATA",n[n.READY_TO_BUY_NATIVE=8]="READY_TO_BUY_NATIVE",n[n.BUY_NATIVE_IN_PROGRESS=9]="BUY_NATIVE_IN_PROGRESS",n}(ie||{}),N=d(70950),ee=d(16094),X=d(51823),E=d(93359),A=d(35763),J=d(95917),mi=d(93802);const hi={noRoutes:!1,showSidebar:!1,activeCalculation:!1,calculationProgress:{total:0,current:0}},gi={trade:null,error:null,needApprove:!1,tradeType:void 0,tags:{isBest:!1,cheap:!1},routes:[],selectedByUser:!1,status:ie.NOT_INITIATED,centralizationStatus:null,badges:[]},Jt="linear-gradient(to bottom, #49c0f0 0%,#2cafe3 100%)",qt="linear-gradient(0deg, rgba(222, 40, 198, 1) 0%, rgba(226, 16, 201, 1) 100%)";function en(n){return(n.to.blockchain===s.BLOCKCHAIN_NAME.BERACHAIN||n.from.blockchain===s.BLOCKCHAIN_NAME.BERACHAIN)&&n.from.tokenAmount.multipliedBy(n.from.price).gt(20)}const ki={[s.CROSS_CHAIN_TRADE_TYPE.OWL_TO_BRIDGE]:[{getUrl:()=>"https://owlto.finance/",bgColor:Jt,fromSdk:!1,getLabel:()=>"+Points!",getHint:()=>"Complete swap using Owlto and recieve Owlto points!",showLabel:()=>!0}],[s.ON_CHAIN_TRADE_TYPE.ODOS]:[{getUrl:()=>"https://x.com/odosdao/status/1869962497694036358",bgColor:"#FF510199",fromSdk:!1,getLabel:()=>"+Points!",getHint:()=>"Complete swap using Odos and recieve Odos points!",showLabel:()=>!0}],[s.BRIDGE_TYPE.SYMBIOSIS]:[{getUrl:n=>{const r=n instanceof s.CrossChainTrade?n.promotions?.[0]:null,[t]=r.split("_");return"taiko"===t.toLowerCase()?"https://x.com/symbiosis_fi/status/1811374725391888666":"arb"===t.toLowerCase()?"https://symbiosis.finance/blog/earn-arb-arbitrum-incentives-at-symbiosis#how-much-arb-rewards-can-you-earn":""},fromSdk:!0,getLabel:n=>{const r=n instanceof s.CrossChainTrade?n.promotions?.[0]:null,[t]=r.split("_");return"taiko"===t.toLowerCase()?"+5 $Taiko":"arb"===t.toLowerCase()?"+ARB":""},getHint:n=>{const r=n instanceof s.CrossChainTrade?n.promotions?.[0]:null,[t]=r.split("_");return"taiko"===t.toLowerCase()?"Get up to 5 $Taiko per swap via Symbiosis!":"arb"===t.toLowerCase()?"Earn ARB Arbitrum Incentives at Symbiosis":""},showLabel:()=>!0}],[s.BRIDGE_TYPE.MESON]:[{bgColor:Jt,fromSdk:!1,getLabel:()=>"INFO",getHint:()=>"Meson Provider allows swaps only for amounts with 6 or fewer decimal places. \n      If your transaction amount has more than 6 decimals, only the first 6 digits after the decimal point will be considered during the transaction.\n      Example: 0.99999999999 ETH -> 0.999999 ETH",showLabel:()=>!0}],[s.BRIDGE_TYPE.ARBITRUM]:[{bgColor:"linear-gradient(90deg, rgba(0, 255, 117, 0.6) 0%, rgba(224, 255, 32, 0.6) 99.18%)",fromSdk:!1,getLabel:()=>"NO SLIPPAGE",showLabel:function bi(n){return"rbc"===n.from.symbol.toLowerCase()&&"rbc"===n.to.symbol.toLowerCase()}},{bgColor:"linear-gradient(90deg, rgba(204, 141, 23, 0.83) 0%, rgba(213, 185, 5, 0.94) 99.18%)",fromSdk:!1,getLabel:()=>"ATTENTION",getHint:()=>"Waiting funds in target chain for 7 days",showLabel:function Ci(n){return n.from.blockchain===s.BLOCKCHAIN_NAME.ARBITRUM&&n.to.blockchain===s.BLOCKCHAIN_NAME.ETHEREUM}}],[s.CROSS_CHAIN_TRADE_TYPE.WANCHAIN_BRIDGE]:[],[s.CROSS_CHAIN_TRADE_TYPE.ORBITER_BRIDGE]:[{bgColor:qt,fromSdk:!1,getLabel:()=>"Reward",getUrl:()=>"https://www.orbiter.finance/quest/41",showLabel:en}],[s.CROSS_CHAIN_TRADE_TYPE.ORBITER_BRIDGE_V2]:[{bgColor:qt,fromSdk:!1,getLabel:()=>"Reward",getUrl:()=>"https://www.orbiter.finance/quest/41",showLabel:en}]},Ti={[s.BLOCKCHAIN_NAME.ZK_LINK]:[{fromSdk:!1,bgColor:"linear-gradient(0deg, rgba(39,153,104,1) 0%, rgba(42,189,143,1) 100%)",getUrl:()=>"https://rubic.exchange/blog/bridge-to-zklink-network-and-get-extra-nova-points/",getLabel:()=>"+ Nova and Rubic Points",getHint:()=>"Double RBC points for all transactions and 1 Nova point for every transaction.",showLabel:function wi(n){return n.to.blockchain===s.BLOCKCHAIN_NAME.ZK_LINK}}],[s.BLOCKCHAIN_NAME.TAIKO]:[{bgColor:"#d112c5",fromSdk:!1,getHint:()=>"Join Taiko Trailblazers, earn XPs on all swaps with Taiko & get a potential $TKO airdrop with Rubic.",getLabel:()=>"+Points!",showLabel:function Si(n){return n.to.blockchain===s.BLOCKCHAIN_NAME.TAIKO||n.from.blockchain===s.BLOCKCHAIN_NAME.TAIKO}}],[s.BLOCKCHAIN_NAME.SCROLL]:[{getUrl:()=>"https://scroll.io/sessions",bgColor:"#BDA584",fromSdk:!1,getLabel:()=>"+Marks!",getHint:()=>"You will recieve Marks from Scroll for completing this swap and holding this token!",showLabel:function yi(n){const t=n.to.isNative||["weth","usdt","usdc","wsteth","wrseth","stone"].includes(n.to.symbol.toLowerCase());return n.to.blockchain===s.BLOCKCHAIN_NAME.SCROLL&&n.feeInfo?.rubicProxy?.fixedFee?.amount.gt(0)&&t}}]};var Me=d(84572),W=d(88141),ue=d(99437),w=d(7673),Ve=function(n){return n.PENDING="pending",n.COMPLETE="complete",n.NO_ROUTES="noroutes",n}(Ve||{}),xi=d(11288),tn=d(21626);let et=(()=>{class n{constructor(t,i,a){this.httpClient=t,this.swapFormService=i,this.tokenStoreService=a,this._alternativeRouteStatus$=new L.t(Ve.PENDING),this.DEFAULT_TOKEN_PRICE=100,this.DEFAULT_TOKEN_AMOUNT=new E.A(100),this.alternativeRouteStatus$=this._alternativeRouteStatus$.asObservable(),this._prevAlternativeRoutes$=new L.t([]),this._currentAlternativeRoute$=new L.t(null)}setCurrentAlternativeRoute(t){this._currentAlternativeRoute$.next(t)}get currentAlternativeRoute(){return this._currentAlternativeRoute$.getValue()}setPrevAlternativeRoute(t){const i=this._prevAlternativeRoutes$.getValue();this.checkIsPrevRoute({fromAddress:t.from.address,toAddress:t.to.address})||this._prevAlternativeRoutes$.next([...i,t])}fetchAlternativeRoutes(t){return this.httpClient.get(`${xi.M.apiTokenUrl}/v2/token_pairs/`,{params:{...t}}).pipe((0,C.T)(i=>i.token_pairs))}getAlternativeRoutes(){return this._alternativeRouteStatus$.next(Ve.PENDING),(0,Me.z)([this.swapFormService.fromToken$,this.swapFormService.toToken$]).pipe((0,I.n)(([t,i])=>this.fetchAlternativeRoutes({sourceNetwork:s.TO_BACKEND_BLOCKCHAINS[t.blockchain],sourceTokenAddress:t.address,destinationNetwork:s.TO_BACKEND_BLOCKCHAINS[i.blockchain],destinationTokenAddress:i.address})),(0,C.T)(t=>{const i=t.filter(o=>!this.checkIsPrevRoute({fromAddress:o.sourceTokenAddress,toAddress:o.destinationTokenAddress}));if(i&&0===i.length)throw Error();const a=i.sort((o,c)=>c.totalRank-o.totalRank).map(o=>{const c=this.tokenStoreService.tokens.find(p=>(0,A.Qb)(p.address,o.sourceTokenAddress)&&s.TO_BACKEND_BLOCKCHAINS[p.blockchain]===o.sourceTokenNetwork.toLowerCase()),l=this.tokenStoreService.tokens.find(p=>(0,A.Qb)(p.address,o.destinationTokenAddress)&&s.TO_BACKEND_BLOCKCHAINS[p.blockchain]===o.destinationTokenNetwork.toLowerCase());return c&&l?{from:c,to:l,amount:this.getFromTokenAmount(c,o.sourceTokenUsdPrice)}:null}).slice(0,5).filter(A.TM);if(0===a.length)throw new Error;return a}),(0,W.M)(()=>this._alternativeRouteStatus$.next(Ve.COMPLETE)),(0,ue.W)(()=>(this._alternativeRouteStatus$.next(Ve.NO_ROUTES),(0,w.of)(null))))}getFromTokenAmount(t,i){const o=this.swapFormService.inputValue.fromAmount;if(!(0,A.Qb)(this.swapFormService.inputValue.fromToken.address,t.address)){if(!i)return this.DEFAULT_TOKEN_AMOUNT;const c=this.swapFormService.inputValue.fromToken.price;return c?o.actualValue.multipliedBy(c).dividedBy(i):new E.A(this.DEFAULT_TOKEN_PRICE).dividedBy(i)}return o.actualValue}checkIsPrevRoute(t){return this._prevAlternativeRoutes$.getValue().some(a=>(0,A.Qb)(a.from.address,t.fromAddress)&&(0,A.Qb)(a.to.address,t.toAddress))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(tn.Qq),e.KVO(N.K),e.KVO(J.p))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();const an={[s.CROSS_CHAIN_TRADE_TYPE.SIMPLE_SWAP]:"semi-centralized",[s.CROSS_CHAIN_TRADE_TYPE.CHANGENOW]:"semi-centralized"};var F=d(89417),z=d(56977),Oi=d(31410),G=d(5116);let Ne=(()=>{class n{get refundAddress(){return this.refundAddressCtrl.value}constructor(t){this.destroy$=t,this.refundAddressCtrl=new F.MJ("",{validators:[F.k0.required],asyncValidators:[]}),this._isValidRefundAddress$=new L.t(!1),this.isValidRefundAddress$=this._isValidRefundAddress$.asObservable(),this.refundAddressCtrl.statusChanges.pipe((0,C.T)(i=>"VALID"===i),(0,z.Q)(this.destroy$)).subscribe(i=>{this._isValidRefundAddress$.next(i)})}setRefundAddress(t){this.refundAddressCtrl.setValue(t)}onSwapFormInputChanged(t){this.refundAddressCtrl.clearAsyncValidators(),this.refundAddressCtrl.setAsyncValidators((0,Oi.z)({fromAssetType:t.fromBlockchain,validatedChain:t.fromBlockchain})),this.refundAddressCtrl.updateValueAndValidity()}onTradeSelection(t){t.tradeType===s.CROSS_CHAIN_TRADE_TYPE.CHANGELLY?(this.refundAddressCtrl.addValidators([F.k0.required]),this._isValidRefundAddress$.next(!1)):(this.refundAddressCtrl.clearValidators(),this._isValidRefundAddress$.next(!0)),this.refundAddressCtrl.updateValueAndValidity()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(G.ew))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var be=d(48770),j=d(60135);let Ce=(()=>{class n{get tradeState(){return this._tradeState$.value}set currentTrade(t){this._tradeState$.next(t)}get currentTrade(){return this._tradeState$.getValue()}constructor(t,i,a,o,c,l,u){this.swapsFormService=t,this.walletConnector=i,this.tradePageService=a,this.tokensStoreService=o,this.headerStore=c,this.alternativeRouteService=l,this.refundService=u,this.defaultState=gi,this.swapType=X.T.CROSS_CHAIN_ROUTING,this._tradeState$=new L.t(this.defaultState),this.tradeState$=this._tradeState$.asObservable().pipe((0,Z.B)(0)),this.currentTrade$=this.tradeState$.pipe((0,C.T)(p=>p?.trade)),this.wrongBlockchain$=this.swapsFormService.fromToken$.pipe((0,se.p)(Boolean),(0,Y.v)(this.walletConnector.networkChange$),(0,C.T)(([p,m])=>p?.blockchain!==m),(0,$.Z)(!1)),this.notEnoughBalance$=this.swapsFormService.fromToken$.pipe((0,se.p)(Boolean),(0,Y.v)(this.tokensStoreService.tokens$,this.swapsFormService.fromAmount$,this.walletConnector.networkChange$,this.walletConnector.addressChange$),(0,C.T)(([p,m,g,f,y])=>{const k=m.find(v=>(0,A._f)(p,v));try{const v=s.BlockchainsInfo.getChainType(k.blockchain),T=s.BlockchainsInfo.getChainType(f);return!!(y&&T&&v===T&&k)&&(!k.amount?.isFinite()||k.amount.lt(g?.actualValue))}catch{return!1}})),this._tradesStore$=new L.t([]),this.tradesStore$=this._tradesStore$.asObservable(),this._calculationProgress$=new L.t({total:0,current:0}),this.calculationProgress$=this._calculationProgress$.asObservable(),this.calculationStatus$=this.initCalculationStatus(),this.subscribeOnTradeChange()}updateTrade(t,i,a,o){const c=t?.trade,l=c?{error:t?.error,trade:c,needApprove:a,needAuthWallet:o,tradeType:t.tradeType,tags:{isBest:!1,cheap:!1},routes:c.getTradeInfo().routePath||[],badges:this.setSpecificBadges(c),centralizationStatus:this.setCentralizationStatus(c)}:{error:t.error,trade:null,needApprove:a,needAuthWallet:o,tradeType:t.tradeType,tags:{isBest:!1,cheap:!1},routes:[],centralizationStatus:null};let u=this._tradesStore$.getValue();if(u.length)if(i===this.swapType){const p=u.findIndex(m=>m?.trade?.type===t?.tradeType);-1!==p?c?u[p]={...u[p],trade:l.trade,needApprove:l.needApprove,error:l.error,routes:l.routes}:u.splice(p,1):c&&u.push(l)}else c&&(u=[l]);else c&&u.push(l);this.swapType=i,this._tradesStore$.next(u)}clearProviders(t=!1){this._tradeState$.next(this.defaultState),this._tradesStore$.next([]),this.tradePageService.setProvidersVisibility(!1),t?this.setCalculationProgress(1,1):this.setCalculationProgress(0,0)}removeOldProvider(t){let i=this._tradesStore$.getValue();const a=i.findIndex(o=>o?.trade?.type===t);-1!==a&&i.splice(a,1),this._tradesStore$.next(i)}pickProvider(t){let i=this._tradesStore$.getValue();if(i.length){const a=i.some(p=>p?.trade instanceof q.CrossChainTrade),o=i.some(p=>p?.trade instanceof s.OnChainTrade),c=i.filter(p=>p?.trade?.to).some(p=>!p.trade.to?.price?.gt(0));(a||o)&&(i=a?this.sortCrossChainTrades(i,c):this.sortOnChainTrades(i,c));const u={...i[0],selectedByUser:!1,status:ie.READY_TO_SWAP};u.error&&(u.status=ie.DISABLED),u.needApprove&&(u.status=ie.READY_TO_APPROVE),this._tradesStore$.next(i),this.currentTrade=u}else this.currentTrade={...this.defaultState,status:t?ie.DISABLED:ie.LOADING}}sortCrossChainTrades(t,i){return t.sort((a,o)=>{const c=a?.trade?this.getNativeTokenPrice(a.trade.from.blockchain):new E.A(0),l=o?.trade?this.getNativeTokenPrice(o.trade.from.blockchain):new E.A(0);return this.isArbitrumBridgeForRBCTokens(a?.trade)?-1:(0,s.compareCrossChainTrades)(a,o,c,l,i)})}isArbitrumBridgeForRBCTokens(t){return"rbc"===t.to.symbol.toLowerCase()&&"rbc"===t.from.symbol.toLowerCase()&&t.type===s.CROSS_CHAIN_TRADE_TYPE.ARBITRUM}getNativeTokenPrice(t){const i=s.nativeTokensList[t],a=this.tokensStoreService.tokens.find(o=>(0,A._f)(o,{blockchain:t,address:i.address})).price;return new E.A(a)}sortOnChainTrades(t,i){return t.sort((a,o)=>{let c,l;return i?(c=a.trade.to.tokenAmount,l=o.trade.to.tokenAmount):(c=a.trade.to.price.multipliedBy(a.trade.to.tokenAmount),l=o.trade.to.price.multipliedBy(o.trade.to.tokenAmount)),c.gt(l)?-1:l.gt(c)?1:0})}selectTrade(t){var i=this;return(0,S.A)(function*(){const a=i._tradesStore$.value.find(o=>o.tradeType===t);i.currentTrade={...a,selectedByUser:!1,status:i.currentTrade.status},i.swapsFormService.outputControl.patchValue({toAmount:a?.trade?.to?.tokenAmount||null}),i.refundService.onTradeSelection(i.currentTrade)})()}subscribeOnTradeChange(){this.currentTrade$.subscribe(t=>{this.swapsFormService.outputControl.patchValue({toAmount:t?.to?.tokenAmount||null})})}patchCalculationState(){this._tradeState$.next({...this._tradeState$.value,status:ie.LOADING})}setCalculationProgress(t,i){this._calculationProgress$.next({total:t,current:i})}checkWrap(t,i){if(!t?.address||!i?.address)return!1;const a=new s.Token(t),o=new s.Token(i);return(a.isNative&&o.isWrapped||a.isWrapped&&o.isNative)&&t.blockchain===i.blockchain}initCalculationStatus(){return this.swapsFormService.fromToken$.pipe((0,B.F)(this.shouldEmitToken),(0,Y.v)(this.swapsFormService.toToken$.pipe((0,B.F)(this.shouldEmitToken))),(0,I.n)(this.getTimerObservable),(0,Y.v)(this.swapsFormService.isFilled$.pipe((0,B.F)()),this.tradesStore$,this.calculationProgress$,this.tradePageService.formContent$.pipe((0,Ge.J)(),(0,C.T)(([t,i])=>t===i||"form"!==i),(0,$.Z)(!1),(0,Y.v)(this.headerStore.getMobileDisplayStatus().pipe((0,H.$)())),(0,C.T)(([t,i])=>t&&!i))),(0,C.T)(t=>{const i=this.getCalculationStatus(t),a=this.alternativeRouteService.currentAlternativeRoute,{fromToken:o,toToken:c}=this.swapsFormService.inputValue;if(a){const l=(0,A.Qb)(o.address,a.from.address)&&(0,A.Qb)(c.address,a.to.address);i.noRoutes&&l&&this.alternativeRouteService.setPrevAlternativeRoute(a)}return i}),(0,Z.B)(50),(0,B.F)((t,i)=>(0,A.Gq)(t,i)),(0,_i.t)(mi.V),(0,$.Z)(hi))}getCalculationStatus(t){const[i,a,o,c,l]=t,{fromToken:u,toToken:p}=this.swapsFormService.inputValue,m=o.some(T=>T.trade instanceof s.EvmWrapTrade)||this.checkWrap(u,p),g=o.filter(T=>!!T.trade).length>0,f=c.current!==c.total,y={noRoutes:!f&&!g&&c.total>0,showSidebar:!1,activeCalculation:f,calculationProgress:c};return!a||m||l?{...y,showSidebar:!1}:(1===c.total&&0===c.current||c.total>0)&&g||i?{...y,showSidebar:!0}:y}shouldEmitToken(t,i){return!(!t||!i)}getTimerObservable(){return(0,Te.O)(2e3).pipe((0,C.T)(()=>!0),(0,$.Z)(!1))}setSpecificBadges(t){const i=Object.entries(ki).find(([p])=>p===t.type),a=Object.entries(Ti).filter(([p])=>p===t.to.blockchain||p===t.from.blockchain).flatMap(([p,m])=>m);return i||a?[...i?.[1]||[],...a||[]].filter(Boolean).filter(p=>!(!p.showLabel(t)||p.fromSdk&&!(p.fromSdk&&"promotions"in t&&t.promotions?.length))).map(p=>({bgColor:p.bgColor,label:p.getLabel(t),hint:p?.getHint?.(t),href:p?.getUrl?.(t)})):[]}setCentralizationStatus(t){return function Ai(n){return Object.keys(an).some(r=>r===n)}(t.type)?an[t.type]:null}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(N.K),e.KVO(ee.c),e.KVO(be.p),e.KVO(J.p),e.KVO(j.X),e.KVO(et),e.KVO(Ne))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var He=d(35335),he=d(34231),Ee=d(27468),je=d(86648),tt=d(50401),ge=d(409);const on={swap:{fromChain:s.BLOCKCHAIN_NAME.ETHEREUM,toChain:s.BLOCKCHAIN_NAME.ETHEREUM,from:{[s.BLOCKCHAIN_NAME.ETHEREUM]:"ETH",[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:"BNB",[s.BLOCKCHAIN_NAME.POLYGON]:"MATIC",[s.BLOCKCHAIN_NAME.HARMONY]:"ONE",[s.BLOCKCHAIN_NAME.AVALANCHE]:"AVAX",[s.BLOCKCHAIN_NAME.MOONRIVER]:"MOVR",[s.BLOCKCHAIN_NAME.ARBITRUM]:"AETH",[s.BLOCKCHAIN_NAME.AURORA]:"aETH",[s.BLOCKCHAIN_NAME.TELOS]:"TLOS"},to:{[s.BLOCKCHAIN_NAME.ETHEREUM]:"RBC",[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:"BRBC"},amount:"1"}};var bt=d(59925);let rn=(()=>{class n{get initialLoading(){return this._initialLoading$.getValue()}constructor(t,i,a,o,c,l){this.queryParamsService=t,this.swapsFormService=i,this.tokensService=a,this.tokensStoreService=o,this.gtmService=c,this.walletConnectorService=l,this._initialLoading$=new L.t(!0),this.initialLoading$=this._initialLoading$.asObservable(),this.subscribeOnSwapForm(),this.subscribeOnQueryParams()}subscribeOnSwapForm(){this.swapsFormService.inputValue$.pipe((0,B.F)((t,i)=>(0,A.Gq)(t,i))).subscribe(t=>{this.queryParamsService.patchQueryParams({...t.fromToken?.symbol&&{from:t.fromToken.symbol},...t.toToken?.symbol&&{to:t.toToken.symbol},...t.fromBlockchain&&{fromChain:t.fromBlockchain},...t.toBlockchain&&{toChain:t.toBlockchain},...t.fromAmount?.actualValue.gt(0)&&{amount:t.fromAmount.actualValue.toFixed()}})})}subscribeOnQueryParams(){this.tokensStoreService.tokens$.pipe((0,H.$)(bt.Aj)).pipe((0,I.n)(t=>{const a=this.getProtectedSwapParams(this.queryParamsService.queryParams),o=a.fromChain,c=a.toChain,l=this.getTokenBySymbolOrAddress(t,a.from,o),u=this.getTokenBySymbolOrAddress(t,a.to,c);return(0,Ee.p)([l,u]).pipe((0,C.T)(([p,m])=>({fromToken:p,toToken:m,fromBlockchain:o,toBlockchain:c,amount:a.amount,amountTo:a.amountTo})))})).subscribe(({fromBlockchain:t,toToken:i,fromToken:a,toBlockchain:o,amount:c})=>{this.gtmService.needTrackFormEventsNow=!1,this.swapsFormService.inputControl.patchValue({fromBlockchain:t,toBlockchain:o,...a&&{fromToken:a},...i&&{toToken:i},...c&&{fromAmount:{actualValue:new E.A(c),visibleValue:c}}}),this._initialLoading$.next(!1)})}getProtectedSwapParams(t){let i;i=s.BlockchainsInfo.isBlockchainName(t.fromChain)?t.fromChain:this.walletConnectorService.network?this.walletConnectorService.network:on.swap.fromChain;const a=s.BlockchainsInfo.isBlockchainName(t?.toChain)?t.toChain:on.swap.toChain;return{...t,fromChain:i,toChain:a}}getTokenBySymbolOrAddress(t,i,a){if(!i)return(0,w.of)(null);const o=s.BlockchainsInfo.getChainType(a);return(0,je.H)(s.Web3Pure[o].isAddressCorrect(i)).pipe((0,I.n)(c=>{if(o&&c){const l=o===s.CHAIN_TYPE.EVM?s.EvmWeb3Pure.toChecksumAddress(i):i;return this.searchTokenByAddress(t,l,a)}return this.searchTokenBySymbol(t,i,a)}),(0,ue.W)(()=>this.searchTokenBySymbol(t,i,a)),(0,I.n)(c=>(0,Ee.p)([(0,w.of)(c),(0,je.H)(this.tokensService.getAndUpdateTokenBalance(c)).pipe((0,ue.W)(()=>(0,w.of)(new E.A(NaN))))])),(0,C.T)(([c,l])=>({...c,amount:l})))}searchTokenBySymbol(t,i,a){const o=t.filter(c=>c.symbol.toLowerCase()===i.toLowerCase()&&c.blockchain===a);return o.size?(0,w.of)(o.first()):this.tokensService.fetchQueryTokens(i,a).pipe((0,C.T)(c=>{if(c?.size){const l=c?.size>1?c.find(p=>p.symbol.toLowerCase()===i.toLowerCase()):c.first();if(!l)return null;const u={...l,amount:new E.A(NaN)};return this.tokensStoreService.addToken(u),u}return null}))}searchTokenByAddress(t,i,a){const o=t.find(c=>(0,A.Qb)(c.address,i)&&c.blockchain===a);return o?(0,w.of)(o):this.tokensService.fetchQueryTokens(i,a).pipe((0,A.n)(c=>!!c?.size,c=>(0,w.of)(c.first()),()=>this.tokensStoreService.addTokenByAddress(i,a).pipe((0,H.$)())),(0,C.T)(c=>{const l={...c,amount:new E.A(NaN)};return this.tokensStoreService.addToken(l),l}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(he.w),e.KVO(N.K),e.KVO(ge.m),e.KVO(J.p),e.KVO(tt.A),e.KVO(ee.c))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var ke=d(99030),sn=d(57316);let cn=(()=>{class n{constructor(t,i,a,o){this.swapsFormService=t,this.tokensService=i,this.tokensStoreService=a,this.walletConnector=o,this.subscribeOnForm(),this.subscribeOnTokens(),this.subscribeOnUserChange()}subscribeOnForm(){this.swapsFormService.inputValue$.pipe((0,$.Z)(null),(0,Ge.J)()).subscribe(([t,i])=>{(!(0,sn.p)(t?.fromToken,i.fromToken)&&(0,ke.Tl)(i.fromToken)||!(0,A._f)(t?.toToken,i.toToken)&&i.toToken)&&this.updateTokensPrices(i),!(0,sn.p)(t?.fromToken,i.fromToken)&&(0,ke.Tl)(i.fromToken)&&this.updateTokenBalance(i.fromToken)})}updateTokensPrices(t){this.intervalId&&clearInterval(this.intervalId);const i=()=>{(0,ke.Tl)(t.fromToken)&&this.tokensService.getTokenPrice(t.fromToken),t.toToken&&this.tokensService.getTokenPrice(t.toToken,!0)};i(),this.intervalId=setInterval(i,15e3)}updateTokenBalance(t){t?.amount&&!t.amount.isFinite()&&this.tokensService.getAndUpdateTokenBalance(t)}subscribeOnTokens(){this.tokensStoreService.tokens$.pipe((0,Z.B)(50),(0,se.p)(Boolean)).subscribe(t=>{const i=this.swapsFormService.inputValue,a=(0,ke.Tl)(i.fromToken)&&t.find(c=>(0,A._f)(c,i.fromToken)),o=i.toToken&&t.find(c=>(0,A._f)(c,i.toToken));this.swapsFormService.inputControl.patchValue({...a&&{fromAsset:a},...o&&{toToken:o}},{emitEvent:!1})})}subscribeOnUserChange(){this.walletConnector.addressChange$.pipe((0,I.n)(()=>{const{fromToken:t,toToken:i}=this.swapsFormService.inputValue;return t||i?(0,Ee.p)([...t?[this.tokensService.getAndUpdateTokenBalance(t)]:[],...i?[this.tokensService.getAndUpdateTokenBalance(i)]:[]]):(0,w.of)(null)})).subscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(N.K),e.KVO(ge.m),e.KVO(J.p),e.KVO(ee.c))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Ct=d(33726),Ii=d(28793),D=d(54843),Pi=d(97647),ce=d(33390),le=d(16638),Ye=d(52608);let kt=(()=>{class n{constructor(t,i,a,o,c,l,u){this.tradeState=t,this.walletConnector=i,this.tradePageService=a,this.modalService=o,this.injector=c,this.targetNetworkAddressService=l,this.formsTogglerService=u,this.buttonState$=this.tradeState.tradeState$.pipe((0,Y.v)([this.tradeState.wrongBlockchain$,this.tradeState.notEnoughBalance$,this.walletConnector.addressChange$,this.targetNetworkAddressService.isAddressValid$,this.targetNetworkAddressService.isAddressRequired$,this.targetNetworkAddressService.address$,this.formsTogglerService.selectedForm$])).pipe((0,Z.B)(10),(0,$.Z)(this.getDefaultParams()),(0,Pi.u)(),(0,C.T)(p=>this.getState(...p)))}swap(){this.tradePageService.setState("preview")}deposit(){this.tradePageService.setState("depositPreview")}connectWallet(){this.modalService.openWalletModal(this.injector).subscribe()}getState(t,i,a,o,c,l,u){if(!t)return{type:"error",text:"Select tokens",action:()=>{}};if(t.error)return{type:"error",text:t.error.message,action:()=>{}};if(!o)return{type:"action",text:"Connect wallet",action:this.connectWallet.bind(this)};if(a)return{type:"error",text:"Insufficient balance",action:()=>{}};const p=t.trade instanceof s.CrossChainTransferTrade&&!s.BlockchainsInfo.isEvmBlockchainName(t.trade.from.blockchain);return t.status===ie.READY_TO_SWAP||t.status===ie.READY_TO_APPROVE||t.trade&&i?l?c&&u?p?{type:"action",text:"Preview swap",action:this.deposit.bind(this)}:{type:"action",text:"Preview swap",action:this.swap.bind(this)}:{type:"error",text:"Enter receiver address",action:()=>{}}:c?{type:"action",text:"Preview swap",action:this.swap.bind(this)}:{type:"error",text:"Enter correct receiver address",action:()=>{}}:t.status===ie.LOADING?{type:"error",text:"Calculating",action:()=>{}}:t.status===ie.NOT_INITIATED?{type:"error",text:"Select tokens",action:()=>{}}:{type:"error",text:"Trade is not available",action:()=>{}}}getDefaultParams(){return[null,!1,!1,"",!0,!1,""]}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Ce),e.KVO(ee.c),e.KVO(be.p),e.KVO(ce.B),e.KVO(e.zZn),e.KVO(le.P),e.KVO(Ye.D))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Mi=d(87919),St=d(40605),Ni=d(62087),yt=d(77048),ln=d(68247),dn=d(63055),pn=d(21413),wt=d(70274),Tt=d(6697),Re=d(14694),xt=d(67337),ae=d(36719),nt=d(91410),it=d(73864),un=d(96623);class fe{static getCrossChainSwapParams(r){return{fromAddress:r.from.address,fromSymbol:r.from.symbol,fromAmount:r.from.tokenAmount,fromPrice:r.from.price.toNumber(),fromDecimals:r.from.decimals,toAddress:r.to.address,toSymbol:r.to.symbol,toAmount:r.to.tokenAmount,toPrice:r.to.price.toNumber(),toDecimals:r.to.decimals,fromBlockchain:r.from.blockchain,toBlockchain:r.to.blockchain,type:r.type}}static getItSwapParams(r){return{fromAddress:r.from.address,fromSymbol:r.from.symbol,fromAmount:r.from.tokenAmount,fromPrice:r.from.price.toNumber(),fromDecimals:r.from.decimals,toAddress:r.to.address,toSymbol:r.to.symbol,toAmount:r.to.tokenAmount,toPrice:r.to.price.toNumber(),toDecimals:r.to.decimals,blockchain:r.from.blockchain,type:r.type}}}var _e=d(44188),x=d(44634),Ke=d(70323);let at=(()=>{class n{constructor(t,i,a,o,c,l,u,p){this.httpService=t,this.authService=i,this.walletConnectorService=a,this.sessionStorage=o,this.settingsService=c,this.targetNetworkAddressService=l,this.isMobile=u,this.window=p,this.apiEndpoint="v2/trades/crosschain/new_extended"}saveNotWhitelistedProvider(t,i,a){return this.httpService.post("info/new_provider",{network:s.TO_BACKEND_BLOCKCHAINS[i],title:x.TO_BACKEND_CROSS_CHAIN_PROVIDERS[a],address:t.providerRouter+(t.providerGateway?`_${t.providerGateway}`:""),cause:"cross-chain"})}saveProvidersStatistics(t){return this.httpService.post("route_calculation_statistic/save",t,null,{headers:{Signature:(0,un.d)(t.to_token.toLowerCase(),t.from_token.toLowerCase())}})}saveNotWhitelistedCcrProvider(t,i,a){return this.httpService.post("info/new_provider",t instanceof s.UnapprovedContractError?{network:s.TO_BACKEND_BLOCKCHAINS[i],title:x.TO_BACKEND_CROSS_CHAIN_PROVIDERS[a],address:t.contract,cause:"cross-chain",selector:"unknown"}:{network:s.TO_BACKEND_BLOCKCHAINS[i],title:x.TO_BACKEND_CROSS_CHAIN_PROVIDERS[a],address:"unknown",cause:"cross-chain",selector:t.method})}createTrade(t,i,a){var o=this;return(0,S.A)(function*(){const{fromBlockchain:c,toBlockchain:l,fromAmount:u,fromAddress:p,fromDecimals:m,toAmount:g,toDecimals:f,toAddress:y}=fe.getCrossChainSwapParams(i),k=o.sessionStorage.getItem("referral"),v=i.getTradeInfo().slippage,T=Object.values(i.uniqueInfo||{}),O={price_impact:i.getTradeInfo().priceImpact,slippage:v,wallet_name:o.walletConnectorService.provider.walletName,device_type:o.isMobile?"mobile":"desktop",expected_amount:s.Web3Pure.toWei(g,f),mevbot_protection:o.settingsService.crossChainRoutingValue.useMevBotProtection,to_amount_min:s.Web3Pure.toWei(i.toTokenAmountMin,f),from_network:s.TO_BACKEND_BLOCKCHAINS[c],to_network:s.TO_BACKEND_BLOCKCHAINS[l],provider:x.TO_BACKEND_CROSS_CHAIN_PROVIDERS[i.type],from_token:p,to_token:y,from_amount:s.Web3Pure.toWei(u,m),to_amount:s.Web3Pure.toWei(g,f),user:o.authService.userAddress,tx_hash:t,receiver:o.targetNetworkAddressService.address||o.authService.userAddress,domain:o.window.location!==o.window.parent.location?o.window.document.referrer:o.window.document.location.href,...a&&{pretrade_id:a},...T.length&&{provider_trade_id:T[0]},...k&&{referrer:k}};yield(0,D._)(o.httpService.post(o.apiEndpoint,O).pipe((0,He.c)(1e3)))})()}sendMesonSwapId(t,i){this.httpService.post("v2/trades/crosschain/new_via_meson_trade",{source_tx_hash:i,swap_id:t.extraInfo?.mesonSwapId}).subscribe()}sendPreTradeInfo(t){var i=this;return(0,S.A)(function*(){const{fromBlockchain:a,toBlockchain:o,fromAmount:c,fromAddress:l,fromDecimals:u,toAmount:p,toDecimals:m,toAddress:g}=fe.getCrossChainSwapParams(t),f=i.sessionStorage.getItem("referral"),y=t.getTradeInfo().slippage,k={price_impact:t.getTradeInfo().priceImpact,slippage:y,wallet_name:i.walletConnectorService.provider.walletName,device_type:i.isMobile?"mobile":"desktop",expected_amount:s.Web3Pure.toWei(p,m),mevbot_protection:i.settingsService.crossChainRoutingValue.useMevBotProtection,to_amount_min:s.Web3Pure.toWei(t.toTokenAmountMin,m),from_network:s.TO_BACKEND_BLOCKCHAINS[a],to_network:s.TO_BACKEND_BLOCKCHAINS[o],provider:x.TO_BACKEND_CROSS_CHAIN_PROVIDERS[t.type],from_token:l,to_token:g,from_amount:s.Web3Pure.toWei(c,u),to_amount:s.Web3Pure.toWei(p,m),user:i.authService.userAddress,receiver:i.targetNetworkAddressService.address||i.authService.userAddress,domain:i.window.location!==i.window.parent.location?i.window.document.referrer:i.window.document.location.href,...f&&{referrer:f}};return(0,D._)(i.httpService.post("v2/trades/crosschain/pretrade_new",k).pipe((0,He.c)(1e3),(0,C.T)(v=>v.pretrade_id)))})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(xt.k),e.KVO(ae.u),e.KVO(ee.c),e.KVO(Ke.R),e.KVO(_e.h),e.KVO(le.P),e.KVO(nt.Td),e.KVO(it.jf))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var At=d(48861);class Ot extends At.e{constructor(r){super(`${r} blockchain is currently unavailable.`),Object.setPrototypeOf(this,Ot.prototype)}}const Ue=Ot;var Xe=d(76006),_n=d(88368),It=d(49366);const ot=[s.BLOCKCHAIN_NAME.XLAYER,s.BLOCKCHAIN_NAME.ROOTSTOCK],Ei={native_eth_stable:"nativeStableSwap",native_eth_token:"tokenSwap",native_eth_wNative:"tokenSwap",stable_native_eth:"nativeStableSwap",token_native_eth:"tokenSwap",wNative_native_eth:"tokenSwap",wNative_wNative:"tokenSwap",wNative_stable:"stableWnativeSwap",wNative_token:"tokenSwap",wNative_native:"tokenSwap",native_stable:"nativeStableSwap",native_token:"tokenSwap",native_wNative:"tokenSwap",stable_native:"nativeStableSwap",stable_wNative:"stableWnativeSwap",stable_stable:"stableSwap",stable_token:"stableTokenSwap",token_native:"tokenSwap",token_wNative:"tokenSwap",token_stable:"stableTokenSwap",token_token:"tokenSwap",bridged_native_token:"tokenSwap",bridged_native_wNative:"tokenSwap",wNative_bridged_native:"tokenSwap",token_bridged_native:"tokenSwap",bridged_native_native:"tokenSwap",bridged_native_native_eth:"tokenSwap",bridged_native_stable:"stableTokenSwap",native_bridged_native:"tokenSwap",native_eth_bridged_native:"tokenSwap",stable_bridged_native:"stableTokenSwap"},Ri={nativeStableSwap_1:"zeroFee",nativeStableSwap_2:[{limit:100,type:"twoPercent"}],stableSwap_1:"zeroFee",stableSwap_2:"zeroFee",stableTokenSwap_1:[{limit:100,type:"onePercent"}],stableTokenSwap_2:[{limit:100,type:"onePercent"}],stableWnativeSwap_1:[{limit:100,type:"onePercent"}],stableWnativeSwap_2:[{limit:100,type:"onePercent"}],tokenSwap_1:[{limit:100,type:"twoPercent"}],tokenSwap_2:[{limit:100,type:"twoPercent"}]},Bi={native_eth_native:"tokenSwap",native_eth_native_eth:"sameNativeSwap",native_eth_stable:"nativeStableSwap",native_eth_token:"tokenSwap",native_eth_wNative:"tokenSwap",native_native:"tokenSwap",native_native_eth:"tokenSwap",native_stable:"nativeStableSwap",native_token:"tokenSwap",native_wNative:"tokenSwap",stable_native:"nativeStableSwap",stable_native_eth:"nativeStableSwap",stable_stable:"stableSwap",stable_token:"stableTokenSwap",stable_wNative:"stableWnativeSwap",token_native:"tokenSwap",token_native_eth:"tokenSwap",token_stable:"stableTokenSwap",token_token:"tokenSwap",token_wNative:"tokenSwap",wNative_native:"tokenSwap",wNative_native_eth:"tokenSwap",wNative_stable:"stableWnativeSwap",wNative_token:"tokenSwap",wNative_wNative:"tokenSwap",bridged_native_bridged_native:"sameTokenSwap",bridged_native_native:"bridgedNative_NativeSwap",bridged_native_native_eth:"bridgedNative_TokenSwap",bridged_native_stable:"bridgedNative_StableSwap",bridged_native_token:"tokenSwap",bridged_native_wNative:"tokenSwap",native_bridged_native:"bridgedNative_NativeSwap",native_eth_bridged_native:"bridgedNative_TokenSwap",stable_bridged_native:"bridgedNative_StableSwap",wNative_bridged_native:"tokenSwap",token_bridged_native:"tokenSwap"},Li={bridgedNative_NativeSwap_1_1:[{limit:100,type:"onePercent"},{limit:5e3,type:"twoPercent"}],bridgedNative_NativeSwap_1_2:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],bridgedNative_NativeSwap_2_1:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],bridgedNative_NativeSwap_2_2:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],bridgedNative_StableSwap_1_1:[{limit:100,type:"twoPercent"}],bridgedNative_StableSwap_1_2:[{limit:100,type:"twoPercent"}],bridgedNative_StableSwap_2_1:[{limit:100,type:"twoPercent"}],bridgedNative_StableSwap_2_2:[{limit:100,type:"twoPercent"}],bridgedNative_TokenSwap_1_1:"twoPercent",bridgedNative_TokenSwap_1_2:"twoPercent",bridgedNative_TokenSwap_2_1:"twoPercent",bridgedNative_TokenSwap_2_2:"twoPercent",nativeStableSwap_1_1:[{limit:100,type:"onePercent"}],nativeStableSwap_1_2:[{limit:100,type:"twoPercent"}],nativeStableSwap_2_1:[{limit:100,type:"twoPercent"}],nativeStableSwap_2_2:[{limit:100,type:"twoPercent"}],sameNativeSwap_1_1:"zeroFee",sameNativeSwap_1_2:"twoPercent",sameNativeSwap_2_1:"twoPercent",sameNativeSwap_2_2:"twoPercent",sameTokenSwap_1_1:[{limit:100,type:"twoPercent"}],sameTokenSwap_1_2:"twoPercent",sameTokenSwap_2_1:"twoPercent",sameTokenSwap_2_2:"twoPercent",stableSwap_1_1:"zeroFee",stableSwap_1_2:"twoPercent",stableSwap_2_1:"twoPercent",stableSwap_2_2:"twoPercent",stableTokenSwap_1_1:[{limit:100,type:"twoPercent"}],stableTokenSwap_1_2:"twoPercent",stableTokenSwap_2_1:"twoPercent",stableTokenSwap_2_2:"twoPercent",stableWnativeSwap_1_1:[{limit:100,type:"onePercent"},{limit:5e3,type:"twoPercent"}],stableWnativeSwap_1_2:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],stableWnativeSwap_2_1:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],stableWnativeSwap_2_2:[{limit:100,type:"onePercent"},{limit:1e4,type:"twoPercent"}],tokenSwap_1_1:"twoPercent",tokenSwap_1_2:"twoPercent",tokenSwap_2_1:"twoPercent",tokenSwap_2_2:"twoPercent"},$i={STABLE:"stable",WRAPPED_NATIVE:"wNative",NATIVE:"native",NATIVE_ETH:"native_eth",TOKEN:"token",BRIDGED_NATIVE:"bridged_native"},te={default:"0xE20c7F79DAEaBEB7a9D8cEffB73c4f857Be7fC27",zeroFee:"0x51c276f1392E87D4De6203BdD80c83f5F62724d4",onePercent:"0xC095e57dDfa5924BC56bEAcf1D515F154ac44e94",twoPercent:"0xE20c7F79DAEaBEB7a9D8cEffB73c4f857Be7fC27"};let mn=(()=>{class n{constructor(t,i,a,o){this.configService=t,this.tokensStore=i,this.httpService=a,this.sessionStorage=o}getIntegratorAddress(t,i,a){var o=this;return(0,S.A)(function*(){try{if(t.blockchain===x.BLOCKCHAIN_NAME.SOLANA||a.blockchain===x.BLOCKCHAIN_NAME.SOLANA)return o.handlePromoIntegrator(t,a,te.zeroFee);const c=t.price.multipliedBy(i),l=o.sessionStorage.getItem("referral");if(function Fi(n,r){return(n.isNative||r.isNative)&&(n.isWrapped||r.isWrapped)&&n.blockchain===r.blockchain}(t,a))return te.zeroFee;const u=(t.blockchain===x.BLOCKCHAIN_NAME.BERACHAIN||a.blockchain===x.BLOCKCHAIN_NAME.BERACHAIN)&&c.isFinite();if((c.lte(0)||!c.isFinite())&&!l)return o.handlePromoIntegrator(t,a,te.default);if(c.lte(100)&&c.isFinite())return o.handlePromoIntegrator(t,a,te.zeroFee);if(l){const k=yield o.getIntegratorByReferralName(l);if(k)return k}const p=o.getTokenType(t);if(!p)throw new Error("Failed to fetch token from backend");const m=o.getTokenType(a);if(!m)throw new Error("Failed to fetch token from backend");const g=o.getFeeValue(t,p,a,m);if("string"==typeof g)return o.handlePromoIntegrator(t,a,u&&te[g]!==te.zeroFee?te.onePercent:te[g]);const y=g.sort((k,v)=>v.limit-k.limit).find(k=>c.gt(k.limit));if(!y)throw new Error("Limit not found");return o.handlePromoIntegrator(t,a,u&&te[y.type]!==te.zeroFee?te.onePercent:te[y.type])}catch(c){return console.error(c),te.default}})()}getOnChainFee(t,i,a){return Ri[`${Ei[`${t}_${i}`]}_${a}`]}getCrossChainFee(t,i,a,o,c,l){let p=Bi[`${t}_${i}`];return"tokenSwap"===p&&c===l&&(p="sameTokenSwap"),Li[`${p}_${a}_${o}`]}getFeeValue(t,i,a,o){const c=this.configService.availableBlockchains;if(t.blockchain!==a.blockchain){const u=c.find(m=>m.blockchain===t.blockchain).tier,p=c.find(m=>m.blockchain===a.blockchain).tier;return this.getCrossChainFee(i,o,u,p,t.symbol,a.symbol)}{const u=c.find(p=>p.blockchain===t.blockchain).tier;return this.getOnChainFee(i,o,u)}}getTokenType(t){const a=this.tokensStore.tokens.find(o=>o.blockchain===t.blockchain&&o.address===t.address).type;return $i[a]}handlePromoIntegrator(t,i,a){const o=new URLSearchParams(window.location.search),c=o.get("feeTarget")||o.get("providerAddress"),l=o.get("crossChainIntegratorAddress")||c,u=o.get("onChainIntegratorAddress")||c,p=t.blockchain===i.blockchain;return u&&p?u:l&&!p?l:a}getIntegratorByReferralName(t){var i=this;return(0,S.A)(function*(){try{const a=i.sessionStorage.getItem(t.toLowerCase());if(a)return a;const o=yield(0,D._)(i.httpService.get(`v2/referrers/get_integrator_address_for_referrer?referrer=${t}`));return o.integrator_address?(i.sessionStorage.setItem(t.toLowerCase(),o.integrator_address),o.integrator_address):null}catch{return null}})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Re.p),e.KVO(J.p),e.KVO(xt.k),e.KVO(Ke.R))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var We=d(26444),hn=d(43932),rt=d(15738),Di=d(66003);let gn=(()=>{class n{get receiverAddress(){return this.settingsService.crossChainRoutingValue.showReceiverAddress?this.targetNetworkAddressService.address:null}constructor(t,i,a,o,c,l,u,p,m,g,f,y,k,v,T,O,R,pe){this.sdkService=t,this.swapFormService=i,this.settingsService=a,this.targetNetworkAddressService=o,this.platformConfigurationService=c,this.queryParamsService=l,this.sessionStorage=u,this.tokensService=p,this.crossChainApiService=m,this.walletConnectorService=g,this.dialogService=f,this.injector=y,this.authService=k,this.gtmService=v,this.gasService=T,this.proxyService=O,this.iframeService=R,this.refundService=pe,this.defaultTimeout=15e3}calculateTrades(t){var i=this;return(0,S.A)(function*(){const{fromToken:a,toToken:o,fromAmount:c,fromBlockchain:l}=i.swapFormService.inputValue,[u,p]=yield Promise.all([i.tokensService.getTokenPrice(a,!0),i.tokensService.getTokenPrice(o,!0)]),m=new s.PriceToken({...a,price:u}),g=new s.PriceToken({...o,price:p}),f=i.getDisabledProviders(t,l),y=yield i.getOptions(f,m,g,c.actualValue),k={srcTokenAddress:a.address,dstTokenBlockchain:o.blockchain,srcTokenBlockchain:a.blockchain,srcTokenAmount:c.actualValue.toFixed(),dstTokenAddress:o.address};s.Injector.rubicApiService.calculateAsync({calculationTimeout:60,showDangerousRoutes:!0,...k,...y})})()}getOptions(t,i,a,o){var c=this;return(0,S.A)(function*(){const l=c.settingsService.crossChainRoutingValue.slippageTolerance/100,{disabledCrossChainTradeTypes:u}=c.platformConfigurationService.disabledProviders;return{slippage:l,nativeBlacklist:Array.from(new Set([...t,...u||[],...c.queryParamsService.disabledCrossChainProviders||[]])),integratorAddress:yield c.proxyService.getIntegratorAddress(i,o,a)}})()}getDisabledProxyConfig(){return Object.fromEntries(Object.values(x.CROSS_CHAIN_TRADE_TYPE).map(t=>[t,!1]))}saveNotWhitelistedProvider(t,i,a){t instanceof s.NotWhitelistedProviderError?this.crossChainApiService.saveNotWhitelistedProvider(t,i,a).subscribe():this.crossChainApiService.saveNotWhitelistedCcrProvider(t,i,a).subscribe()}swapTrade(t,i,a={useCacheData:!1,skipAmountCheck:!1}){var o=this;return(0,S.A)(function*(){const c=o.settingsService.crossChainRoutingValue.useMevBotProtection;o.checkBlockchainsAvailable(t);const[l,u]=yield Promise.all([o.tokensService.findToken(t.from),o.tokensService.findToken(t.to)]);yield o.handlePreSwapModal(t);const p=yield o.sendPreTradeInfo(t);let m;const f=t.from.blockchain,{shouldCalculateGasPrice:y,gasPriceOptions:k}=yield o.gasService.getGasInfo(f),v=o.sessionStorage.getItem("referral"),T=o.receiverAddress,O={onConfirm:R=>{m=R,i?.(R),o.crossChainApiService.createTrade(R,t,p),o.notifyGtmAfterSignTx(R,l,u,t.from.tokenAmount,c)},...T&&{receiverAddress:T},...y&&{gasPriceOptions:k},...o.queryParamsService.testMode&&{testMode:!0},...v&&{referrer:v},refundAddress:o.refundService.refundAddress,useCacheData:a.useCacheData,skipAmountCheck:a.skipAmountCheck};try{return yield t.swap(O),yield o.conditionalAwait(l.blockchain),yield o.tokensService.updateTokenBalanceAfterCcrSwap(l,u),m}catch(R){(R instanceof s.NotWhitelistedProviderError||R instanceof s.UnapprovedContractError||R instanceof s.UnapprovedMethodError)&&o.saveNotWhitelistedProvider(R,t.from.blockchain,t.type);const pe=It.T.parseError(R);throw R instanceof s.UserRejectError||o.gtmService.fireSwapError(t,o.authService.userAddress,pe),pe instanceof rt.A&&!(R instanceof s.UserRejectError)&&t.getTradeInfo().slippage<5?new hn.C(.05):pe}})()}approveTrade(t,i){var a=this;return(0,S.A)(function*(){a.checkBlockchainsAvailable(t);const o=t.from.blockchain,{shouldCalculateGasPrice:c,gasPriceOptions:l}=yield a.gasService.getGasInfo(o);let u={};try{t instanceof s.EvmCrossChainTrade&&(u={...u,...c&&{gasPriceOptions:l}});const{fromAmount:p,fromDecimals:m}=fe.getCrossChainSwapParams(t),g=new E.A(s.Web3Pure.toWei(p,m));yield t.approve(u,!0,g)}catch(p){if(p instanceof s.UnnecessaryApproveError)return;throw p}})()}saveTrade(t,i){this.crossChainApiService.saveProvidersStatistics({user:this.walletConnectorService.address,from_token:i.fromAddress,from_network:x.TO_BACKEND_BLOCKCHAINS?.[i.fromBlockchain],from_amount:i.fromAmount,to_token:i.toAddress,to_network:x.TO_BACKEND_BLOCKCHAINS?.[i.toBlockchain],providers_statistics:t.map(a=>{const{calculationTime:o,wrappedTrade:c}=a;return{provider_title:c?.tradeType,calculation_time_in_seconds:String(o/1e3),to_amount:c?.trade?.to.stringWeiAmount,status:c?.trade?"success":"error",has_swap_in_source_network:c?.trade&&"onChainTrade"in c.trade,proxy_used:c?.trade?.feeInfo?.rubicProxy?.fixedFee?.amount?.gt(0),...c?.error&&{additional_info:c.error.message}}})}).subscribe()}checkBlockchainsAvailable(t){const i=t.from.blockchain,a=t.to.blockchain;if(!this.platformConfigurationService.isAvailableBlockchain(i))throw new Ue(Xe.Z[i]);if(!this.platformConfigurationService.isAvailableBlockchain(a))throw new Ue(Xe.Z[a])}handlePreSwapModal(t){var i=this;return(0,S.A)(function*(){if(t.type===x.CROSS_CHAIN_TRADE_TYPE.ARBITRUM&&t.from.blockchain===x.BLOCKCHAIN_NAME.ARBITRUM)try{yield(0,D._)(i.dialogService.openArbitrumWarningModal())}catch{throw new s.UserRejectError}})()}notifyGtmAfterSignTx(t,i,a,o,c){const l=new E.A(2);this.gtmService.fireTxSignedEvent(X.T.CROSS_CHAIN_ROUTING,t,i.symbol,a.symbol,l,o.multipliedBy(i.price),"crosschain",o.multipliedBy(i.price).gt(1e3)?c:null)}conditionalAwait(t){return(0,S.A)(function*(){t===x.BLOCKCHAIN_NAME.SOLANA&&(yield(0,D._)((0,Te.O)(3e3)))})()}calculateTimeoutForChains(){const{fromBlockchain:t,toBlockchain:i}=this.swapFormService.inputValue;return ot.includes(t)||ot.includes(i)?3e4:this.defaultTimeout}getDisabledProviders(t,i){let o=[...t];Object.values(We.hT).includes(i)&&this.iframeService.isIframe&&(o=[...o,x.CROSS_CHAIN_TRADE_TYPE.CHANGENOW]);const c=this.sessionStorage.getItem("referral");return c&&this.sessionStorage.getItem(c.toLowerCase())&&(o=[...o,x.CROSS_CHAIN_TRADE_TYPE.SIMPLE_SWAP,x.CROSS_CHAIN_TRADE_TYPE.CHANGELLY]),o}sendPreTradeInfo(t){var i=this;return(0,S.A)(function*(){try{return yield i.crossChainApiService.sendPreTradeInfo(t)}catch{return null}})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Tt.K),e.KVO(N.K),e.KVO(_e.h),e.KVO(le.P),e.KVO(Re.p),e.KVO(he.w),e.KVO(Ke.R),e.KVO(ge.m),e.KVO(at),e.KVO(ee.c),e.KVO(ce.B),e.KVO(e.duS),e.KVO(ae.u),e.KVO(tt.A),e.KVO(_n.R),e.KVO(mn),e.KVO(Di.s),e.KVO(Ne))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var me=d(39999),Mt=d(40800),ze=d(97681),_=d(60177),st=d(84281),ct=d(93197);function Gi(n,r){if(1&n&&(e.j41(0,"a",1),e.nI1(1,"scannerLink"),e.EFF(2,"See details."),e.k0s()),2&n){const t=e.XpG();e.Y8G("safetyLink",e.brH(1,1,t.txHash,t.blockchainName,t.ADDRESS_TYPE.TRANSACTION))}}let Vi=(()=>{class n{constructor(t){this.context=t,this.ADDRESS_TYPE=ze.A,this.blockchainName=t.data.blockchainName,this.txHash=t.data.txHash}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Mt.su))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-transaction-failed-error"]],decls:4,vars:1,consts:[[3,"safetyLink",4,"ngIf"],[3,"safetyLink"]],template:function(i,a){1&i&&(e.qex(0),e.j41(1,"span"),e.EFF(2,"Transaction failed. "),e.DNE(3,Gi,3,5,"a",0),e.k0s(),e.bVm()),2&i&&(e.R7$(3),e.Y8G("ngIf",a.txHash))},dependencies:[_.bT,st.A,ct.n],changeDetection:0})}return n})();class Nt extends me.A{constructor(r,t){super(Vi,{txHash:t,blockchainName:r}),Object.setPrototypeOf(this,Nt.prototype)}}var fn=d(76422);let Et=(()=>{class n{constructor(t,i,a,o,c,l,u){this.httpService=t,this.walletConnectorService=i,this.authService=a,this.sessionStorage=o,this.settingsService=c,this.targetNetworkAddressService=l,this.isMobile=u}notifyInstantTradesBot(t){const{fromAmount:i,toAmount:a,fromSymbol:o,toSymbol:c,fromPrice:l,blockchain:u,type:p}=fe.getItSwapParams(t.trade),{txHash:m,walletAddress:g}=t,f={fromAmount:i.toNumber(),toAmount:a.toNumber(),fromSymbol:o,toSymbol:c,price:l,txHash:m,walletAddress:g,blockchain:u,provider:p};return this.httpService.post("bot/instant_trade",f).toPromise()}createTrade(t,i,a,o){const{blockchain:c,fromAmount:l,fromAddress:u,fromDecimals:p,toAmount:m,toDecimals:g,toAddress:f}=fe.getItSwapParams(a),y=this.sessionStorage.getItem("referral"),k=this.sessionStorage.getItem("swapId"),v={blockchain:c,fromAddress:u,fromAmount:s.Web3Pure.toWei(l,p),toAddress:f,toAmount:s.Web3Pure.toWei(m,g)},T=fn.I[i],O={price_impact:a.getTradeInfo().priceImpact,walletName:this.walletConnectorService.provider.walletName,deviceType:this.isMobile?"mobile":"desktop",slippage:a.slippageTolerance,expected_amount:v.toAmount,mevbot_protection:this.settingsService.instantTradeValue.useMevBotProtection,to_amount_min:a.toTokenAmountMin.stringWeiAmount,network:s.TO_BACKEND_BLOCKCHAINS[v.blockchain],provider:T,from_token:v.fromAddress,to_token:v.toAddress,from_amount:v.fromAmount,to_amount:v.toAmount,user:this.authService.userAddress,receiver:this.targetNetworkAddressService.address||this.authService.userAddress,hash:t,...o&&{pretrade_id:o},...y&&{referrer:y},...k&&{swap_id:k}};return this.httpService.post("v2/trades/onchain/new_extended",O).pipe((0,He.c)(1e3))}saveNotWhitelistedProvider(t,i,a){return this.httpService.post("info/new_provider",{network:s.TO_BACKEND_BLOCKCHAINS[i],title:a,address:t.providerRouter+(t.providerGateway?`_${t.providerGateway}`:""),cause:"on-chain"})}saveNotWhitelistedOnChainProvider(t,i,a){return this.httpService.post("info/new_provider",t instanceof s.UnapprovedContractError?{network:s.TO_BACKEND_BLOCKCHAINS[i],title:a,address:t.contract,cause:"on-chain",selector:"unknown"}:{network:s.TO_BACKEND_BLOCKCHAINS[i],title:a,address:"unknown",cause:"on-chain",selector:t.method})}saveProvidersStatistics(t){return this.httpService.post("onchain_route_calculation/save",t,null,{headers:{Signature:(0,un.d)(t.to_token.toLowerCase(),t.from_token.toLowerCase())}})}sendPreTradeInfo(t){const{blockchain:i,fromAmount:a,fromAddress:o,fromDecimals:c,toAmount:l,toDecimals:u,toAddress:p}=fe.getItSwapParams(t),m=this.sessionStorage.getItem("referral"),g=fn.I[t.type],f={price_impact:t.getTradeInfo().priceImpact,walletName:this.walletConnectorService.provider.walletName,deviceType:this.isMobile?"mobile":"desktop",slippage:t.slippageTolerance,expected_amount:s.Web3Pure.toWei(l,u),mevbot_protection:this.settingsService.instantTradeValue.useMevBotProtection,to_amount_min:t.toTokenAmountMin.stringWeiAmount,network:s.TO_BACKEND_BLOCKCHAINS[i],provider:g,from_token:o,to_token:p,from_amount:s.Web3Pure.toWei(a,c),to_amount:s.Web3Pure.toWei(l,u),user:this.authService.userAddress,receiver:this.targetNetworkAddressService.address||this.authService.userAddress,...m&&{referrer:m}};return(0,D._)(this.httpService.post("v2/trades/onchain/pretrade_new",f).pipe((0,He.c)(1e3),(0,C.T)(y=>y.pretrade_id)))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(xt.k),e.KVO(ee.c),e.KVO(ae.u),e.KVO(Ke.R),e.KVO(_e.h),e.KVO(le.P),e.KVO(nt.Td))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();const vn=[s.BLOCKCHAIN_NAME.MERLIN];var bn=d(35527);let Cn=(()=>{class n{get receiverAddress(){return this.settingsService.instantTradeValue.showReceiverAddress?this.targetNetworkAddressService.address:null}constructor(t,i,a,o,c,l,u,p,m,g,f,y,k,v,T){this.sdkService=t,this.swapFormService=i,this.platformConfigurationService=a,this.gasService=o,this.tokensService=c,this.authService=l,this.settingsService=u,this.targetNetworkAddressService=p,this.gtmService=m,this.onChainApiService=g,this.queryParamsService=f,this.sessionStorage=y,this.proxyService=k,this.walletConnectorService=v,this.modalService=T}calculateTrades(t){var i=this;return(0,S.A)(function*(){const{fromToken:a,toToken:o,fromAmount:c}=i.swapFormService.inputValue,[l,u]=yield Promise.all([i.tokensService.getTokenPrice(a,!0),i.tokensService.getTokenPrice(o,!0)]),p=new s.PriceToken({...a,price:l}),m=new s.PriceToken({...o,price:u}),g=yield i.getOptions(p,m,t,c.actualValue),f={srcTokenAddress:a.address,dstTokenBlockchain:o.blockchain,srcTokenBlockchain:a.blockchain,srcTokenAmount:c.actualValue.toFixed(),dstTokenAddress:o.address};bn.Injector.rubicApiService.calculateAsync({calculationTimeout:60,showDangerousRoutes:!0,...f,...g})})()}swapTrade(t,i,a={useCacheData:!1,skipAmountCheck:!1}){var o=this;return(0,S.A)(function*(){const c=t.from.blockchain,{fromSymbol:l,toSymbol:u,fromAmount:p,fromPrice:m,blockchain:g}=fe.getItSwapParams(t);if(!o.platformConfigurationService.isAvailableBlockchain(c))throw new Ue(Xe.Z[c]);yield o.handlePreSwapModal(t);const f=o.receiverAddress,{shouldCalculateGasPrice:y,gasPriceOptions:k}=yield o.gasService.getGasInfo(g),v=o.sessionStorage.getItem("referral"),T=o.settingsService.instantTradeValue.useMevBotProtection;let O;const R=yield o.sendPreTradeInfo(t),pe={onConfirm:U=>{O=U,i?.(U),o.notifyGtmAfterSignTx(O,l,u,p.multipliedBy(m),T),o.postTrade(U,t,R)},...o.queryParamsService.testMode&&{testMode:!0},...y&&{gasPriceOptions:k},...f&&{receiverAddress:f},useCacheData:a.useCacheData,...v&&{referrer:v}};try{yield t.swap(pe);const[U,Pe]=yield Promise.all([o.tokensService.findToken(t.from),o.tokensService.findToken(t.to)]);if(yield o.conditionalAwait(c),yield o.tokensService.updateTokenBalancesAfterItSwap(U,Pe),t instanceof s.OnChainTrade&&t.from.blockchain===s.BLOCKCHAIN_NAME.TRON&&t.type===s.ON_CHAIN_TRADE_TYPE.BRIDGERS){const qe=yield(0,D._)((0,Te.O)(7e3,5e3).pipe((0,wt.H)(()=>o.sdkService.onChainStatusManager.getBridgersSwapStatus(O,t.slippageTolerance)),(0,H.$)(Fe=>Fe.status===s.TX_STATUS.SUCCESS||Fe.status===s.TX_STATUS.FAIL),(0,ue.W)(Fe=>(console.log(Fe),(0,w.of)({hash:null,status:s.TX_STATUS.PENDING})))));if(qe.status!==s.TX_STATUS.SUCCESS)throw new Nt(s.BLOCKCHAIN_NAME.TRON,qe.hash)}return O}catch(U){(U instanceof s.NotWhitelistedProviderError||U instanceof s.UnapprovedContractError||U instanceof s.UnapprovedMethodError)&&o.saveNotWhitelistedProvider(U,c,t?.type);const Pe=It.T.parseError(U);throw U instanceof s.UserRejectError||o.gtmService.fireSwapError(t,o.authService.userAddress,Pe),Pe instanceof rt.A&&!(U instanceof s.UserRejectError)&&t.getTradeInfo().slippage<3?new hn.C(.03):Pe}})()}approveTrade(t,i){var a=this;return(0,S.A)(function*(){if(!a.platformConfigurationService.isAvailableBlockchain(t.from.blockchain))throw new Ue(Xe.Z[t.from.blockchain]);if(!a.platformConfigurationService.isAvailableBlockchain(t.to.blockchain))throw new Ue(Xe.Z[t.to.blockchain]);const{blockchain:o,fromAmount:c,fromDecimals:l}=fe.getItSwapParams(t),{shouldCalculateGasPrice:u,gasPriceOptions:p}=yield a.gasService.getGasInfo(o),m={onTransactionHash:i,...u&&{gasPriceOptions:p}};try{const g=new E.A(s.Web3Pure.toWei(c,l));yield t.approve(m,!0,g)}catch(g){if(g instanceof s.UnnecessaryApproveError)return;throw g}})()}notifyGtmAfterSignTx(t,i,a,o,c){this.gtmService.fireTxSignedEvent(X.T.INSTANT_TRADE,t,i,a,new E.A(1),o,"onchain",o.gt(1e3)?c:null)}postTrade(t,i,a){var o=this;return(0,S.A)(function*(){const{blockchain:c}=fe.getItSwapParams(i),l=c===s.BLOCKCHAIN_NAME.BOBA?3e3:0;yield(0,D._)((0,Te.O)(l).pipe((0,I.n)(()=>o.onChainApiService.createTrade(t,i.type,i,a))))})()}saveNotWhitelistedProvider(t,i,a){t instanceof s.NotWhitelistedProviderError?this.onChainApiService.saveNotWhitelistedProvider(t,i,a).subscribe():this.onChainApiService.saveNotWhitelistedOnChainProvider(t,i,a).subscribe()}isNotMinedError(t){return!!t?.message?.includes&&t.message.includes("Transaction was not mined within 50 blocks, please make sure your transaction was properly sent. Be aware that it might still be mined!")}handlePreSwapModal(t){var i=this;return(0,S.A)(function*(){if(t instanceof s.TonOnChainTrade&&t.additionalInfo.isMultistep&&!(yield i.modalService.openTonSlippageWarning(t)))throw new s.UserRejectError})()}conditionalAwait(t){return(0,S.A)(function*(){t===s.BLOCKCHAIN_NAME.SOLANA&&(yield(0,D._)((0,Te.O)(3e3)))})()}calculateTimeoutForChains(){const{fromBlockchain:t}=this.swapFormService.inputValue;return vn.includes(t)?3e4:1e4}saveTrade(t,i){this.onChainApiService.saveProvidersStatistics({user:this.walletConnectorService.address,from_token:i.fromAddress,network:s.TO_BACKEND_BLOCKCHAINS?.[i.blockchain],from_amount:i.fromAmount,to_token:i.toAddress,providers_statistics:t.map(a=>{const{calculationTime:o,wrappedTrade:c}=a;return{provider_title:c?.tradeType,calculation_time_in_seconds:String(o/1e3),to_amount:c?.trade?.to.stringWeiAmount,status:c?.trade?"success":"error",proxy_used:c?.trade?.feeInfo?.rubicProxy?.fixedFee?.amount?.gt(0),...c?.error&&{additional_info:c.error.message}}})}).subscribe()}getOptions(t,i,a,o){var c=this;return(0,S.A)(function*(){const u=Array.from(new Set([...a,...c.queryParamsService.disabledOnChainProviders]));return{slippage:c.settingsService.instantTradeValue.slippageTolerance/100,nativeBlacklist:[...u],integratorAddress:yield c.proxyService.getIntegratorAddress(t,o,i)}})()}sendPreTradeInfo(t){var i=this;return(0,S.A)(function*(){try{return yield i.onChainApiService.sendPreTradeInfo(t)}catch{return null}})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Tt.K),e.KVO(N.K),e.KVO(Re.p),e.KVO(_n.R),e.KVO(ge.m),e.KVO(ae.u),e.KVO(_e.h),e.KVO(le.P),e.KVO(tt.A),e.KVO(Et),e.KVO(he.w),e.KVO(Ke.R),e.KVO(mn),e.KVO(ee.c),e.KVO(ce.B))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Rt=d(92460),de=function(n){return n.REFRESHING="refreshing",n.IN_PROGRESS="in progress",n.STOPPED="stopped",n}(de||{});let Bt=(()=>{class n{get status(){return this._status$.getValue()}constructor(t){this.swapFormService=t,this._status$=new L.t(de.STOPPED),this.status$=this._status$.asObservable(),this._onRefresh$=new pn.B,this.onRefresh$=this._onRefresh$.asObservable(),this.isRefreshing=!1,this.isForcedRefresh=!1,this.isRefreshRotating$=this.status$.pipe((0,C.T)((i,a)=>{const o=1===a;return this.isForcedRefresh&&(this.isForcedRefresh=!1),o})),this.swapFormService.isFilled$.pipe((0,B.F)()).subscribe(i=>{i||this._status$.next(de.STOPPED)})}onButtonClick(){this._onRefresh$.next({isForced:!0}),this.isForcedRefresh=!0}setRefreshing(){this.isRefreshing=!0,this.status!==de.IN_PROGRESS&&this._status$.next(de.REFRESHING)}setStopped(){this.isRefreshing=!1,this.status!==de.IN_PROGRESS&&this._status$.next(de.STOPPED)}startInProgress(){this._status$.next(de.IN_PROGRESS)}stopInProgress(){this._status$.next(this.isRefreshing?de.REFRESHING:de.STOPPED)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(N.K))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();class Lt extends At.e{constructor(){super("errors.crossChainIsUnavailable"),Object.setPrototypeOf(this,Lt.prototype)}}const ji=Lt;var Yi=d(43276);class $t extends me.A{constructor(){super(null,{},"The swap between this pair of tokens is currently unavailable. Please try again later."),Object.setPrototypeOf(this,$t.prototype)}}const kn=$t;var Ki=d(25368),Ui=d(64165);class Ft extends At.e{constructor(){super("Your transaction is still in progress. Please wait for it to complete before performing a new Approve transaction. If it takes too long, try to boost your transaction in wallet"),Object.setPrototypeOf(this,Ft.prototype)}}const Xi=Ft;var Wi=d(87796),zi=d(17202);const Zi=[...new Set(Object.values({[s.BLOCKCHAIN_NAME.ETHEREUM]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.POLYGON]:[x.ON_CHAIN_TRADE_TYPE.ALGEBRA,x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.POLYGON_ZKEVM]:[],[s.BLOCKCHAIN_NAME.HARMONY]:[],[s.BLOCKCHAIN_NAME.AVALANCHE]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.MOONRIVER]:[],[s.BLOCKCHAIN_NAME.FANTOM]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.ARBITRUM]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.AURORA]:[],[s.BLOCKCHAIN_NAME.TELOS]:[],[s.BLOCKCHAIN_NAME.OPTIMISM]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.CRONOS]:[],[s.BLOCKCHAIN_NAME.OKE_X_CHAIN]:[],[s.BLOCKCHAIN_NAME.GNOSIS]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.FUSE]:[],[s.BLOCKCHAIN_NAME.MOONBEAM]:[],[s.BLOCKCHAIN_NAME.CELO]:[x.ON_CHAIN_TRADE_TYPE.CURVE],[s.BLOCKCHAIN_NAME.BOBA]:[],[s.BLOCKCHAIN_NAME.KAVA]:[],[s.BLOCKCHAIN_NAME.TRON]:[],[s.BLOCKCHAIN_NAME.OASIS]:[],[s.BLOCKCHAIN_NAME.METIS]:[],[s.BLOCKCHAIN_NAME.KLAYTN]:[],[s.BLOCKCHAIN_NAME.VELAS]:[],[s.BLOCKCHAIN_NAME.SYSCOIN]:[],[s.BLOCKCHAIN_NAME.ASTAR_EVM]:[],[s.BLOCKCHAIN_NAME.ZK_SYNC]:[],[s.BLOCKCHAIN_NAME.PULSECHAIN]:[],[s.BLOCKCHAIN_NAME.LINEA]:[x.ON_CHAIN_TRADE_TYPE.HORIZONDEX],[s.BLOCKCHAIN_NAME.BASE]:[],[s.BLOCKCHAIN_NAME.MANTLE]:[],[s.BLOCKCHAIN_NAME.FUJI]:[],[s.BLOCKCHAIN_NAME.GOERLI]:[],[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN_TESTNET]:[],[s.BLOCKCHAIN_NAME.MUMBAI]:[],[s.BLOCKCHAIN_NAME.SCROLL_SEPOLIA]:[],[s.BLOCKCHAIN_NAME.ARTHERA]:[],[s.BLOCKCHAIN_NAME.ZETACHAIN]:[],[s.BLOCKCHAIN_NAME.TAIKO]:[],[s.BLOCKCHAIN_NAME.SEPOLIA]:[],[s.BLOCKCHAIN_NAME.MANTA_PACIFIC]:[],[s.BLOCKCHAIN_NAME.SCROLL]:[],[s.BLOCKCHAIN_NAME.STARKNET]:[],[s.BLOCKCHAIN_NAME.BERACHAIN_TESTNET]:[],[s.BLOCKCHAIN_NAME.BLAST]:[x.ON_CHAIN_TRADE_TYPE.FENIX_V2],[s.BLOCKCHAIN_NAME.BLAST_TESTNET]:[],[s.BLOCKCHAIN_NAME.HOLESKY]:[],[s.BLOCKCHAIN_NAME.HORIZEN_EON]:[],[s.BLOCKCHAIN_NAME.MERLIN]:[],[s.BLOCKCHAIN_NAME.ROOTSTOCK]:[],[s.BLOCKCHAIN_NAME.MODE]:[],[s.BLOCKCHAIN_NAME.ZK_FAIR]:[],[s.BLOCKCHAIN_NAME.ZK_LINK]:[],[s.BLOCKCHAIN_NAME.XLAYER]:[],[s.BLOCKCHAIN_NAME.SEI]:[],[s.BLOCKCHAIN_NAME.CORE]:[],[s.BLOCKCHAIN_NAME.BAHAMUT]:[],[s.BLOCKCHAIN_NAME.BITLAYER]:[],[s.BLOCKCHAIN_NAME.GRAVITY]:[],[s.BLOCKCHAIN_NAME.UNICHAIN_SEPOLIA_TESTNET]:[],[s.BLOCKCHAIN_NAME.MORPH]:[],[s.BLOCKCHAIN_NAME.FRAXTAL]:[],[s.BLOCKCHAIN_NAME.BERACHAIN]:[x.ON_CHAIN_TRADE_TYPE.ZRX],[s.BLOCKCHAIN_NAME.SONEIUM]:[],[s.BLOCKCHAIN_NAME.WANCHAIN]:[],[s.BLOCKCHAIN_NAME.UNICHAIN]:[],[s.BLOCKCHAIN_NAME.HEMI]:[]}).filter(n=>n.length).flat())];let Sn=(()=>{class n{constructor(t,i,a,o,c,l,u,p,m,g,f,y){this.swapFormService=t,this.crossChainService=i,this.onChainService=a,this.swapsStateService=o,this.errorsService=c,this.authService=l,this.refreshService=u,this.modalService=p,this.settingsService=m,this.targetNetworkAddressService=g,this.crossChainApiService=f,this.onChainApiService=y,this._calculateTrade$=new pn.B,this.calculateTrade$=this._calculateTrade$.asObservable().pipe((0,Z.B)(20)),this.disabledTradesTypes={crossChain:[],onChain:[]},this.subscribeOnFormChanges(),this.subscribeOnCalculation(),this.subscribeOnRefreshServiceCalls(),this.subscribeOnAddressChange(),this.subscribeOnSettings(),this.subscribeOnReceiverChange(),this.subscribeOnSwapFormFilled()}subscribeOnFormChanges(){this.swapFormService.inputValueDistinct$.subscribe(()=>{this.startRecalculation(!0),this.swapsStateService.clearProviders(!1)})}startRecalculation(t=!1){this._calculateTrade$.next({isForced:t})}subscribeOnCalculation(){this.handleWs(),this.calculateTrade$.pipe((0,Z.B)(220),(0,C.T)(t=>t.stop||!this.swapFormService.isFilled?(this.refreshService.setStopped(),{...t,stop:!0}):{...t,stop:!1}),(0,W.M)(t=>{t.stop||(this.refreshService.setRefreshing(),this.swapsStateService.setCalculationProgress(1,0),t.isForced&&(this.swapsStateService.clearProviders(!1),this.disabledTradesTypes.crossChain=[],this.disabledTradesTypes.onChain=[]),this.swapsStateService.patchCalculationState())}),(0,I.n)(t=>{if(t.stop)return(0,w.of)(null);const{fromToken:i,toToken:a}=this.swapFormService.inputValue;return this.disabledTradesTypes.crossChain=[...this.disabledTradesTypes.crossChain,"layerzero"],i?.blockchain===a?.blockchain?this.onChainService.calculateTrades([...this.disabledTradesTypes.onChain,...Zi]):this.crossChainService.calculateTrades([...this.disabledTradesTypes.crossChain])}),(0,ue.W)(t=>(console.debug(t),(0,w.of)(null)))).subscribe()}subscribeOnRefreshServiceCalls(){this.refreshService.onRefresh$.subscribe(t=>{this.startRecalculation(t.isForced)})}setTradeAmount(){const t=this.swapsStateService.tradeState?.trade;t&&this.swapFormService.outputControl.patchValue({toAmount:t.to.tokenAmount})}swap(t,i){var a=this;return(0,S.A)(function*(){const o=t.trade;let c;try{if(!a.checkIsEqualFromAmount(o.from.tokenAmount))throw new Error("Trade has invalid from amount");if(!(yield a.settingsService.checkSlippageAndPriceImpact(o instanceof q.CrossChainTrade?X.T.CROSS_CHAIN_ROUTING:X.T.INSTANT_TRADE,o)))return void i.onError?.();c=o instanceof q.CrossChainTrade?yield a.crossChainService.swapTrade(o,i.onHash):yield a.onChainService.swapTrade(o,i.onHash)}catch(l){if(l instanceof Wi.A)if(yield(0,D._)(a.modalService.openRateChangedModal(s.Web3Pure.fromWei(l.oldAmount,o.to.decimals),s.Web3Pure.fromWei(l.newAmount,o.to.decimals),o.to.symbol)))try{c=o instanceof q.CrossChainTrade?yield a.crossChainService.swapTrade(o,i.onHash,{skipAmountCheck:!0,useCacheData:!0}):yield a.onChainService.swapTrade(o,i.onHash,{skipAmountCheck:!0,useCacheData:!0})}catch(p){a.catchSwapError(p,t,i?.onError)}else a.catchSwapError(new s.UserRejectError,t,i?.onError);else a.catchSwapError(l,t,i?.onError)}c&&i.onSwap?.()})()}approve(t,i){var a=this;return(0,S.A)(function*(){try{t.trade instanceof q.CrossChainTrade?yield a.crossChainService.approveTrade(t.trade,i.onHash):yield a.onChainService.approveTrade(t.trade,i.onHash),i?.onSwap()}catch(o){console.error(o),i?.onError();let c=o;o?.message?.includes("Transaction was not mined within 50 blocks")&&(c=new Xi),a.errorsService.catch(c)}})()}authWallet(t,i){var a=this;return(0,S.A)(function*(){const o=t.trade;try{yield o.authWallet(),i.onSwap()}catch(c){console.error(c),i.onError(),a.errorsService.catch(c)}})()}subscribeOnAddressChange(){this.authService.currentUser$.pipe((0,B.F)(),(0,I.n)(()=>this.swapFormService.isFilled$),(0,se.p)(t=>t)).subscribe(()=>{this.startRecalculation(!0)})}parseCalculationError(t){if(t instanceof s.NotSupportedTokensError)return new me.A("Currently, Rubic does not support swaps between these tokens.");if(t instanceof s.UnsupportedReceiverAddressError)return new me.A("This provider doesn\u2019t support the receiver address.");if(t instanceof s.CrossChainIsUnavailableError)return new ji;if(t instanceof s.LowSlippageError)return new me.A("Slippage is too low for transaction.");if(t instanceof Yi.A)return new me.A("The swap can't be executed with the entered amount of tokens. Please change it to the greater amount.");if(t?.message?.includes("No available routes"))return new me.A("No available routes.");if(t?.message?.includes("There are no providers for trade"))return new me.A("There are no providers for trade.");if(t?.message?.includes("Representation of "))return new me.A("The swap between this pair of blockchains is currently unavailable.");if(t?.message?.includes("INSUFFICIENT_OUTPUT_AMOUNT"))return new me.A("Please, increase the slippage or amount and try again!");const i=t&&It.T.parseError(t);return!i||i instanceof rt.A?new kn:i}isExecutionCriticalError(t){return[Ki.A,Ui.A,rt.A,zi.A,kn].some(i=>t instanceof i)}checkIsNotLinkedAccount(t,i){return i&&i instanceof s.NoLinkedAccountError?(0,w.of)(!0):t instanceof s.SymbiosisEvmCcrTrade&&t.to.blockchain===s.BLOCKCHAIN_NAME.SEI?(0,je.H)(t.checkBlockchainRequirements()):(0,w.of)(!1)}needAuthWallet(t){return t instanceof q.CrossChainTrade&&t.needAuthWallet}catchSwapError(t,i,a){console.error(t);const o=this.parseCalculationError(t);this.isExecutionCriticalError(o)&&(i.trade instanceof q.CrossChainTrade?this.disabledTradesTypes.crossChain.push(i.trade.type):this.disabledTradesTypes.onChain.push(i.trade.type),this.swapsStateService.updateTrade({trade:null,error:o,tradeType:i.tradeType},i.trade instanceof q.CrossChainTrade?X.T.CROSS_CHAIN_ROUTING:X.T.INSTANT_TRADE,!1,!1),this.swapsStateService.pickProvider(!0)),a?.(),this.errorsService.catch(o)}subscribeOnSettings(){this.settingsService.crossChainRoutingValueChanges.pipe((0,$.Z)(this.settingsService.crossChainRoutingValue),(0,B.F)((t,i)=>t.useMevBotProtection!==i.useMevBotProtection),(0,Y.v)(this.settingsService.instantTradeValueChanges.pipe((0,$.Z)(this.settingsService.instantTradeValue),(0,B.F)((t,i)=>t.useMevBotProtection!==i.useMevBotProtection))),(0,Z.B)(10),(0,Ge.J)(),(0,se.p)(([t,i])=>!(0,A.Gq)(t,i))).subscribe(()=>{this.startRecalculation(!0)})}subscribeOnReceiverChange(){this.targetNetworkAddressService.address$.pipe((0,Y.v)(this.targetNetworkAddressService.isAddressValid$),(0,Z.B)(50)).subscribe(([t,i])=>{(""===t||t&&i)&&this.startRecalculation(!0)})}handleWs(){s.Injector.rubicApiService.handleQuotesAsync().pipe((0,W.M)(()=>this.refreshService.setRefreshing()),(0,C.T)(t=>{const{fromToken:i,toToken:a}=this.swapFormService.inputValue;return{value:t,type:i.blockchain===a.blockchain?X.T.INSTANT_TRADE:X.T.CROSS_CHAIN_ROUTING}}),(0,ue.W)(t=>(console.debug(t),(0,w.of)(null))),(0,wt.H)(t=>{const i=t?.value?.wrappedTrade,a=t.value.total===t.value.calculated;if(i&&this.swapFormService.isFilled){const o=i?.trade?.needApprove().catch(()=>!1)||(0,w.of)(!1),c=this.checkIsNotLinkedAccount(i.trade,i?.error);return this.checkIsEqualFromAmount(i.trade.from.tokenAmount)||(i.trade=null),(0,Ee.p)([(0,w.of)(i),o,(0,w.of)(t.type),c]).pipe((0,W.M)(([u,p,m,g])=>{try{g&&(this.errorsService.catch(new s.NoLinkedAccountError),u.trade=null);const f=this.needAuthWallet(u.trade);this.swapsStateService.updateTrade(u,m,p,f),this.swapsStateService.pickProvider(a),this.swapsStateService.setCalculationProgress(t.value.total,t.value.calculated),this.setTradeAmount(),a&&this.refreshService.setStopped()}catch(f){console.error(f)}})).pipe((0,ue.W)(()=>(this.swapsStateService.pickProvider(a),(0,w.of)(null))))}return a&&this.refreshService.setStopped(),t?.value&&this.swapFormService.isFilled?this.swapsStateService.setCalculationProgress(t.value.total,t.value.calculated):(this.refreshService.setStopped(),this.swapsStateService.clearProviders(!0)),t.value.tradeType&&this.swapsStateService.removeOldProvider(t.value.tradeType),(0,w.of)(null)}),(0,ue.W)(t=>(this.refreshService.setStopped(),this.swapsStateService.pickProvider(!0),(0,w.of)(null)))).subscribe()}subscribeOnSwapFormFilled(){this.swapFormService.isFilled$.pipe((0,Z.B)(400),(0,B.F)()).subscribe(t=>{t||s.Injector.rubicApiService.stopCalculation()})}checkIsEqualFromAmount(t){const i=this.swapFormService.inputValue,o=i.fromToken.decimals,c=s.Web3Pure.toWei(i.fromAmount.actualValue,o),l=s.Web3Pure.fromWei(c,o);return t.eq(l)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(N.K),e.KVO(gn),e.KVO(Cn),e.KVO(Ce),e.KVO(Rt.b),e.KVO(ae.u),e.KVO(Bt),e.KVO(ce.B),e.KVO(_e.h),e.KVO(le.P),e.KVO(at),e.KVO(Et))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Ji=d(40204),qi=d(95717);const yn=[s.BLOCKCHAIN_NAME.ETHEREUM,s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN,s.BLOCKCHAIN_NAME.POLYGON],ea={[s.BLOCKCHAIN_NAME.ETHEREUM]:"https://rubic-eth.rpc.blxrbdn.com",[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:"https://rubic-bnb.rpc.blxrbdn.com",[s.BLOCKCHAIN_NAME.POLYGON]:"https://rubic-polygon.rpc.blxrbdn.com"};var ta=d(29278),wn=d(77894),Tn=d(16123),oe=d(73955);let xe=(()=>{class n{get transactionState(){return this._transactionState$.getValue()}constructor(t,i,a,o,c,l,u,p,m,g,f,y,k,v){this.swapsStateService=t,this.swapForm=i,this.swapsControllerService=a,this.sdkService=o,this.walletConnectorService=c,this.tradePageService=l,this.airdropPointsService=u,this.recentTradesStoreService=p,this.settingsService=m,this.notificationsService=g,this.translateService=f,this.errorService=y,this.ccrApiService=k,this.spindlService=v,this._transactionState$=new L.t({step:"inactive",data:{}}),this.subscriptions$=[],this.useCallback=!1,this.transactionState$=this._transactionState$.asObservable(),this._selectedTradeState$=new L.t(null),this.selectedTradeState$=this._selectedTradeState$.asObservable(),this.tradeInfo$=(0,Ee.p)([this.swapForm.fromToken$.pipe((0,H.$)()),this.swapForm.fromAmount$.pipe((0,H.$)()),this.swapForm.toToken$.pipe((0,H.$)()),this.swapForm.toAmount$.pipe((0,H.$)())]).pipe((0,C.T)(([T,O,R,pe])=>({fromAsset:this.getTokenAsset(T),fromValue:{tokenAmount:O.actualValue,fiatAmount:O.actualValue.gt(0)&&T.price?O.actualValue.multipliedBy(T.price||0).toFixed(2):null},toAsset:this.getTokenAsset(R),toValue:{tokenAmount:pe,fiatAmount:pe.gt(0)&&R.price?pe.multipliedBy(R.price||0).toFixed(2):null}})))}getTokenAsset(t){const i=ln.i[t.blockchain];return{secondImage:i.img,secondLabel:i.name,mainImage:t.image,mainLabel:t.symbol,secondColor:dn.E[t.blockchain]}}setNextTxState(t){this._transactionState$.next(t)}requestTxSign(){var t=this;return(0,S.A)(function*(){const i=yield(0,D._)(t.selectedTradeState$);i.needAuthWallet?t.startAuthWallet():i.needApprove?t.startApprove():t.startSwap()})()}startSwap(){this.setNextTxState({step:"swapRequest",data:this.transactionState.data})}startAuthWallet(){this.setNextTxState({step:"authWalletPending",data:this.transactionState.data})}startApprove(){this.setNextTxState({step:"approvePending",data:this.transactionState.data})}activatePage(){this.resetTransactionState(),this.subscribeOnNetworkChange(),this.subscribeOnAddressChange(),this.subscribeOnValidation(),this.handleTransactionState()}deactivatePage(){this.subscriptions$.forEach(t=>t?.unsubscribe()),this.subscriptions$.length=0,this.useCallback=!1,this._selectedTradeState$.next(null)}handleTransactionState(){const t=this.transactionState$.pipe((0,se.p)(i=>"inactive"!==i.step),(0,Y.v)(this.selectedTradeState$.pipe((0,H.$)(bt.Aj))),(0,B.F)(([i,a],[o,c])=>i.step===o.step&&(0,A.Gq)(a,c)),(0,Z.B)(10),(0,I.n)(([i,a])=>"approvePending"===i.step?this.handleApprove(a):"authWalletPending"===i.step?this.handleAuthMessage(a):"swapRequest"===i.step?this.makeSwapRequest(a):(0,w.of)(null))).subscribe();this.subscriptions$.push(t)}initDstTxStatusPolling(t,i){const o=(0,St.Y)(this.swapForm.inputValue.fromBlockchain===s.BLOCKCHAIN_NAME.BITCOIN?3e5:3e4).pipe((0,$.Z)(-1),(0,I.n)(()=>this.selectedTradeState$.pipe((0,H.$)())),(0,I.n)(c=>(0,je.H)(this.sdkService.crossChainStatusManager.getCrossChainStatusExtended(c.trade.rubicId,t,c.trade.from.blockchain)).pipe((0,Ni.w)(29e3),(0,ue.W)(()=>(0,w.of)({srcTxStatus:s.TX_STATUS.SUCCESS,dstTxStatus:s.TX_STATUS.PENDING,dstTxHash:null})))),(0,W.M)(c=>{c.dstTxStatus===s.TX_STATUS.SUCCESS?this.setNextTxState({step:"success",data:{hash:c.dstTxHash,toBlockchain:i}}):c.dstTxStatus===s.TX_STATUS.FALLBACK?(this.setNextTxState(c.dstTxHash?{step:"success",data:{hash:c.dstTxHash,toBlockchain:i}}:{step:"error",data:this.transactionState.data}),this.errorService.catch(new ta.e),c.extraInfo?.mesonSwapId&&this.ccrApiService.sendMesonSwapId(c,t)):c.dstTxStatus===s.TX_STATUS.FAIL&&this.setNextTxState({step:"error",data:this.transactionState.data})}),(0,yt.v)(c=>c.dstTxStatus===s.TX_STATUS.PENDING)).subscribe();this.subscriptions$.push(o)}subscribeOnNetworkChange(){const t=this.walletConnectorService.networkChange$.subscribe(i=>this.checkNetwork(i));this.subscriptions$.push(t)}subscribeOnAddressChange(){const t=this.walletConnectorService.addressChange$.subscribe(i=>this.checkAddress(i));this.subscriptions$.push(t)}checkAddress(t=this.walletConnectorService.address){const i=this._transactionState$.getValue();i.data.activeWallet=!!t,this.setNextTxState(i)}checkNetwork(t=this.walletConnectorService.network){const a=this._selectedTradeState$.value?.trade?.from?.blockchain,o=this._transactionState$.getValue();o.data.wrongNetwork=!!a&&t!==a,this.setNextTxState(o)}loadRpcParams(t){var i=this;return(0,S.A)(function*(){const o=(yield(0,D._)(i.selectedTradeState$)).trade.from.blockchain,c=yn.some(l=>l===o);if(t&&c){const l=ea[o];try{return yield i.walletConnectorService.addChain(o,l),!0}catch{return!1}}return!0})()}setSelectedProvider(){this._selectedTradeState$.next(this.swapsStateService.tradeState)}catchSwitchCancel(){var t=this;return(0,S.A)(function*(){const i=t.translateService.instant("notifications.cancelRpcSwitch");t.notificationsService.show(i,{status:"warning",autoClose:!0,data:null,icon:"",defaultAutoCloseTime:0}),t.resetTransactionState()})()}makeSwapRequest(t){let i;return this.useCallback=!0,(0,je.H)(this.loadRpcParams(t.trade.from.blockchain===t.trade.to.blockchain?this.settingsService.instantTradeValue.useMevBotProtection:this.settingsService.crossChainRoutingValue.useMevBotProtection)).pipe((0,Z.B)(50),(0,I.n)(o=>o?this.swapsControllerService.swap(t,{onHash:c=>{this.useCallback&&(i=c,this.setNextTxState({step:"sourcePending",data:{...this.transactionState.data}}))},onSwap:()=>{this.useCallback&&(t.trade instanceof q.CrossChainTrade?(this.setNextTxState({step:"destinationPending",data:{...this.transactionState.data}}),this.initDstTxStatusPolling(i,t.trade.to.blockchain)):this.setNextTxState({step:"success",data:{hash:i,toBlockchain:t.trade.to.blockchain}}),this.spindlService.sendSwapEvent(i),this.recentTradesStoreService.updateUnreadTrades())},onError:()=>{this.useCallback&&(this.setNextTxState({step:"inactive",data:{}}),this.tradePageService.setState("form"))}}):this.catchSwitchCancel()))}handleApprove(t){return this.useCallback=!0,this.swapsControllerService.approve(t,{onSwap:()=>{this.useCallback&&this.startSwap()},onError:()=>{this.useCallback&&this.setNextTxState({step:"approveReady",data:this.transactionState.data})}})}handleAuthMessage(t){return this.useCallback=!0,this.swapsControllerService.authWallet(t,{onSwap:()=>{this.useCallback&&this.startSwap()},onError:()=>{this.useCallback&&this.setNextTxState({step:"authWalletReady",data:this.transactionState.data})}})}subscribeOnValidation(){const t=this.selectedTradeState$.pipe((0,$.Z)()).subscribe(()=>{this.checkAddress(),this.checkNetwork()});this.subscriptions$.push(t)}resetTransactionState(){this.setNextTxState({step:"idle",data:{}})}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Ce),e.KVO(N.K),e.KVO(Sn),e.KVO(Tt.K),e.KVO(ee.c),e.KVO(be.p),e.KVO(Ji.g),e.KVO(qi.C),e.KVO(_e.h),e.KVO(Tn.I),e.KVO(oe.c$),e.KVO(Rt.b),e.KVO(at),e.KVO(wn.Q))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var M=d(47097),xn=d(53252);function na(n,r){if(1&n&&(e.j41(0,"div",2),e.nrm(1,"iframe",3),e.nI1(2,"safeSanitizer"),e.k0s()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.Y8G("src",e.i5U(2,3,t.src,"resourceUrl"),e.f$h)("width",t.size.width)("height",t.size.height)}}function ia(n,r){if(1&n&&(e.qex(0),e.DNE(1,na,3,6,"div",1),e.bVm()),2&n){const t=r.ngLet;e.R7$(1),e.Y8G("ngIf",t.src)}}const aa=function(n,r){return{src:n,size:r}};let oa=(()=>{class n{get isMobile(){return this.headerStore.isMobile}constructor(t,i,a){this.headerStore=t,this.authService=i,this.previewSwapService=a,this.iframeSrc$=this.headerStore.getMobileDisplayStatus().pipe((0,Y.v)(this.authService.currentUser$),(0,C.T)(([o,c])=>c?.address?`https://e.spindlembed.com/v1/serve?publisher_id=rubic&placement_id=${this.getPlacementId(o)}&address=${c.address}`:null)),this.iframeSize$=this.headerStore.getMobileDisplayStatus().pipe((0,Y.v)(this.previewSwapService.transactionState$),(0,C.T)(([o,c])=>o||"success"===c.step?{width:300,height:250}:{width:600,height:100}))}getPlacementId(t){return t?"under_swap_mobile":"under_swap_desktop"}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(j.X),e.rXU(ae.u),e.rXU(xe))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-spindle-banner"]],decls:3,vars:8,consts:[[4,"ngLet"],["class","spindle-banner",4,"ngIf"],[1,"spindle-banner"],["title","SpindleAds",3,"src","width","height"]],template:function(i,a){1&i&&(e.DNE(0,ia,2,1,"ng-container",0),e.nI1(1,"async"),e.nI1(2,"async")),2&i&&e.Y8G("ngLet",e.l_i(5,aa,e.bMT(1,1,a.iframeSrc$),e.bMT(2,3,a.iframeSize$)))},dependencies:[_.bT,M.N,_.Jj,xn.f],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]   .spindle-banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}[_nghost-%COMP%]   .spindle-banner[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:var(--tui-radius-m)}"],changeDetection:0})}return n})(),ra=(()=>{class n{get iframeUrl(){return`https://banners.rubic.exchange/index.html/?placement=${this.isMobile?"a74ae05143":"1ea374aff0"}&isMobile=${this.isMobile}`}constructor(t){this.headerStore=t,this.isMobile=this.headerStore.isMobile}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(j.X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-hypelab-banner"]],decls:2,vars:4,consts:[["title","HypeLabAds","width","100%","height","100%",1,"banner",3,"src"]],template:function(i,a){1&i&&(e.nrm(0,"iframe",0),e.nI1(1,"safeSanitizer")),2&i&&e.Y8G("src",e.i5U(1,1,a.iframeUrl,"resourceUrl"),e.f$h)},dependencies:[xn.f],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}@media (max-width: 460px){.banner[_ngcontent-%COMP%]{height:250px}}"],changeDetection:0})}return n})();var Be=d(30569),An=d(10495),On=d(63808),Le=d(56463),sa=d(76533);let ca=(()=>{class n{constructor(){this.max=100}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-progress-bar"]],inputs:{max:"max",value:"value"},decls:1,vars:2,consts:[["tuiProgressBar","","new","","size","xs",3,"max","value"]],template:function(i,a){1&i&&e.nrm(0,"progress",0),2&i&&e.Y8G("max",a.max)("value",a.value)},dependencies:[sa.gI],changeDetection:0})}return n})();var Ae=d(13910),K=d(64035),In=d(23856),Pn=d(50317),Qe=d(32534);function la(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",3),e.nrm(2,"img",4),e.k0s(),e.j41(3,"img",5),e.bIt("error",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onTokenImageError(a))}),e.k0s(),e.j41(4,"div",6)(5,"span",7),e.EFF(6),e.k0s(),e.j41(7,"span",8),e.EFF(8),e.nrm(9,"img",9),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(1),e.xc7("background",t.visibleAsset.secondColor),e.R7$(1),e.Y8G("src",t.visibleAsset.secondImage,e.B4B)("alt",t.visibleAsset.secondLabel),e.R7$(1),e.Y8G("src",t.visibleAsset.mainImage||t.DEFAULT_TOKEN_IMAGE,e.B4B)("alt",t.visibleAsset.mainLabel),e.R7$(3),e.JRh(t.visibleAsset.secondLabel),e.R7$(2),e.SpI("",t.visibleAsset.mainLabel," ")}}function da(n,r){1&n&&e.nrm(0,"img",14)}function pa(n,r){1&n&&e.nrm(0,"img",9)}function ua(n,r){if(1&n&&(e.j41(0,"div",10)(1,"div",11),e.EFF(2),e.DNE(3,da,1,0,"img",12),e.DNE(4,pa,1,0,"img",13),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",t.emptySelectorText," "),e.R7$(1),e.Y8G("ngIf",t.isDisabled),e.R7$(1),e.Y8G("ngIf",!t.isDisabled)}}let Dt=(()=>{class n{set asset(t){this.visibleAsset=t?this.getTokenAsset(t):null,this.emptySelectorText=this.getEmptySelectorText()}constructor(t,i,a,o){this.queryParamsService=t,this.destroy$=i,this.cdr=a,this.tokenService=o,this.isDisabled=!1,this.handleAssetSelection=new e.bkB,this.visibleAsset=null,this.emptySelectorText="",this.DEFAULT_TOKEN_IMAGE=Qe.c}ngOnInit(){this.subOnHideSelectorQueryParamsChange()}subOnHideSelectorQueryParamsChange(){this.queryParamsService.tokensSelectionDisabled$.pipe((0,z.Q)(this.destroy$)).subscribe(([t,i])=>{this.isDisabled="from"===this.selectorType?t:i,this.cdr.markForCheck()})}getTokenAsset(t){const i=ln.i[t.blockchain];return{secondImage:i.img,secondLabel:i.name,mainImage:t.image,mainLabel:t.symbol,secondColor:dn.E[t.blockchain]}}handleSelection(){this.isDisabled||this.handleAssetSelection.emit()}onTokenImageError(t){this.tokenService.onTokenImageError(t)}getEmptySelectorText(){return"Select Token"}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(he.w),e.rXU(G.ew,2),e.rXU(e.gRc),e.rXU(ge.m))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-selector"]],inputs:{isDisabled:"isDisabled",selectorType:"selectorType",asset:"asset"},outputs:{handleAssetSelection:"handleAssetSelection"},features:[e.Jv_([G.ew])],decls:4,vars:2,consts:[[1,"selector",3,"click"],[4,"ngIf","ngIfElse"],["emptySelector",""],[1,"selector__second-image-container"],["width","35","height","35",1,"selector__second-image",3,"src","alt"],["width","50","height","50",1,"selector__main-image",3,"src","alt","error"],[1,"selector__labels"],[1,"selector__second-label"],[1,"selector__main-label"],["src","assets/images/icons/arrow/arrow-down-white.svg","alt","Select token"],[1,"selector__empty"],[1,"selector__empty-container"],["src","assets/images/icons/arrow/arrow-down-grey.svg","alt","Select token",4,"ngIf"],["src","assets/images/icons/arrow/arrow-down-white.svg","alt","Select token",4,"ngIf"],["src","assets/images/icons/arrow/arrow-down-grey.svg","alt","Select token"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0),e.bIt("click",function(){return a.handleSelection()}),e.DNE(1,la,10,8,"ng-container",1),e.DNE(2,ua,5,3,"ng-template",null,2,e.C5r),e.k0s()),2&i){const o=e.sdS(3);e.R7$(1),e.Y8G("ngIf",a.visibleAsset)("ngIfElse",o)}},dependencies:[_.bT],styles:['[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.selector[_ngcontent-%COMP%]{display:flex;height:50px}.selector[_ngcontent-%COMP%]:hover{cursor:pointer}.selector__second-label[_ngcontent-%COMP%]{color:var(--tui-text-03);font-weight:400;font-size:15px}.selector__main-label[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);align-items:center;color:#fff;font-weight:700;font-size:21px}.selector__labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-s);justify-content:center}.selector__main-image[_ngcontent-%COMP%]{box-sizing:content-box;margin-top:-5px;margin-left:-25px;background:var(--io-background);border:5px solid var(--io-background);border-radius:100%}.selector__second-image-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:67px;background:#627eea;border-radius:var(--tui-radius-m) 0 0 var(--tui-radius-m)}.selector__second-image[_ngcontent-%COMP%]{margin-right:22px;border-radius:100%}.selector__empty-container[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;justify-content:space-between;width:100%}.selector__empty[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:150px;height:100%;margin-right:-25px;padding-left:25px;color:#fff;font-weight:700;font-size:1rem;background:var(--tui-secondary);border-radius:var(--tui-radius-m) 0 0 var(--tui-radius-m)}.selector__empty-gas-form[_ngcontent-%COMP%]{width:200px}.selector__empty-gas-form__disabled[_ngcontent-%COMP%]{color:var(--tui-text-03)}.selector__empty[_ngcontent-%COMP%]:after{position:absolute;right:-25px;z-index:0;width:25px;height:100%;background:var(--tui-secondary);border-radius:0 50px 50px 0;content:""}@media (max-width: 651px){.selector[_ngcontent-%COMP%]{height:40px}.selector__main-image[_ngcontent-%COMP%]{width:40px;height:40px}.selector__empty-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:var(--tui-padding-s)}.selector__empty[_ngcontent-%COMP%]{justify-content:flex-start;padding-left:16px;font-weight:400;font-size:18px;border-radius:var(--tui-radius-s) 0 0 var(--tui-radius-s)}.selector__empty[_ngcontent-%COMP%]:after{right:-18px}}'],changeDetection:0})}return n})();var re=d(72782);let _a=(()=>{class n{constructor(){this.selectedRoute=new e.bkB}handleSelectedRoute(){this.selectedRoute.emit(this.route)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-alternative-route-element"]],inputs:{route:"route"},outputs:{selectedRoute:"selectedRoute"},decls:7,vars:2,consts:[[1,"element__route-container"],[1,"element__assets-container"],["left","","selectorType","from",3,"asset"],["src","assets/images/icons/arrow/arrow-right-white.svg",1,"element__assets-container_arrow-image"],["right","","selectorType","to",3,"asset"],["tuiButton","","type","button","appearance","primary","size","s",3,"click"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"app-asset-selector",2)(3,"img",3)(4,"app-asset-selector",4),e.k0s(),e.j41(5,"button",5),e.bIt("click",function(){return a.handleSelectedRoute()}),e.EFF(6," Get "),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("asset",a.route.from),e.R7$(2),e.Y8G("asset",a.route.to))},dependencies:[Dt,re.SM],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.element__route-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:62px;margin-right:10px;padding:var(--tui-padding-m);background:var(--io-background);border-radius:var(--tui-radius-s)}.element__route-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500;font-size:15px;border-radius:var(--tui-radius-s)}.element__assets-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:80%}.element__assets-container_arrow-image[_ngcontent-%COMP%]{filter:sepia(1) saturate(0) brightness(.5)}.element__assets-container[_ngcontent-%COMP%]     .selector__main-image{width:27px;height:27px;margin-top:unset;overflow:hidden}.element__assets-container[_ngcontent-%COMP%]     .selector__second-image-container{width:47px;height:27px;overflow:hidden;border-radius:10px 0 0 10px}.element__assets-container[_ngcontent-%COMP%]     .selector__second-image-container img{width:25px;height:25px}.element__assets-container[_ngcontent-%COMP%]     .selector__main-label img{display:none}.element__assets-container[_ngcontent-%COMP%]     .selector__labels{gap:unset;width:50px;margin:0;line-height:1.2}.element__assets-container[_ngcontent-%COMP%]     .selector__labels span{font-size:12px}.element__assets-container[_ngcontent-%COMP%]     .selector{align-items:center}.element__assets-container[_ngcontent-%COMP%]     .selector:hover{cursor:unset}@media (max-width: 651px){.element__route-container[_ngcontent-%COMP%]{height:55px;margin-right:0;background:transparent}.element__assets-container[_ngcontent-%COMP%]     .selector__main-image{background-color:var(--tui-secondary);border:5px solid var(--tui-secondary)}.element__assets-container_arrow-image[_ngcontent-%COMP%]{filter:unset}}"],changeDetection:0})}return n})();function ma(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-alternative-route-element",8),e.bIt("selectedRoute",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleAlternativeRouteSelection(a))}),e.k0s()}2&n&&e.Y8G("route",r.$implicit)}function ha(n,r){if(1&n&&(e.j41(0,"div",3)(1,"div",4)(2,"span"),e.EFF(3," Most likely there will be no routes available. You can use networks below for intermediate swap. "),e.k0s()(),e.nrm(4,"hr",5),e.j41(5,"div",6),e.DNE(6,ma,1,1,"app-alternative-route-element",7),e.k0s()()),2&n){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.alternativeRoutes)}}function ga(n,r){1&n&&(e.j41(0,"div",9)(1,"div",10),e.nrm(2,"app-no-result",11),e.k0s()())}let fa=(()=>{class n{handleAlternativeRouteSelection(t){this.selectedRoute.emit(t)}constructor(t){this.alternativeRouteService=t,this.selectedRoute=new e.bkB,this.routeStatus$=this.alternativeRouteService.alternativeRouteStatus$}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(et))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-alternative-routes-list"]],inputs:{alternativeRoutes:"alternativeRoutes"},outputs:{selectedRoute:"selectedRoute"},decls:4,vars:5,consts:[[3,"ngSwitch"],["class","alternative-routes-list__container",4,"ngSwitchCase"],["class","empty-list",4,"ngSwitchCase"],[1,"alternative-routes-list__container"],[1,"alternative-routes-list__title"],[1,"hr-mobile"],[1,"alternative-routes-list"],[3,"route","selectedRoute",4,"ngFor","ngForOf"],[3,"route","selectedRoute"],[1,"empty-list"],[1,"empty-list__content"],["label","No routes available","description","Please try another token combination."]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.nI1(1,"async"),e.DNE(2,ha,7,1,"div",1),e.DNE(3,ga,3,0,"div",2),e.k0s()),2&i&&(e.Y8G("ngSwitch",e.bMT(1,3,a.routeStatus$)),e.R7$(2),e.Y8G("ngSwitchCase","complete"),e.R7$(1),e.Y8G("ngSwitchCase","noroutes"))},dependencies:[_.Sq,_.ux,_.e1,Pn.q,_a,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.alternative-routes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:12px}.alternative-routes-list__title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:15px}.hr-mobile[_ngcontent-%COMP%]{display:none;height:2px}.empty-list__content[_ngcontent-%COMP%]{margin-right:10px;padding:var(--tui-padding-l);background:var(--primary-background);border-radius:var(--tui-radius-m)}@media (max-width: 651px){.alternative-routes-list[_ngcontent-%COMP%], .alternative-routes-list__title[_ngcontent-%COMP%]{gap:4px;padding:15px;background:var(--tui-secondary)}.alternative-routes-list[_ngcontent-%COMP%]{margin-top:0;border-radius:0 0 20px 20px}.alternative-routes-list__title[_ngcontent-%COMP%]{border-radius:20px 20px 0 0}.hr-mobile[_ngcontent-%COMP%]{display:block}}"],changeDetection:0})}return n})();const va=["tuiScrollBar"];function ba(n,r){1&n&&e.eu8(0)}function Ca(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-providers-list",9),e.bIt("selectTrade",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleTradeSelection(a))}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("states",t.states)("selectedTradeType",t.selectedTradeType)("calculationProgress",t.calculationStatus.calculationProgress)("isModal",!1)}}function ka(n,r){if(1&n&&(e.j41(0,"app-window-container"),e.qex(1,4),e.EFF(2,"Providers list"),e.bVm(),e.DNE(3,ba,1,0,"ng-container",5),e.j41(4,"tui-scrollbar",6,7),e.DNE(6,Ca,1,4,"app-providers-list",8),e.k0s()()),2&n){const t=e.XpG(),i=e.sdS(6),a=e.sdS(2);e.R7$(3),e.Y8G("ngTemplateOutlet",i),e.R7$(3),e.Y8G("ngIf",!t.calculationStatus.noRoutes)("ngIfElse",a)}}function Sa(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-alternative-routes-list",10),e.bIt("selectedRoute",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.handleRouteSelection(a))}),e.nI1(1,"async"),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("alternativeRoutes",e.bMT(1,1,t.alternativeRoutes$))}}function ya(n,r){1&n&&e.eu8(0)}function wa(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-providers-list",13),e.bIt("selectTrade",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleTradeSelection(a))}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("states",t.states.slice(0,1))("selectedTradeType",t.selectedTradeType)("calculationProgress",t.calculationStatus.calculationProgress)("isModal",!1)("shortedInfo",!0)}}function Ta(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",14),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.openOtherProvidersList())}),e.j41(1,"span",15),e.EFF(2,"Other Providers"),e.k0s(),e.nrm(3,"span",16),e.k0s()}2&n&&(e.R7$(3),e.Y8G("inlineSVG","assets/images/icons/arrow-down.svg"))}function xa(n,r){if(1&n&&(e.DNE(0,ya,1,0,"ng-container",5),e.DNE(1,wa,1,5,"app-providers-list",11),e.DNE(2,Ta,4,1,"div",12)),2&n){const t=e.XpG(),i=e.sdS(6),a=e.sdS(2);e.Y8G("ngTemplateOutlet",i),e.R7$(1),e.Y8G("ngIf",!t.calculationStatus.noRoutes)("ngIfElse",a),e.R7$(1),e.Y8G("ngIf",(null==t.states?null:t.states.length)>1)}}function Aa(n,r){if(1&n&&e.nrm(0,"app-progress-bar",20),2&n){const t=r.ngIf;e.Y8G("max",100)("value",t)}}function Oa(n,r){if(1&n&&(e.j41(0,"div",18)(1,"h5"),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.DNE(4,Aa,1,2,"app-progress-bar",19),e.nI1(5,"async"),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("@progress",void 0),e.R7$(2),e.JRh(e.bMT(3,3,t.calculationText$)),e.R7$(2),e.Y8G("ngIf",e.bMT(5,5,t.calculationProcess$))}}function Ia(n,r){if(1&n&&e.DNE(0,Oa,6,7,"div",17),2&n){const t=e.XpG();e.Y8G("ngIf",t.calculationStatus.activeCalculation)}}let Pa=(()=>{class n{set calculationStatus(t){this._calculationStatus=t,0===t.calculationProgress.current&&1===t.calculationProgress.total&&this._triggerCalculation$.next()}get calculationStatus(){return this._calculationStatus}constructor(t,i,a,o,c,l,u){this.injector=t,this.modalService=i,this.headerStore=a,this.swapsFormService=o,this.providerHintService=c,this.destroy$=l,this.alternativeRoutesService=u,this.states=[],this._triggerCalculation$=new L.t(null),this.ratio=100,this.calculationProcess$=this._triggerCalculation$.asObservable().pipe((0,I.n)(()=>(0,St.Y)(this.ratio)),(0,yt.v)(p=>this.isLongTimeoutChain()?p<=3e4/this.ratio:p<=15e3/this.ratio),(0,C.T)(p=>this.convertIntervalValueToPercents(p))),this.calculationText$=this.calculationProcess$.pipe((0,C.T)(p=>p<=50?"Calculating providers...":"More providers can get close, but they are delaying the answer...")),this.selectTrade=new e.bkB,this.isMobile=this.headerStore.isMobile,this.alternativeRoutes$=this.alternativeRoutesService.getAlternativeRoutes()}handleTradeSelection(t){this.selectTrade.emit(t)}handleRouteSelection(t){this.swapsFormService.inputControl.patchValue({fromBlockchain:t.from.blockchain,fromToken:t.from,toBlockchain:t.to.blockchain,toToken:t.to,fromAmount:{visibleValue:t.amount.toFixed(),actualValue:t.amount}}),this.alternativeRoutesService.setCurrentAlternativeRoute(t)}openOtherProvidersList(){this.modalService.openOtherProvidersList(this.states,this.selectedTradeType,this.calculationStatus.calculationProgress,!0,this.injector,this.calculationStatus.noRoutes).subscribe(t=>{t&&this.handleTradeSelection(t)})}convertIntervalValueToPercents(t){return this.isLongTimeoutChain()?t*(100*this.ratio/3e4):t*(100*this.ratio/15e3)}isLongTimeoutChain(){const{fromBlockchain:t,toBlockchain:i}=this.swapsFormService.inputValue;return t===i?vn.includes(t):ot.includes(t)||ot.includes(i)}ngAfterViewInit(){this.isMobile||(0,Ct.R)(this.scrollBarElement.browserScrollRef.nativeElement,"scroll").pipe((0,W.M)(()=>this.hideProviderHintOnScroll(!0)),(0,Z.B)(500),(0,z.Q)(this.destroy$)).subscribe(()=>this.hideProviderHintOnScroll(!1))}hideProviderHintOnScroll(t){this.providerHintService.setHintVisibility(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.zZn),e.rXU(ce.B),e.rXU(j.X),e.rXU(N.K),e.rXU(On.m),e.rXU(G.ew,2),e.rXU(et))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-providers-list-general"]],viewQuery:function(i,a){if(1&i&&e.GBs(va,5),2&i){let o;e.mGM(o=e.lsd())&&(a.scrollBarElement=o.first)}},inputs:{states:"states",selectedTradeType:"selectedTradeType",showCalculation:"showCalculation",calculationStatus:"calculationStatus"},outputs:{selectTrade:"selectTrade"},features:[e.Jv_([G.ew,On.m])],decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["alternativeRoutes",""],["mobileProviders",""],["waiting",""],["header",""],[4,"ngTemplateOutlet"],[1,"providers-list"],["tuiScrollBar",""],[3,"states","selectedTradeType","calculationProgress","isModal","selectTrade",4,"ngIf","ngIfElse"],[3,"states","selectedTradeType","calculationProgress","isModal","selectTrade"],[3,"alternativeRoutes","selectedRoute"],[3,"states","selectedTradeType","calculationProgress","isModal","shortedInfo","selectTrade",4,"ngIf","ngIfElse"],["class","other-providers",3,"click",4,"ngIf"],[3,"states","selectedTradeType","calculationProgress","isModal","shortedInfo","selectTrade"],[1,"other-providers",3,"click"],[1,"other-providers__text"],[1,"other-providers__arrow",3,"inlineSVG"],["class","waiting",4,"ngIf"],[1,"waiting"],[3,"max","value",4,"ngIf"],[3,"max","value"]],template:function(i,a){if(1&i&&(e.DNE(0,ka,7,3,"app-window-container",0),e.DNE(1,Sa,2,3,"ng-template",null,1,e.C5r),e.DNE(3,xa,3,4,"ng-template",null,2,e.C5r),e.DNE(5,Ia,1,1,"ng-template",null,3,e.C5r)),2&i){const o=e.sdS(4);e.Y8G("ngIf",!a.isMobile)("ngIfElse",o)}},dependencies:[_.bT,_.T3,Le.r,ca,Ae.UB,K.ll,In.S,fa,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{width:100%}h5[_ngcontent-%COMP%]{margin:0 0 var(--tui-padding-l);padding-right:10px;font-size:15px;line-height:15px}.waiting[_ngcontent-%COMP%]{margin-bottom:var(--tui-padding-m)}.providers-list[_ngcontent-%COMP%]{max-height:455px;margin-right:-10px}.other-providers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:var(--tui-padding-m);padding:var(--tui-padding-l);background:var(--io-background);border-radius:var(--tui-radius-m)}.other-providers__text[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:500;font-size:18px;line-height:18px;letter-spacing:.54px}@media (max-width: 651px){.waiting[_ngcontent-%COMP%]{padding:var(--tui-padding-m)}.providers-list[_ngcontent-%COMP%]{height:auto;margin-right:0}}"],data:{animation:[(0,b.hZ)("progress",[(0,b.kY)(":enter",[(0,b.iF)({height:"0px",opacity:0}),(0,b.i0)("0.2s ease-out",(0,b.iF)({height:"53px",opacity:1}))]),(0,b.kY)(":leave",[(0,b.iF)({height:"63px",opacity:1}),(0,b.i0)("0.2s ease-in",(0,b.iF)({height:"0px",opacity:0}))])])]},changeDetection:0})}return n})();function Ma(n,r){1&n&&e.nrm(0,"img",7)}function Na(n,r){1&n&&e.nrm(0,"span",8)}const Ea=function(n,r){return{"state__element-icon_focus":n,"state__element-icon_done":r}},Ra=function(n,r){return{"state__element-text_focus":n,"state__element-text_pending":r}};function Ba(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,Ma,1,0,"img",4),e.DNE(3,Na,1,0,"span",5),e.k0s(),e.j41(4,"div",6),e.EFF(5),e.k0s()()),2&n){const t=r.$implicit;e.R7$(1),e.Y8G("ngClass",e.l_i(5,Ea,"pending"===t.status,"fullfilled"===t.status)),e.R7$(1),e.Y8G("ngIf","fullfilled"===t.status),e.R7$(1),e.Y8G("ngIf","pending"===t.status),e.R7$(1),e.Y8G("ngClass",e.l_i(8,Ra,"fullfilled"===t.status,"pending"===t.status)),e.R7$(1),e.SpI(" ",t.value," ")}}let Mn=(()=>{class n{set state(t){this.setStepStates(t)}set transactionData(t){const i=[];this.type=t.type,t.needAuthWallet&&i.push("authWalletPending"),t.needApprove&&i.push("approvePending"),"swap"===t.type?i.push("swapRequest","sourcePending"):i.push("swapRequest","sourcePending","destinationPending"),i.push("success"),this.steps=i.map(a=>({status:"default",key:a,value:n.getLabel(a,this.type)}))}static getLabel(t,i){return{idle:"Swap",error:"Error",approveReady:"Approve",approvePending:"Manage allowance",authWalletPending:"Signing message",authWalletReady:"Wallet authorized",swapReady:"Swap",swapRequest:"Transaction Sign",sourcePending:"swap"===i?"Waiting for transaction":"Waiting for complete in source chain",destinationPending:"Waiting for complete in target chain",success:"Success swap",inactive:"Inactive"}[t]}setStepStates(t){const i=this.steps.findIndex(a=>a.key===t);this.steps=this.steps.map((a,o)=>o<i||"success"===t||"error"===t?{...a,status:"fullfilled"}:o===i?{...a,status:"pending"}:{...a,status:"default"})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-transaction-state"]],inputs:{state:"state",transactionData:"transactionData"},decls:2,vars:1,consts:[[1,"state"],["class","state__element",4,"ngFor","ngForOf"],[1,"state__element"],[1,"state__element-icon",3,"ngClass"],["src","/assets/images/icons/checkmark/checkmark-thin-white.svg","alt","",4,"ngIf"],["class","loader",4,"ngIf"],[1,"state__element-text",3,"ngClass"],["src","/assets/images/icons/checkmark/checkmark-thin-white.svg","alt",""],[1,"loader"]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.DNE(1,Ba,6,11,"div",1),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngForOf",a.steps))},dependencies:[_.YU,_.Sq,_.bT],styles:['.state[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:var(--tui-padding-l)}.state[_ngcontent-%COMP%]:before{position:absolute;top:2px;left:7.5px;width:1px;height:calc(100% - 4px);background:var(--tui-neutral-fill);opacity:.5;content:""}.state__element[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-l);align-items:center}.state__element-icon[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;width:16px;height:16px;background:var(--tui-neutral-fill);border-radius:100%}.state__element-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}.state__element-icon_focus[_ngcontent-%COMP%]{background:var(--primary-background)}.state__element-icon_done[_ngcontent-%COMP%]{background:var(--tui-success-fill)}.state__element-text[_ngcontent-%COMP%]{color:var(--tui-text-03)}.state__element-text_focus[_ngcontent-%COMP%], .state__element-text_done[_ngcontent-%COMP%]{color:var(--tui-text-01)}.loader[_ngcontent-%COMP%]{display:inline-block;box-sizing:border-box;width:12px;height:12px;border:1px solid #fff;border-bottom-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})}return n})();var Gt=d(55879);function Nn(n){return n.type===s.CROSS_CHAIN_TRADE_TYPE.ARBITRUM&&n.from.blockchain===s.BLOCKCHAIN_NAME.ARBITRUM&&n.to.blockchain===s.BLOCKCHAIN_NAME.ETHEREUM}let Vt=(()=>{class n{constructor(t,i){this.tokensStoreService=t,this.platformConfigurationService=i}getFeeInfo(t){const i=this.tokensStoreService.getNativeToken(t.from.blockchain);return{fee:t.feeInfo,nativeToken:i}}getProviderInfo(t){const i=Gt.r[t],o=this.platformConfigurationService.providersAverageTime?.[t];return{...i,averageTime:o||5|i?.averageTime}}getGasData(t){const i=t.getTradeInfo().estimatedGas;if(!("gasData"in t)&&!("gasFeeInfo"in t)||!i)return null;const a=t.from.blockchain,o=s.nativeTokensList[a],c=this.tokensStoreService.tokens.find(u=>(0,A._f)(u,{blockchain:a,address:o.address})).price;if(i){const u=s.Web3Pure.fromWei(i,o.decimals);return{amount:u,amountInUsd:u.multipliedBy(c),symbol:o.symbol}}let l=null;return t instanceof s.EvmCrossChainTrade?l=this.getCcrGasFee(t,o):(t instanceof s.EvmOnChainTrade||t instanceof s.TonOnChainTrade)&&(l=this.getOnChainGasFee(t,o)),!l||l.lte(0)?null:{amount:l,amountInUsd:l.multipliedBy(c),symbol:o.symbol}}getCcrGasFee(t,i){const a=t.gasData;if(!a)return null;let o=null;return"totalGas"in a?o=a.totalGas:"gasPrice"in a&&a.gasPrice.gt(0)?o=a.gasLimit?.multipliedBy(a.gasPrice):"maxFeePerGas"in a&&a.maxFeePerGas.gt(0)&&(o=a.gasLimit?.multipliedBy(a.maxFeePerGas||0)),o?s.Web3Pure.fromWei(o,i.decimals):null}getOnChainGasFee(t,i){const a=t.gasFeeInfo;if(!a)return null;if(a.totalGas)return s.Web3Pure.fromWei(a.totalGas,i.decimals);if(!a.gasLimit)return null;let o=null;return"gasPrice"in a&&a.gasPrice.gt(0)?o=a.gasLimit.multipliedBy(a.gasPrice):"maxFeePerGas"in a&&a.maxFeePerGas.gt(0)&&(o=a.gasLimit.multipliedBy(a.maxFeePerGas)),s.Web3Pure.fromWei(o,i.decimals)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(J.p),e.KVO(Re.p))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var En=d(13711);function La(n,r){1&n&&e.eu8(0)}function $a(n,r){if(1&n&&(e.j41(0,"app-rubic-button",3),e.DNE(1,La,1,0,"ng-container",4),e.k0s()),2&n){e.XpG();const t=e.sdS(3);e.R7$(1),e.Y8G("ngTemplateOutlet",t)}}function Fa(n,r){1&n&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.k0s())}let Ht=(()=>{class n{constructor(){this.onClick=new e.bkB}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-back-button"]],inputs:{isMobile:"isMobile"},outputs:{onClick:"onClick"},decls:4,vars:2,consts:[[1,"back-button",3,"click"],["appearance","secondary","size","s",4,"ngIf","ngIfElse"],["image",""],["appearance","secondary","size","s"],[4,"ngTemplateOutlet"],[1,"back-button__container"],["inlineSVG","assets/images/icons/chevron.svg",1,"back-button__arrow"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0),e.bIt("click",function(){return a.onClick.emit()}),e.DNE(1,$a,2,1,"app-rubic-button",1),e.DNE(2,Fa,2,0,"ng-template",null,2,e.C5r),e.k0s()),2&i){const o=e.sdS(3);e.R7$(1),e.Y8G("ngIf",a.isMobile)("ngIfElse",o)}},dependencies:[_.bT,_.T3,K.ll,En.l],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.back-button[_ngcontent-%COMP%]   app-rubic-button[_ngcontent-%COMP%]     button{border-radius:15px}.back-button__container[_ngcontent-%COMP%]{position:relative;width:16px;height:16px}.back-button__arrow[_ngcontent-%COMP%]{position:absolute;top:-12px;left:-12px;width:38px;height:38px;padding:12px;transform:rotate(90deg)}.back-button__arrow[_ngcontent-%COMP%]     svg{width:100%;height:100%}.back-button__arrow[_ngcontent-%COMP%]     svg path{fill:var(--tui-text-01)}.back-button[_ngcontent-%COMP%]     .t-wrapper[data-appearance=secondary]{background:transparent!important}"],changeDetection:0})}return n})();var ve=d(40920),Se=d(62826),h=d(44819);function Da(n,r){1&n&&(e.j41(0,"div"),e.EFF(1,"< 0.01 $"),e.k0s())}function Ga(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.SpI(" ",e.brH(2,1,e.bMT(3,5,t.gasInfo.amountInUsd),6,2)," $ ")}}function Va(n,r){if(1&n&&(e.j41(0,"div",8),e.nrm(1,"img",9),e.DNE(2,Da,2,0,"div",10),e.DNE(3,Ga,4,7,"div",10),e.k0s()),2&n){const t=e.XpG(),i=e.sdS(12);e.Y8G("tuiHint",i)("tuiHintAppearance",t.hintAppearance)("tuiHintDirection",t.hintDirection)("tuiHintHideDelay",t.hideHint?0:200),e.R7$(2),e.Y8G("ngIf",t.gasInfo.amountInUsd.lt(.01)),e.R7$(1),e.Y8G("ngIf",t.gasInfo.amountInUsd.gt(.01))}}function Ha(n,r){if(1&n&&(e.j41(0,"div",8),e.nrm(1,"img",11),e.EFF(2),e.k0s()),2&n){const t=e.XpG(),i=e.sdS(8);e.Y8G("tuiHint",i)("tuiHintAppearance",t.hintAppearance)("tuiHintDirection",t.hintDirection)("tuiHintHideDelay",t.hideHint?0:200),e.R7$(2),e.SpI(" ",t.displayAmount," ")}}function ja(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Lme(" Protocol Fee: ",e.brH(2,2,e.bMT(3,6,t.feeInfo.rubicProxy.fixedFee.amount),8,8)," ",t.feeInfo.rubicProxy.fixedFee.token.symbol," ")}}function Ya(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Lme(" Provider Fee: ",e.brH(2,2,e.bMT(3,6,t.feeInfo.provider.cryptoFee.amount),8,8)," ",t.feeInfo.provider.cryptoFee.token.symbol," ")}}function Ka(n,r){if(1&n&&(e.DNE(0,ja,4,8,"div",10),e.DNE(1,Ya,4,8,"div",10)),2&n){const t=e.XpG();e.Y8G("ngIf",null==t.feeInfo||null==t.feeInfo.rubicProxy||null==t.feeInfo.rubicProxy.fixedFee?null:t.feeInfo.rubicProxy.fixedFee.amount.gt(t.minAmountToShowProtocolFee)),e.R7$(1),e.Y8G("ngIf",null==t.feeInfo||null==t.feeInfo.provider||null==t.feeInfo.provider.cryptoFee?null:t.feeInfo.provider.cryptoFee.amount.gt(0))}}function Ua(n,r){1&n&&e.EFF(0,"Estimated arriving time")}function Xa(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.nI1(4,"shortenAmount"),e.nI1(5,"bigNumberFormat"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.E5c(" ",e.ii3(2,3,e.brH(3,8,t.gasInfo.amount,20,!1),20,10,!1)," ",t.gasInfo.symbol," ~ ",e.ii3(4,12,e.brH(5,17,t.gasInfo.amountInUsd,20,!1),20,10,!1)," $ ")}}function Wa(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.nI1(4,"shortenAmount"),e.nI1(5,"bigNumberFormat"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.E5c(" ",e.brH(2,3,e.bMT(3,7,t.gasInfo.amount),8,8)," ",t.gasInfo.symbol," ~ ",e.brH(4,9,e.bMT(5,13,t.gasInfo.amountInUsd),8,8)," $ ")}}function za(n,r){if(1&n&&(e.j41(0,"div")(1,"span"),e.EFF(2," Estimated Gas: "),e.k0s(),e.nrm(3,"br"),e.DNE(4,Xa,6,21,"span",10),e.DNE(5,Wa,6,15,"span",10),e.k0s()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.gasInfo.amountInUsd.lt(.01)),e.R7$(1),e.Y8G("ngIf",t.gasInfo.amountInUsd.gt(.01))}}let Rn=(()=>{class n{constructor(){this.minAmountToShowProtocolFee=new E.A(5e-7),this.hintAppearance="",this.hintDirection="bottom-right",this.hideHint=!1}set feeInfoChange(t){this.feeInfo=t.fee;const i=new E.A(0).plus(t?.fee?.rubicProxy?.fixedFee?.amount||0).plus(t?.fee?.provider?.cryptoFee?.amount||0);if(t?.nativeToken?.price&&i.gt(0)){const a=i.multipliedBy(t.nativeToken.price);this.displayAmount=a.gt(.001)?`~ $${a.toFixed(2)}`:null}else if(t.nativeToken?.symbol&&i.gt(0)){const a=new ve.p,o=new Se.W;this.displayAmount=`${o.transform(a.transform(i),6,4)} ${t.nativeToken.symbol}`}else this.displayAmount=null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-swap-data-element"]],inputs:{hintAppearance:"hintAppearance",hintDirection:"hintDirection",feeInfoChange:"feeInfoChange",gasInfo:"gasInfo",time:"time",hideHint:"hideHint"},decls:13,vars:7,consts:[[1,"provider-info"],["class","provider-info__element",3,"tuiHint","tuiHintAppearance","tuiHintDirection","tuiHintHideDelay",4,"ngIf"],[1,"provider-info__element","time",3,"tuiHint","tuiHintAppearance","tuiHintDirection","tuiHintHideDelay"],["src","assets/images/icons/time.svg","alt","Time for transaction"],[1,""],["feeData",""],["timeTooltip",""],["gasTooltip",""],[1,"provider-info__element",3,"tuiHint","tuiHintAppearance","tuiHintDirection","tuiHintHideDelay"],["src","assets/images/icons/gas.svg","alt","Gas Price"],[4,"ngIf"],["src","assets/images/icons/money.svg","alt","Fee"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0),e.DNE(1,Va,4,6,"div",1),e.DNE(2,Ha,3,5,"div",1),e.j41(3,"div",2),e.nrm(4,"img",3),e.j41(5,"div",4),e.EFF(6),e.k0s()()(),e.DNE(7,Ka,2,2,"ng-template",null,5,e.C5r),e.DNE(9,Ua,1,0,"ng-template",null,6,e.C5r),e.DNE(11,za,6,2,"ng-template",null,7,e.C5r)),2&i){const o=e.sdS(10);e.R7$(1),e.Y8G("ngIf",null==a.gasInfo||null==a.gasInfo.amountInUsd?null:a.gasInfo.amountInUsd.gt(0)),e.R7$(1),e.Y8G("ngIf",a.displayAmount),e.R7$(1),e.Y8G("tuiHint",o)("tuiHintAppearance",a.hintAppearance)("tuiHintDirection",a.hintDirection)("tuiHintHideDelay",a.hideHint?0:200),e.R7$(3),e.JRh(a.time)}},dependencies:[_.bT,h.XZ,h.ZF,h.JL,h.AZ,ve.p,Se.W],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.provider-info[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-l);justify-content:space-between;padding:var(--tui-padding-l)}.provider-info__element[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center;cursor:pointer}.provider-info__element[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:.75rem}.provider-info__element.time[_ngcontent-%COMP%]{margin-left:auto}"],changeDetection:0})}return n})();const Qa={protocolFee:{label:"Protocol fee",description:"Rubic protocol commission fee"},networkFee:{label:"Network fee",description:"Provider fee to proceed swap in target network"},priceImpact:{label:"Price impact",description:"Correlation between an incoming order and the change in the price of the asset involved caused by the trade"},slippage:{label:"Slippage",description:"Your transaction will be canceled if the price changes unfavorably by more than the entered percentage (a lower percentage decreases the chances of your transaction being front-run)"},rate:{label:"Rate",description:""},route:{label:"Route",description:""},receiver:{label:"Receiver address",description:"Address to send assets"},minReceived:{label:"Minimum Received",description:"Minimum amount of tokens you will receive in target blockchain. Depends on slippage"}};var jt=d(83801);function Za(n,r){if(1&n&&e.nrm(0,"img",5),2&n){const t=e.XpG();e.Y8G("alt",t.title)("tuiHint",t.description)}}const Ja=["*"];let Bn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-transaction-details-element"]],inputs:{title:"title",description:"description"},ngContentSelectors:Ja,decls:7,vars:2,consts:[[1,"details-element"],[1,"details-element__text"],["class","details-element__text-icon","src","assets/images/icons/hint.svg",3,"alt","tuiHint",4,"ngIf"],[1,"details-element__text-title"],[1,"details-element__value"],["src","assets/images/icons/hint.svg",1,"details-element__text-icon",3,"alt","tuiHint"]],template:function(i,a){1&i&&(e.NAR(),e.j41(0,"div",0)(1,"div",1),e.DNE(2,Za,1,2,"img",2),e.j41(3,"span",3),e.EFF(4),e.k0s()(),e.j41(5,"div",4),e.SdG(6),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("ngIf",a.description),e.R7$(2),e.JRh(a.title))},dependencies:[_.bT,h.XZ,h.ZF,h.JL,h.AZ],styles:[".details-element[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center;width:100%;overflow:hidden}.details-element__text[_ngcontent-%COMP%]{display:flex;align-items:center}.details-element__text-title[_ngcontent-%COMP%]{white-space:nowrap}.details-element__text-icon[_ngcontent-%COMP%]{width:.75rem;height:.75rem;margin-right:var(--tui-padding-s)}.details-element__value[_ngcontent-%COMP%]{margin-left:auto;white-space:nowrap}"],changeDetection:0})}return n})();var Yt=d(3349);let qa=(()=>{class n{transform(t){return isNaN(t)||(0,A.gD)(t)?"unknown":t<.01?"<0.01%":`${t}%`}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"priceImpactFormat",type:n,pure:!0})}return n})(),eo=(()=>{class n{transform(t,i=2){const a=new E.A(t);return a.isFinite()?String(Number(a.toFixed(i))):"Unknown"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"slippageFormat",type:n,pure:!0})}return n})();const to=function(n){return[n]};function no(n,r){if(1&n&&(e.qex(0),e.j41(1,"span",6),e.EFF(2),e.nI1(3,"priceImpactFormat"),e.k0s(),e.bVm()),2&n){const t=r.ngLet,i=e.XpG().ngLet;e.R7$(1),e.Y8G("ngClass",e.eq3(4,to,t)),e.R7$(1),e.SpI(" ",e.bMT(3,2,null==i.details?null:i.details.priceImpact)," ")}}function io(n,r){if(1&n&&(e.j41(0,"app-transaction-details-element",3),e.EFF(1),e.nI1(2,"slippageFormat"),e.k0s()),2&n){const t=e.XpG().ngLet,i=e.XpG();e.Y8G("title",i.text.slippage.label)("description",i.text.slippage.description),e.R7$(1),e.SpI(" ",e.bMT(2,3,t.details.slippage)," % ")}}function ao(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"shortenAmount"),e.nI1(3,"bigNumberFormat"),e.bVm()),2&n){const t=r.ngIf;e.R7$(1),e.JRh(e.brH(2,1,e.bMT(3,5,t),10,8))}}function oo(n,r){if(1&n&&(e.j41(0,"app-transaction-details-element",3),e.DNE(1,ao,4,7,"ng-container",7),e.k0s()),2&n){const t=r.ngIf,i=e.XpG(2);e.Y8G("title",i.text.minReceived.label)("description",i.text.minReceived.description),e.R7$(1),e.Y8G("ngIf",(null==t?null:t.tokenAmount)||t)}}function ro(n,r){if(1&n&&(e.j41(0,"a",12),e.nI1(1,"scannerLink"),e.nrm(2,"img",13),e.nI1(3,"translate"),e.k0s()),2&n){const t=e.XpG(2).ngLet,i=e.XpG();e.Y8G("safetyLink",e.brH(1,2,t.wallet,t.trade.to.blockchain,i.ADDRESS_TYPE.WALLET)),e.R7$(2),e.Y8G("alt",e.bMT(3,6,"common.checkOnScanner"))}}function so(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-transaction-details-element",3)(1,"div",8),e.EFF(2),e.nI1(3,"shortAddress"),e.DNE(4,ro,4,8,"a",9),e.j41(5,"button",10),e.bIt("cdkCopyToClipboardCopied",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.copyToClipboard())}),e.nrm(6,"div",11),e.k0s()()()}if(2&n){const t=e.XpG().ngLet,i=e.XpG();e.Y8G("title",i.text.receiver.label)("description",i.text.receiver.description),e.R7$(2),e.SpI(" ",e.brH(3,6,t.wallet,5,5)," "),e.R7$(2),e.Y8G("ngIf",null==t.trade?null:t.trade.to),e.R7$(1),e.Y8G("cdkCopyToClipboard",t.wallet),e.R7$(1),e.Y8G("inlineSVG",i.isWalletCopied?"assets/images/swaps/swaps-info/tick.svg":"assets/images/swaps/swaps-info/copy-icon.svg")}}function co(n,r){if(1&n&&(e.j41(0,"div",1)(1,"h5",2),e.EFF(2,"Transaction details"),e.k0s(),e.j41(3,"app-transaction-details-element",3),e.DNE(4,no,4,6,"ng-container",4),e.nI1(5,"async"),e.k0s(),e.DNE(6,io,3,5,"app-transaction-details-element",5),e.DNE(7,oo,2,3,"app-transaction-details-element",5),e.DNE(8,so,7,10,"app-transaction-details-element",5),e.k0s()),2&n){const t=r.ngLet,i=e.XpG();e.R7$(3),e.Y8G("title",i.text.priceImpact.label)("description",i.text.priceImpact.description),e.R7$(1),e.Y8G("ngLet",e.bMT(5,6,i.priceImpactCssClass$)),e.R7$(2),e.Y8G("ngIf",null==t.details?null:t.details.slippage),e.R7$(1),e.Y8G("ngIf",null==t.trade?null:t.trade.toTokenAmountMin),e.R7$(1),e.Y8G("ngIf",t.wallet)}}const lo=function(n,r,t){return{details:n,trade:r,wallet:t}};let po=(()=>{class n{constructor(t,i,a,o,c){this.swapsStateService=t,this.walletConnector=i,this.targetAddressService=a,this.settingsService=o,this.cdr=c,this.text=Qa,this.trade$=this.swapsStateService.currentTrade$.pipe((0,H.$)()),this.details$=this.trade$.pipe((0,C.T)(l=>l.getTradeInfo())),this.priceImpactCssClass$=this.details$.pipe((0,C.T)(l=>this.getPriceImpactCssClass(l.priceImpact)),(0,B.F)(),(0,$.Z)("")),this.walletAddress=this.getWalletAddress(),this.isWalletCopied=!1,this.ADDRESS_TYPE=ze.A}copyToClipboard(){this.isWalletCopied=!0,setTimeout(()=>{this.isWalletCopied=!1,this.cdr.markForCheck()},700)}getPriceImpactCssClass(t){return isNaN(t)||(0,A.gD)(t)||t>=.01&&t<10?"":t<.01?"transaction-details__priceImpact-low":t>=10&&t<20?"transaction-details__priceImpact-medium":"transaction-details__priceImpact-high"}getWalletAddress(){return(this.swapsStateService.currentTrade.trade instanceof s.OnChainTrade?this.settingsService.instantTradeValue:this.settingsService.crossChainRoutingValue).showReceiverAddress&&this.targetAddressService.address&&"WRAPPED"!==this.swapsStateService.currentTrade.tradeType?this.targetAddressService.address:this.walletConnector.address}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ce),e.rXU(ee.c),e.rXU(le.P),e.rXU(_e.h),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-transaction-details"]],decls:3,vars:9,consts:[["class","transaction-details",4,"ngLet"],[1,"transaction-details"],[1,"transaction-details__label"],[3,"title","description"],[4,"ngLet"],[3,"title","description",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],[1,"receiver-container"],[3,"safetyLink",4,"ngIf"],[3,"cdkCopyToClipboard","cdkCopyToClipboardCopied"],[1,"image",3,"inlineSVG"],[3,"safetyLink"],["src","assets/images/icons/scanner.svg",1,"image",3,"alt"]],template:function(i,a){1&i&&(e.DNE(0,co,9,8,"div",0),e.nI1(1,"async"),e.nI1(2,"async")),2&i&&e.Y8G("ngLet",e.sMw(5,lo,e.bMT(1,1,a.details$),e.bMT(2,3,a.trade$),a.walletAddress))},dependencies:[_.YU,_.bT,st.A,M.N,K.ll,jt.dF,Bn,_.Jj,ve.p,ct.n,oe.D9,Yt.b,Se.W,qa,eo],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.transaction-details[_ngcontent-%COMP%]{padding:var(--tui-padding-l);background:var(--primary-background);border-radius:var(--tui-radius-m)}.transaction-details__label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:var(--tui-padding-l);font-size:15px;text-align:center}.transaction-details__priceImpact-low[_ngcontent-%COMP%]{color:var(--tui-success-fill)}.transaction-details__priceImpact-medium[_ngcontent-%COMP%]{color:var(--tui-warning-fill)}.transaction-details__priceImpact-high[_ngcontent-%COMP%]{color:var(--tui-error-fill)}.image[_ngcontent-%COMP%]{width:13px;height:13px}.image[_ngcontent-%COMP%]     svg{width:100%;height:100%}.receiver-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);align-items:center}.receiver-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex}@media (max-width: 651px){.transaction-details__label[_ngcontent-%COMP%]{font-size:18px}}"],changeDetection:0})}return n})();var uo=d(17565),_o=d(71617);function mo(n,r){1&n&&e.nrm(0,"img",10)}function ho(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.DNE(2,mo,1,0,"img",9),e.k0s()),2&n){const t=r.$implicit,i=r.index,a=e.XpG().$implicit;e.R7$(1),e.SpI(" ",t," "),e.R7$(1),e.Y8G("ngIf",i!==a.amounts.length-1)}}function go(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3),e.nrm(2,"img",4),e.j41(3,"div",5)(4,"div",6),e.EFF(5),e.k0s(),e.j41(6,"div",7),e.DNE(7,ho,3,2,"div",8),e.k0s()()()()),2&n){const t=r.$implicit;e.R7$(2),e.Y8G("src",t.provider.image,e.B4B)("alt",t.provider.label),e.R7$(3),e.JRh(t.provider.label),e.R7$(2),e.Y8G("ngForOf",t.amounts)}}let Ln=(()=>{class n{constructor(){this.steps=[]}set routes(t){this.steps=this.getSteps(t)}getSteps(t){return t.map(i=>{if("on-chain"===i.type){const l=_o.j[i.provider]||this.getUnknownDex();return{provider:{label:`Swap Via ${l.name}`,image:l.image},amounts:i.path.map(u=>u.symbol)}}const a=uo.X[i.provider],o=new ve.p,c=new Se.W;return{provider:{label:`Bridge Via ${a.name}`,image:a.image},amounts:i.path.map(l=>`${"tokenAmount"in l&&l.tokenAmount.gt(0)?c.transform(o.transform(l.tokenAmount),8,6)+" ":""}${l.symbol}`)}})}getUnknownDex(){return{name:"Unknown dex",color:"white",image:"assets/images/icons/unknown.svg"}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-route-element"]],inputs:{tradeType:"tradeType",routes:"routes"},decls:2,vars:1,consts:[[1,"route-element"],["class","route-element__provider-row",4,"ngFor","ngForOf"],[1,"route-element__provider-row"],[1,"route-element__provider-data-info"],[1,"route-element__provider-icon",3,"src","alt"],[1,"element__provider-data"],[1,"route-element__provider-name"],[1,"route-element__provider-rate"],[4,"ngFor","ngForOf"],["src","assets/images/icons/arrow/arrow-right.svg","alt","",4,"ngIf"],["src","assets/images/icons/arrow/arrow-right.svg","alt",""]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.DNE(1,go,8,4,"div",1),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngForOf",a.steps))},dependencies:[_.Sq,_.bT],styles:[".route-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.route-element__provider-data-info[_ngcontent-%COMP%]{display:flex}.route-element__provider-icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:var(--tui-padding-s);border-radius:50%}.route-element__provider-rate[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);color:var(--tui-text-03);font-size:12px}.route-element__provider-rate[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);align-items:center}.route-element__provider-rate[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:10px}.route-element__provider-name[_ngcontent-%COMP%]{color:var(--tui-text-01);font-size:15px}"],changeDetection:0})}return n})(),fo=(()=>{class n{constructor(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-success-swap-info"]],decls:3,vars:0,consts:[[1,"info"],[1,"info__title"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2,"Yahoo!"),e.k0s()())},styles:[".info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-l);padding:var(--tui-padding-l);text-align:center;background:url(/assets/images/success-bg.svg);background-size:cover}.info__title[_ngcontent-%COMP%]{color:var(--tui-positive);font-weight:500;font-size:21px}.highlight_green[_ngcontent-%COMP%]{color:var(--tui-primary);cursor:pointer}"],changeDetection:0})}return n})();var lt=d(38821),$n=d(77489);function vo(n,r){if(1&n&&(e.j41(0,"tui-notification",2)(1,"div",3)(2,"strong"),e.EFF(3,"MEV bot protection"),e.k0s()(),e.j41(4,"div",4),e.EFF(5," Use private RPC to protect your trades "),e.j41(6,"form",5),e.nrm(7,"tui-toggle",6),e.k0s()()()),2&n){const t=e.XpG().ngLet;e.Y8G("status",t.value.useMevBotProtection?"success":"warning")("tuiHint","You can turn on the MEV-bot protection, this will ensure better security of your trade.")("tuiHintManual",!t.value.useMevBotProtection),e.R7$(6),e.Y8G("formGroup",t)}}function bo(n,r){if(1&n&&(e.qex(0),e.DNE(1,vo,8,4,"tui-notification",1),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.displayMev)}}let Co=(()=>{class n{set trade(t){const a=t?.from.price.multipliedBy(t?.from.tokenAmount);this._routingForm$.next(t?.from.blockchain!==t?.to.blockchain?this.settingsService.crossChainRouting:this.settingsService.instantTrade),this.displayMev=!!a&&a.gte(1e3)&&!this.headerStore.isMobile,this.displayMev||this.settings.patchValue({useMevBotProtection:!1})}get settings(){return this._routingForm$.getValue()}constructor(t,i,a,o){this.settingsService=t,this.destroy$=i,this.modalService=a,this.headerStore=o,this._routingForm$=new L.t(this.settingsService.crossChainRouting),this.routingForm$=this._routingForm$.asObservable(),this.displayMev=!1,this.subscribeOnRoutingForm()}subscribeOnRoutingForm(){this.routingForm$.pipe((0,I.n)(t=>t.valueChanges),(0,$.Z)(this.settingsService.crossChainRouting.value),(0,B.F)(),(0,Ge.J)(),(0,z.Q)(this.destroy$)).subscribe(([t,i])=>{t.useMevBotProtection!==i.useMevBotProtection&&i.useMevBotProtection&&this.modalService.openMevBotModal().subscribe()})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(_e.h),e.rXU(G.ew),e.rXU(ce.B),e.rXU(j.X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-mev-bot"]],inputs:{trade:"trade"},features:[e.Jv_([G.ew])],decls:2,vars:3,consts:[[4,"ngLet"],["class","mev-bot","tuiHintDirection","right",3,"status","tuiHint","tuiHintManual",4,"ngIf"],["tuiHintDirection","right",1,"mev-bot",3,"status","tuiHint","tuiHintManual"],[1,"tui-text_body-l-2"],[1,"mev-bot__row"],[1,"settings__form",3,"formGroup"],["id","useMevBotProtection","formControlName","useMevBotProtection",1,"mev-bot__toggle"]],template:function(i,a){1&i&&(e.DNE(0,bo,2,1,"ng-container",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.routingForm$))},dependencies:[_.bT,M.N,F.qT,F.BC,F.cb,F.j4,F.JD,h.XZ,h.ZF,h.JL,h.Hg,h.AZ,$n.sJ,lt.v,_.Jj],styles:['.mev-bot[_ngcontent-%COMP%]{z-index:0;transition:.2s ease-in-out}.mev-bot__row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mev-bot[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;background:url(/assets/images/mev-pattern.png);background-size:cover;opacity:.5;content:""}'],changeDetection:0})}return n})();function ko(n,r){1&n&&(e.qex(0),e.EFF(1,"Preview Swap"),e.bVm())}function So(n,r){1&n&&(e.qex(0),e.EFF(1,"Success Swap"),e.bVm())}function yo(n,r){1&n&&(e.qex(0),e.EFF(1," Swap "),e.bVm())}function wo(n,r){if(1&n&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&n){const t=r.ngIf;e.R7$(1),e.SpI(" ~ $",t,"\xa0-\xa0 ")}}const dt=function(n){return{background:n}};function To(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",20)(2,"div",21)(3,"div",22),e.nrm(4,"img",23),e.k0s(),e.j41(5,"img",24),e.bIt("error",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onImageError(a))}),e.k0s()(),e.j41(6,"div",25)(7,"div",26),e.EFF(8),e.nI1(9,"shortenAmount"),e.nI1(10,"bigNumberFormat"),e.k0s(),e.DNE(11,wo,2,1,"div",27),e.j41(12,"div",28),e.EFF(13),e.k0s()()(),e.bVm()}if(2&n){const t=e.XpG().ngLet;e.R7$(3),e.Aen(e.eq3(16,dt,t.tradeInfo.fromAsset.secondColor)),e.R7$(1),e.Y8G("src",t.tradeInfo.fromAsset.secondImage,e.B4B)("alt",t.tradeInfo.fromAsset.secondImage),e.R7$(1),e.Y8G("src",t.tradeInfo.fromAsset.mainImage,e.B4B)("alt",t.tradeInfo.fromAsset.mainLabel),e.R7$(3),e.Lme(" ",e.brH(9,10,e.bMT(10,14,t.tradeInfo.fromValue.tokenAmount),8,6),"\xa0",t.tradeInfo.fromAsset.mainLabel," "),e.R7$(3),e.Y8G("ngIf",t.tradeInfo.fromValue.fiatAmount),e.R7$(2),e.SpI(" on ",t.tradeInfo.fromAsset.secondLabel," ")}}function xo(n,r){if(1&n&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&n){const t=r.ngIf;e.R7$(1),e.SpI(" ~ $",t,"\xa0-\xa0 ")}}function Ao(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"div",30)(2,"div",21)(3,"div",22),e.nrm(4,"img",23),e.k0s(),e.j41(5,"img",24),e.bIt("error",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onImageError(a))}),e.k0s()(),e.j41(6,"div",26),e.EFF(7),e.nI1(8,"shortenAmount"),e.nI1(9,"bigNumberFormat"),e.k0s()(),e.j41(10,"div",31),e.DNE(11,xo,2,1,"div",27),e.j41(12,"div",28),e.EFF(13),e.k0s()()()}if(2&n){const t=e.XpG().ngLet;e.R7$(3),e.Aen(e.eq3(16,dt,t.tradeInfo.fromAsset.secondColor)),e.R7$(1),e.Y8G("src",t.tradeInfo.fromAsset.secondImage,e.B4B)("alt",t.tradeInfo.fromAsset.secondImage),e.R7$(1),e.Y8G("src",t.tradeInfo.fromAsset.mainImage,e.B4B)("alt",t.tradeInfo.fromAsset.mainLabel),e.R7$(2),e.Lme(" ",e.brH(8,10,e.bMT(9,14,t.tradeInfo.fromValue.tokenAmount),8,6),"\xa0",t.tradeInfo.fromAsset.mainLabel," "),e.R7$(4),e.Y8G("ngIf",t.tradeInfo.fromValue.fiatAmount),e.R7$(2),e.SpI(" on ",t.tradeInfo.fromAsset.secondLabel," ")}}const Oo=function(){return[]};function Io(n,r){if(1&n&&e.nrm(0,"app-route-element",32),2&n){const t=e.XpG().ngLet;e.Y8G("routes",(null==t.tradeState?null:t.tradeState.routes)||e.lJ4(2,Oo))("tradeType",t.tradeState.tradeType)}}const Po=function(n,r,t){return{type:n,needApprove:r,needAuthWallet:t}};function Mo(n,r){if(1&n&&e.nrm(0,"app-transaction-state",33),2&n){const t=e.XpG().ngLet;e.Y8G("transactionData",e.sMw(2,Po,t.tradeInfo.fromAsset.secondLabel===t.tradeInfo.toAsset.secondLabel?"swap":"bridge",null==t.tradeState?null:t.tradeState.needApprove,t.tradeState.needAuthWallet))("state",t.transaction.step)}}function No(n,r){if(1&n&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&n){const t=r.ngIf;e.R7$(1),e.SpI(" ~ $",t,"\xa0-\xa0 ")}}function Eo(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",20)(2,"div",21)(3,"div",22),e.nrm(4,"img",23),e.k0s(),e.j41(5,"img",24),e.bIt("error",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onImageError(a))}),e.k0s()(),e.j41(6,"div",25)(7,"div",26),e.EFF(8),e.nI1(9,"shortenAmount"),e.nI1(10,"bigNumberFormat"),e.k0s(),e.DNE(11,No,2,1,"div",27),e.j41(12,"div",28),e.EFF(13),e.k0s()()(),e.bVm()}if(2&n){const t=e.XpG().ngLet;e.R7$(3),e.Aen(e.eq3(16,dt,t.tradeInfo.toAsset.secondColor)),e.R7$(1),e.Y8G("src",t.tradeInfo.toAsset.secondImage,e.B4B)("alt",t.tradeInfo.toAsset.secondImage),e.R7$(1),e.Y8G("src",t.tradeInfo.toAsset.mainImage,e.B4B)("alt",t.tradeInfo.toAsset.mainLabel),e.R7$(3),e.Lme(" ",e.brH(9,10,e.bMT(10,14,t.tradeInfo.toValue.tokenAmount),8,6),"\xa0",t.tradeInfo.toAsset.mainLabel," "),e.R7$(3),e.Y8G("ngIf",t.tradeInfo.toValue.fiatAmount),e.R7$(2),e.SpI("on ",t.tradeInfo.toAsset.secondLabel,"")}}function Ro(n,r){if(1&n&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&n){const t=r.ngIf;e.R7$(1),e.SpI(" ~ $",t,"\xa0-\xa0 ")}}function Bo(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"div",30)(2,"div",21)(3,"div",22),e.nrm(4,"img",23),e.k0s(),e.j41(5,"img",24),e.bIt("error",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onImageError(a))}),e.k0s()(),e.j41(6,"div",26),e.EFF(7),e.nI1(8,"shortenAmount"),e.nI1(9,"bigNumberFormat"),e.k0s()(),e.j41(10,"div",31),e.DNE(11,Ro,2,1,"div",27),e.j41(12,"div",28),e.EFF(13),e.k0s()()()}if(2&n){const t=e.XpG().ngLet;e.R7$(3),e.Aen(e.eq3(16,dt,t.tradeInfo.toAsset.secondColor)),e.R7$(1),e.Y8G("src",t.tradeInfo.toAsset.secondImage,e.B4B)("alt",t.tradeInfo.toAsset.secondImage),e.R7$(1),e.Y8G("src",t.tradeInfo.toAsset.mainImage,e.B4B)("alt",t.tradeInfo.toAsset.mainLabel),e.R7$(2),e.Lme(" ",e.brH(8,10,e.bMT(9,14,t.tradeInfo.toValue.tokenAmount),8,6),"\xa0",t.tradeInfo.toAsset.mainLabel," "),e.R7$(4),e.Y8G("ngIf",t.tradeInfo.toValue.fiatAmount),e.R7$(2),e.SpI(" on ",t.tradeInfo.toAsset.secondLabel," ")}}const Lo=function(n,r){return{fee:n,nativeToken:r}};function $o(n,r){if(1&n&&(e.j41(0,"div",34),e.nrm(1,"app-swap-data-element",35),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG().ngLet,i=e.XpG();e.R7$(1),e.Y8G("gasInfo",i.getGasData(null==t||null==t.tradeState?null:t.tradeState.trade))("feeInfoChange",e.l_i(5,Lo,(null==t.tradeState?null:t.tradeState.feeInfo)||null,e.bMT(2,3,i.nativeToken$)))("time",i.getAverageTime(null==t?null:t.tradeState))}}function Fo(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"a",37),e.nI1(2,"scannerLink"),e.EFF(3," Explorer "),e.k0s(),e.j41(4,"button",38),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.navigateToHistory())}),e.EFF(5," See Details > "),e.k0s()()}if(2&n){const t=e.XpG().ngLet,i=e.XpG();e.R7$(1),e.Y8G("safetyLink",e.brH(2,1,t.transaction.data.hash,t.transaction.data.toBlockchain,i.ADDRESS_TYPE.TRANSACTION))}}function Do(n,r){1&n&&(e.j41(0,"div",39),e.nrm(1,"app-transaction-details"),e.k0s())}function Go(n,r){1&n&&(e.j41(0,"div",40),e.nrm(1,"app-success-swap-info"),e.k0s())}function Vo(n,r){if(1&n&&e.nrm(0,"app-mev-bot",41),2&n){const t=e.XpG().ngLet;e.Y8G("trade",null==t.tradeState?null:t.tradeState.trade)}}function Ho(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){const o=e.eBV(t).ngLet;return e.Njj(null==o?null:o.action())}),e.EFF(1),e.k0s()}if(2&n){const t=r.ngLet;e.Y8G("disabled",null==t?null:t.disabled),e.R7$(1),e.SpI(" ",null==t?null:t.label," ")}}function jo(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.navigateToHistory())}),e.EFF(1," See Details > "),e.k0s()}}const Yo=function(n){return{"preview__data-container_with-line":n}};function Ko(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-window-container"),e.qex(1,1),e.j41(2,"app-back-button",2),e.bIt("onClick",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.backToForm())}),e.k0s(),e.j41(3,"span",3),e.DNE(4,ko,2,0,"ng-container",4),e.DNE(5,So,2,0,"ng-container",4),e.DNE(6,yo,2,0,"ng-container",4),e.k0s(),e.bVm(),e.qex(7),e.j41(8,"div",5)(9,"div",6),e.DNE(10,To,14,18,"ng-container",7),e.nI1(11,"async"),e.DNE(12,Ao,14,18,"ng-template",null,8,e.C5r),e.DNE(14,Io,1,3,"app-route-element",9),e.DNE(15,Mo,1,6,"app-transaction-state",10),e.DNE(16,Eo,14,18,"ng-container",7),e.nI1(17,"async"),e.DNE(18,Bo,14,18,"ng-template",null,11,e.C5r),e.k0s(),e.DNE(20,$o,3,8,"div",12),e.DNE(21,Fo,6,5,"div",13),e.DNE(22,Do,2,0,"div",14),e.DNE(23,Go,2,0,"div",15),e.k0s(),e.DNE(24,Vo,1,1,"app-mev-bot",16),e.nI1(25,"async"),e.j41(26,"div",17),e.DNE(27,Ho,2,2,"button",18),e.nI1(28,"async"),e.DNE(29,jo,2,0,"button",19),e.k0s(),e.bVm(),e.k0s()}if(2&n){const t=r.ngLet,i=e.sdS(13),a=e.sdS(19),o=e.XpG();e.R7$(2),e.Y8G("isMobile",!1),e.R7$(2),e.Y8G("ngIf","idle"===t.transaction.step),e.R7$(1),e.Y8G("ngIf","success"===t.transaction.step),e.R7$(1),e.Y8G("ngIf","idle"!==t.transaction.step&&"success"!==t.transaction.step),e.R7$(3),e.Y8G("ngClass",e.eq3(26,Yo,"idle"===t.transaction.step)),e.R7$(1),e.Y8G("ngIf",!1===e.bMT(11,18,o.isMobile$))("ngIfElse",i),e.R7$(4),e.Y8G("ngIf","idle"===t.transaction.step),e.R7$(1),e.Y8G("ngIf","idle"!==t.transaction.step&&"success"!==t.transaction.step),e.R7$(1),e.Y8G("ngIf",!1===e.bMT(17,20,o.isMobile$))("ngIfElse",a),e.R7$(4),e.Y8G("ngIf","success"!==t.transaction.step),e.R7$(1),e.Y8G("ngIf","success"===t.transaction.step),e.R7$(1),e.Y8G("ngIf","success"!==t.transaction.step),e.R7$(1),e.Y8G("ngIf","success"===t.transaction.step),e.R7$(1),e.Y8G("ngIf",e.bMT(25,22,"success"!==t.transaction.step&&o.isMevBotProtectedChains$)),e.R7$(3),e.Y8G("ngLet",e.bMT(28,24,o.buttonState$)),e.R7$(2),e.Y8G("ngIf","destinationPending"===t.transaction.step)}}const Uo=function(n,r,t){return{tradeInfo:n,tradeState:r,transaction:t}};let Xo=(()=>{class n{constructor(t,i,a,o,c,l,u,p,m,g,f,y,k,v,T){this.tradePageService=t,this.previewSwapService=i,this.router=a,this.swapsFormService=o,this.walletConnector=c,this.modalService=l,this.injector=u,this.tokensService=p,this.headerStore=m,this.platformConfigurationService=g,this.tokensStoreService=f,this.authService=y,this.gtmService=k,this.swapsStateService=v,this.tradeInfoManager=T,this.SWAP_PROVIDER_TYPE=X.T,this.tradeInfo$=this.previewSwapService.tradeInfo$,this.nativeToken$=this.swapsFormService.nativeToken$,this.isMevBotProtectedChains$=this.swapsFormService.fromBlockchain$.pipe((0,C.T)(O=>yn.some(R=>R===O))),this.tradeState$=this.previewSwapService.selectedTradeState$.pipe((0,H.$)(bt.Aj),(0,C.T)(O=>{const R=O.trade.getTradeInfo();return{...O,feeInfo:R?.feeInfo}})),this.transactionState$=this.previewSwapService.transactionState$,this.buttonState$=this.transactionState$.pipe((0,Y.v)(this.tradeState$.pipe((0,H.$)()),this.swapsStateService.notEnoughBalance$),(0,I.n)(O=>this.getState(...O)),(0,$.Z)({action:()=>{},label:"Select Tokens",disabled:!0})),this.isMobile$=this.headerStore.getMobileDisplayStatus(),this.ADDRESS_TYPE=ze.A,this.previewSwapService.setSelectedProvider(),this.previewSwapService.activatePage()}backToForm(){this.tradePageService.setState("form"),this.previewSwapService.setNextTxState({step:"inactive",data:{}})}startTrade(){var t=this;return(0,S.A)(function*(){yield t.previewSwapService.requestTxSign()})()}swap(){var t=this;return(0,S.A)(function*(){t.previewSwapService.startSwap()})()}approve(){var t=this;return(0,S.A)(function*(){yield t.previewSwapService.startApprove()})()}authWallet(){this.previewSwapService.startAuthWallet()}navigateToHistory(){var t=this;return(0,S.A)(function*(){const a=(yield(0,D._)(t.tradeState$)).trade instanceof q.CrossChainTrade;yield t.router.navigate(["/history"],{queryParamsHandling:"preserve",state:{type:a?"cross-chain":"on-chain"}})})()}logoutAndChangeWallet(){this.authService.disconnectWallet(),this.gtmService.fireClickOnConnectWalletButtonEvent(),this.modalService.openWalletModal(this.injector).subscribe()}switchChain(){var t=this;return(0,S.A)(function*(){const i=t.swapsFormService.inputValue.fromBlockchain;(yield t.walletConnector.switchChain(i))&&(yield t.previewSwapService.requestTxSign())})()}isTradeWithPermit2Approve(t){return t.trade instanceof s.EvmOnChainTrade&&t.trade.permit2ApproveConfig.usePermit2Approve}connectWallet(){this.modalService.openWalletModal(this.injector).pipe((0,I.n)(()=>(0,Ee.p)([this.walletConnector.addressChange$,this.swapsStateService.notEnoughBalance$])),(0,I.n)(([t,i])=>t&&!i?this.previewSwapService.requestTxSign():(0,w.of)(null))).subscribe()}getAverageTime(t){if(t?.tradeType){if(Nn(t.trade))return"7 D";const i=Gt.r[t.tradeType],o=this.platformConfigurationService.providersAverageTime?.[t.tradeType];return o?`${o} M`:`${i.averageTime} M`}return t instanceof q.CrossChainTrade?"30 M":"3 M"}getGasData(t){return this.tradeInfoManager.getGasData(t)}getState(t,i,a){var o=this;return(0,S.A)(function*(){const c=o.swapsFormService.inputValue.fromBlockchain!==o.swapsFormService.inputValue.toBlockchain,l=o.swapsFormService.inputValue.fromBlockchain,u=s.BlockchainsInfo.getChainType(l),p={action:()=>{},label:Mn.getLabel(t.step,c?"bridge":"swap"),disabled:!0};if("approveReady"===t.step?(p.disabled=!1,p.label=o.isTradeWithPermit2Approve(i)?"Approve and Permit":p.label,p.action=o.approve.bind(o)):"swapReady"===t.step?(p.disabled=!1,p.action=o.swap.bind(o)):"idle"===t.step?(p.disabled=!1,p.action=o.startTrade.bind(o)):"success"===t.step||"destinationPending"===t.step?(p.disabled=!1,p.label="Done",p.action=o.backToForm.bind(o)):"authWalletReady"===t.step&&(p.disabled=!1,p.action=o.authWallet.bind(o)),(t.data.wrongNetwork&&!s.BlockchainsInfo.isEvmBlockchainName(l)&&"success"!==t.step||u!==o.walletConnector.chainType)&&(p.disabled=!1,p.action=()=>o.logoutAndChangeWallet(),p.label="Change Wallet"),t.data?.wrongNetwork&&("approvePending"===t.step||"approveReady"===t.step||"swapRequest"===t.step||"swapReady"===t.step||"idle"===t.step)&&s.BlockchainsInfo.isEvmBlockchainName(l)&&u===o.walletConnector.chainType&&(p.disabled=!1,p.action=()=>o.switchChain(),p.label="Change network"),!1===t.data?.activeWallet&&(p.disabled=!1,p.action=()=>o.connectWallet(),p.label="Connect wallet"),i?.error&&(p.disabled=!0,p.action=()=>{},p.label=i.error.message),a&&"success"!==t.step&&"destinationPending"!==t.step&&(p.disabled=!0,p.action=()=>{},p.label="Insufficient funds"),("idle"===t.step||"swapReady"===t.step)&&!c&&i?.trade?.type===s.ON_CHAIN_TRADE_TYPE.WRAPPED){const f=(0,A.Qb)(o.swapsFormService.inputValue.fromToken.address,s.nativeTokensList[l].address);p.label=f?"Wrap":"Unwrap"}return p})()}ngOnDestroy(){this.previewSwapService.deactivatePage()}onImageError(t){this.tokensService.onTokenImageError(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(be.p),e.rXU(xe),e.rXU(De.Ix),e.rXU(N.K),e.rXU(ee.c),e.rXU(ce.B),e.rXU(e.zZn),e.rXU(ge.m),e.rXU(j.X),e.rXU(Re.p),e.rXU(J.p),e.rXU(ae.u),e.rXU(tt.A),e.rXU(Ce),e.rXU(Vt))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-preview-swap"]],decls:4,vars:11,consts:[[4,"ngLet"],["header",""],[3,"isMobile","onClick"],[1,"back-button__text"],[4,"ngIf"],[1,"preview"],[1,"preview__data-container",3,"ngClass"],[4,"ngIf","ngIfElse"],["mobileInputTokenContainer",""],[3,"routes","tradeType",4,"ngIf"],[3,"transactionData","state",4,"ngIf"],["mobileOutputTokenContainer",""],["class","preview__swap-info",4,"ngIf"],["class","preview__buttons",4,"ngIf"],["class","preview__transaction-details",4,"ngIf"],["class","preview__success-info",4,"ngIf"],[3,"trade",4,"ngIf"],[1,"preview__action-container"],["class","preview__action-button","tuiButton","","appearance","primary","type","button","size","m",3,"disabled","click",4,"ngLet"],["tuiButton","","appearance","primary","type","button","size","m",3,"click",4,"ngIf"],[1,"preview__io-container"],[1,"preview__token-container"],[1,"preview__second-image-container"],[3,"src","alt"],[1,"preview__main-image",3,"src","alt","error"],[1,"preview__amount-container"],[1,"preview__token-amount"],["class","preview__fiat-amount",4,"ngIf"],[1,"preview__token-info"],[1,"preview__fiat-amount"],[1,"preview__token-and-amount-container"],[1,"preview__fiat-container"],[3,"routes","tradeType"],[3,"transactionData","state"],[1,"preview__swap-info"],[3,"gasInfo","feeInfoChange","time"],[1,"preview__buttons"],["tuiButton","","appearance","primary","type","button","size","m",3,"safetyLink"],["tuiButton","","appearance","primary","type","button","size","m",3,"click"],[1,"preview__transaction-details"],[1,"preview__success-info"],[3,"trade"],["tuiButton","","appearance","primary","type","button","size","m",1,"preview__action-button",3,"disabled","click"]],template:function(i,a){1&i&&(e.DNE(0,Ko,30,28,"app-window-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async")),2&i&&e.Y8G("ngLet",e.sMw(7,Uo,e.bMT(1,1,a.tradeInfo$),e.bMT(2,3,a.tradeState$),e.bMT(3,5,a.transactionState$)))},dependencies:[_.YU,_.bT,st.A,M.N,Ht,Le.r,re.SM,Rn,po,Ln,Mn,fo,Co,_.Jj,ve.p,ct.n,Se.W],styles:['[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-m);margin-bottom:var(--tui-padding-m)}.preview__buttons[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-m)}.preview__buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;text-decoration:none}.preview__data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-s);padding:var(--tui-padding-l);background:var(--primary-background);border-radius:var(--tui-radius-m)}.preview__data-container[_ngcontent-%COMP%]   app-route-element[_ngcontent-%COMP%]{margin-left:var(--tui-padding-l)}.preview__data-container[_ngcontent-%COMP%]   app-route-element[_ngcontent-%COMP%]     .route-element__provider-data-info{align-items:center}.preview__io-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center}.preview__token-container[_ngcontent-%COMP%]{display:flex;height:30px}.preview__second-image-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:45px;height:100%;overflow:hidden;border-radius:var(--tui-radius-s) 0 0 var(--tui-radius-s)}.preview__second-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:100%;height:25px;margin-left:3px}.preview__main-image[_ngcontent-%COMP%]{width:30px;margin-left:-15px;background:var(--primary-background);border-radius:100%;outline:2px solid var(--primary-background)}.preview__amount-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.preview__amount-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{line-height:1rem}.preview__token-amount[_ngcontent-%COMP%]{width:100%;font-weight:500}.preview__fiat-amount[_ngcontent-%COMP%], .preview__token-info[_ngcontent-%COMP%]{color:var(--tui-text-03)}.preview__action-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center}.preview__action-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:1;width:100%}.preview__action-button[_ngcontent-%COMP%]{width:100%}.preview__success-info[_ngcontent-%COMP%]{overflow:hidden;background:var(--primary-background);border-radius:var(--tui-radius-m)}app-swap-data-element[_ngcontent-%COMP%]     .provider-info{padding:var(--tui-padding-l);background:var(--primary-background);border-radius:var(--tui-radius-m)}@media (max-width: 651px){app-route-element[_ngcontent-%COMP%]{z-index:1}app-route-element[_ngcontent-%COMP%]     .route-element{gap:var(--tui-padding-xl)}app-route-element[_ngcontent-%COMP%]     .route-element__provider-icon{background:var(--io-background)}app-transaction-state[_ngcontent-%COMP%]{margin:var(--tui-padding-s) var(--tui-padding-l) var(--tui-padding-l) var(--tui-padding-l)}.preview__data-container[_ngcontent-%COMP%]{position:relative;gap:0;margin-top:2px}.preview__data-container_with-line[_ngcontent-%COMP%]{gap:24px}.preview__data-container_with-line[_ngcontent-%COMP%]:before{position:absolute;top:16px;left:27px;z-index:0;width:2px;height:calc(100% - 70px);background:var(--tui-base-04);content:""}.preview__data-container[_ngcontent-%COMP%]   app-route-element[_ngcontent-%COMP%]{margin-left:0}.preview__io-container[_ngcontent-%COMP%]{z-index:1;display:flex;flex-direction:column;gap:var(--tui-padding-xs);align-items:flex-start}.preview__token-and-amount-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center}.preview__fiat-container[_ngcontent-%COMP%]{display:flex;margin-left:63px}.preview__token-container[_ngcontent-%COMP%]{height:25px}.preview__token-amount[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:500;font-size:18px;line-height:18px;letter-spacing:.54px}.preview__main-image[_ngcontent-%COMP%]{width:25px}}app-mev-bot[_ngcontent-%COMP%]{display:block;margin-bottom:var(--tui-padding-m)}'],changeDetection:0})}return n})();var Fn=d(19968);const Wo=[[["","left",""]],[["","right",""]]],zo=function(n,r,t,i,a){return{"io-container_round-top":n,"io-container_round-bottom":r,"io-container_round-all":t,"io-container_round-none":i,"io-container_margin-top":a}},Qo=["[left]","[right]"];let Dn=(()=>{class n{constructor(){this.round="all"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-output-container"]],inputs:{round:"round",marginTop:"marginTop"},ngContentSelectors:Qo,decls:5,vars:7,consts:[[1,"io-container",3,"ngClass"],[1,"io-left"],[1,"io-right"]],template:function(i,a){1&i&&(e.NAR(Wo),e.j41(0,"div",0)(1,"div",1),e.SdG(2),e.k0s(),e.j41(3,"div",2),e.SdG(4,1),e.k0s()()),2&i&&e.Y8G("ngClass",e.s1E(1,zo,"top"===a.round,"bottom"===a.round,"all"===a.round,"none"===a.round,a.marginTop))},dependencies:[_.YU],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.io-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-m);justify-content:center;padding:var(--tui-padding-l);background:var(--io-background);border-radius:var(--tui-radius-m);transition:.2s ease-in-out}.io-container_round-top[_ngcontent-%COMP%]{padding-bottom:var(--tui-padding-s);border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.io-container_round-bottom[_ngcontent-%COMP%]{padding-top:var(--tui-padding-s);border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.io-container_round-all[_ngcontent-%COMP%]{border-radius:var(--tui-radius-s)}.io-container_round-none[_ngcontent-%COMP%]{padding-top:var(--tui-padding-s);border-radius:0}.io-left[_ngcontent-%COMP%], .io-right[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center}@media (max-width: 651px){.io-container[_ngcontent-%COMP%]{flex-direction:column;gap:0;justify-content:flex-start}.io-container_round-none[_ngcontent-%COMP%], .io-container_round-bottom[_ngcontent-%COMP%]{padding-top:var(--tui-padding-xl)}.io-container_margin-top[_ngcontent-%COMP%]{margin-top:2px}.io-left[_ngcontent-%COMP%]{margin-bottom:var(--tui-padding-m)}.io-right[_ngcontent-%COMP%]{flex:none;align-items:flex-start;height:60px}}"],changeDetection:0})}return n})();var Gn=d(44455);let Vn=(()=>{class n{set amountValue(t){("input"!==this.inputMode||t?.actualValue&&t?.actualValue.gt(0))&&this.updateAmountValue(t)}updateAmountValue(t){let i=t?.actualValue?t.visibleValue:"";if("input"!==this.inputMode){const a=new Se.W;i=t?.actualValue?a.transform(t?.visibleValue,12,6,!0):"",i=Gn.B.transformValue(i,this.selectedToken?.decimals)}this.amount.setValue(i,{emitViewToModelChange:!1})}get formattedAmount(){return this.amount?.value.split(",").join("")}constructor(t,i){this.translateService=t,this.swapFormService=i,this.inputPlaceholder$=this.translateService.get("errors.noEnteredAmount"),this.outputPlaceholder="",this.amount=new F.MJ(""),this.defaultDecimals=18,this.amountUpdated=new e.bkB}handleAmountChange(t){"output"!==this.inputMode&&(this.amount.setValue(t,{emitViewToModelChange:!1}),this.amountUpdated.emit({visibleValue:t,actualValue:new E.A(this.formattedAmount)}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(oe.c$),e.rXU(N.K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-amount-transput"]],inputs:{selectedToken:"selectedToken",formType:"formType",inputMode:"inputMode",amountValue:"amountValue"},outputs:{amountUpdated:"amountUpdated"},decls:3,vars:6,consts:[[1,"amount-transput"],["appTokenAmount","","autocomplete","off","name","token-amount","inputmode","decimal","id","token-amount-input-element",1,"amount-transput__input",3,"placeholder","formControl","decimals","readonly","amountChange"]],template:function(i,a){1&i&&(e.j41(0,"label",0)(1,"input",1),e.bIt("amountChange",function(c){return a.handleAmountChange(c)}),e.nI1(2,"async"),e.k0s()()),2&i&&(e.R7$(1),e.Y8G("placeholder","output"!==a.inputMode?e.bMT(2,4,a.inputPlaceholder$):a.outputPlaceholder)("formControl",a.amount)("decimals",(null==a.selectedToken?null:a.selectedToken.decimals)||a.defaultDecimals)("readonly","output"===a.inputMode))},dependencies:[F.me,F.BC,F.l_,Gn.B,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.amount-transput[_ngcontent-%COMP%]{width:100%;height:35px}.amount-transput[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{letter-spacing:.6px}.amount-transput__input[_ngcontent-%COMP%]{width:100%;height:21px;padding:0;color:var(--tui-text-01);font-weight:400;font-size:21px;letter-spacing:.1em;text-align:right;background-color:transparent;border:none}.amount-transput__input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--tui-text-03)}@media (max-width: 651px){.amount-transput__input[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:500;font-size:25px;line-height:35px;letter-spacing:.25px;text-align:left}.amount-transput__input[_ngcontent-%COMP%]::placeholder{color:var(--tui-text-03);font-weight:500;font-size:18px;line-height:18px;letter-spacing:.54px}}"],changeDetection:0})}return n})();function Zo(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",1),e.bIt("click",function(){const o=e.eBV(t).ngIf;return e.Njj(o.action())}),e.EFF(2),e.k0s(),e.bVm()}if(2&n){const t=r.ngIf;e.R7$(1),e.Y8G("disabled","error"===t.type),e.R7$(1),e.SpI(" ",t.text," ")}}let Jo=(()=>{class n{constructor(t){this.actionButtonService=t,this.buttonState$=this.actionButtonService.buttonState$}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(kt))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-action-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tuiButton","","appearance","primary","type","button","size","m",3,"disabled","click"]],template:function(i,a){1&i&&(e.DNE(0,Zo,3,2,"ng-container",0),e.nI1(1,"async")),2&i&&e.Y8G("ngIf",e.bMT(1,1,a.buttonState$))},dependencies:[_.bT,re.SM,_.Jj],styles:["button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return n})();const qo=function(n){return{network:n}};function er(n,r){if(1&n&&(e.EFF(0),e.nI1(1,"translate"),e.nI1(2,"async")),2&n){const t=e.XpG();e.SpI(" ",e.i5U(1,1,"crossChainPage.targetAddress.hint",e.eq3(6,qo,e.bMT(2,4,t.toBlockchain$))),"\n")}}let tr=(()=>{class n{constructor(t){this.swapFormService=t,this.handleClick=new e.bkB,this.toBlockchain$=this.swapFormService.toBlockchain$}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(N.K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-receiver-address-button"]],outputs:{handleClick:"handleClick"},decls:4,vars:1,consts:[["tuiIconButton","","appearance","secondary","type","button","size","m",3,"tuiHint","click"],["inlineSVG","/assets/images/icons/wallet-change.svg",1,"image"],["hint",""]],template:function(i,a){if(1&i&&(e.j41(0,"button",0),e.bIt("click",function(){return a.handleClick.emit()}),e.nrm(1,"div",1),e.k0s(),e.DNE(2,er,3,8,"ng-template",null,2,e.C5r)),2&i){const o=e.sdS(3);e.Y8G("tuiHint",o)}},dependencies:[K.ll,re.SM,h.XZ,h.ZF,h.JL,h.AZ,_.Jj,oe.D9],styles:["[_nghost-%COMP%]{--tui-secondary: var(--tui-base-01);--tui-secondary-hover: var(--tui-secondary);--tui-secondary-active: #2c2d36}[_nghost-%COMP%]     .image{display:flex;align-items:center;justify-content:center;width:24px;height:24px}[_nghost-%COMP%]     .image svg{width:100%;height:100%}"],changeDetection:0})}return n})();var pt=d(398),Hn=d(28437);const nr=function(){return{decimals:6}};function ir(n,r){if(1&n){const t=e.RV6();e.j41(0,"span",5),e.EFF(1,"Balance: "),e.j41(2,"span",6),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.isMobile?a.maxButtonClickEvent.emit():null)}),e.EFF(3),e.nI1(4,"withRound"),e.nI1(5,"bigNumberFormat"),e.k0s()()}if(2&n){const t=e.XpG(2).ngLet;e.R7$(3),e.SpI(" ",e.brH(4,1,e.bMT(5,5,null==t?null:t.amount),"fixedValue",e.lJ4(7,nr))," ")}}function ar(n,r){if(1&n){const t=e.RV6();e.j41(0,"tui-tag",7),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.maxButtonClickEvent.emit())}),e.k0s()}}function or(n,r){if(1&n&&(e.qex(0),e.DNE(1,ir,6,8,"span",3),e.DNE(2,ar,1,0,"tui-tag",4),e.bVm()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf","balance"!==t.hide),e.R7$(1),e.Y8G("ngIf","maxButton"!==t.hide)}}function rr(n,r){if(1&n&&(e.j41(0,"div",1),e.DNE(1,or,3,2,"ng-container",2),e.k0s()),2&n){const t=r.ngLet;e.R7$(1),e.Y8G("ngIf",null==t||null==t.amount?null:t.amount.gt(0))}}let sr=(()=>{class n{constructor(t,i,a,o,c){this.headerStore=t,this.tokensStoreService=i,this.swapsFormService=a,this.previewSwapService=o,this.walletConnectorService=c,this._triggerRefresh$=new L.t(null),this.token$=this.swapsFormService.fromToken$.pipe((0,Y.v)(this._triggerRefresh$.pipe((0,$.Z)()),this.tokensStoreService.tokens$),(0,se.p)(()=>!!this.tokensStoreService.tokens),(0,B.F)((l,u)=>JSON.stringify(l)===JSON.stringify(u)),(0,C.T)(([l])=>this.tokensStoreService.tokens.find(u=>(0,A._f)(l,u)))),this.maxButtonClickEvent=new e.bkB,this.isMobile=this.headerStore.isMobile,this.tokensStoreService.tokens$.pipe((0,Y.v)(this.previewSwapService.transactionState$),(0,B.F)(),(0,Z.B)(20),(0,se.p)(([l,u])=>"success"===u.step||"inactive"===u.step),(0,W.M)(([,l])=>{"success"===l.step&&(this.tokensStoreService.startBalanceCalculating(this.swapsFormService.inputValue.fromBlockchain),this._triggerRefresh$.next(null))})).subscribe(),this.walletConnectorService.addressChange$.subscribe(()=>{this.tokensStoreService.startBalanceCalculating(this.swapsFormService.inputValue.fromBlockchain)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(j.X),e.rXU(J.p),e.rXU(N.K),e.rXU(xe),e.rXU(ee.c))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-user-balance-container"]],inputs:{hide:"hide"},outputs:{maxButtonClickEvent:"maxButtonClickEvent"},decls:2,vars:3,consts:[["class","user-balance-container",4,"ngLet"],[1,"user-balance-container"],[4,"ngIf"],["class","user-balance-container__balance",4,"ngIf"],["size","s","status","custom","value","MAX","class","user-balance-container__max-button",3,"click",4,"ngIf"],[1,"user-balance-container__balance"],[1,"user-balance-container__balance_amount",3,"click"],["size","s","status","custom","value","MAX",1,"user-balance-container__max-button",3,"click"]],template:function(i,a){1&i&&(e.DNE(0,rr,2,1,"div",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.token$))},dependencies:[_.bT,M.N,pt.ud,_.Jj,ve.p,Hn.l],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.user-balance-container[_ngcontent-%COMP%]{display:flex;align-items:center}.user-balance-container__balance[_ngcontent-%COMP%]{margin-right:var(--tui-padding-xs);color:var(--tui-text-03);font-size:15px;line-height:15px}.user-balance-container__max-button[_ngcontent-%COMP%]{margin-top:-2px;background:linear-gradient(90deg,#209e62 0%,#0fa4ad 91.5%);transition:.2s ease-in-out}.user-balance-container__max-button[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#1c8c56 0%,#0d868c 91.5%)}.user-balance-container__max-button_disabled[_ngcontent-%COMP%]{color:var(--secondary-text);cursor:default}@media (max-width: 651px){[_nghost-%COMP%]{width:100%}.user-balance-container[_ngcontent-%COMP%]{justify-content:space-between;width:100%}}"],changeDetection:0})}return n})();function cr(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",1),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onClick())}),e.j41(1,"div",2),e.nrm(2,"img",3)(3,"img",3),e.k0s()()}if(2&n){const t=e.XpG();e.AVh("disabled",t.disabled),e.Y8G("disabled",t.disabled)}}let jn=(()=>{class n{constructor(t,i){this.queryParamsService=t,this.cdr=i,this.switcherClick=new e.bkB,this.showTokenSwitcher$=this.queryParamsService.queryParams$.pipe((0,C.T)(a=>!a.hideTokenSwitcher)),this.disabled=!1}onClick(){this.disabled=!0,this.switcherClick.emit(),setTimeout(()=>{this.disabled=!1,this.cdr.markForCheck()},2e3)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(he.w),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-switcher"]],outputs:{switcherClick:"switcherClick"},decls:2,vars:3,consts:[["class","switcher",3,"disabled","click",4,"ngIf"],[1,"switcher",3,"disabled","click"],[1,"switcher__img-container"],["src","assets/images/icons/chevron.svg","alt","Switch swaps"]],template:function(i,a){1&i&&(e.DNE(0,cr,4,3,"button",0),e.nI1(1,"async")),2&i&&e.Y8G("ngIf",e.bMT(1,1,a.showTokenSwitcher$))},dependencies:[_.bT,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.switcher[_ngcontent-%COMP%]{z-index:999;display:flex;flex-direction:column;gap:2px;align-items:center;justify-content:center;box-sizing:content-box;width:32px;height:32px;padding:0;background-color:var(--io-background);border:2px solid var(--secondary-background);border-radius:50%;transform:translateY(-50%);cursor:pointer;transition:.2s ease-in-out}.switcher__img-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;align-items:center;justify-content:center;transition:.2s ease-in-out}.switcher[_ngcontent-%COMP%]:hover{background-color:var(--secondary-background)}.switcher[_ngcontent-%COMP%]:hover   .switcher__img-container[_ngcontent-%COMP%]{rotate:180deg}.switcher[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:first-child{transform:rotate(180deg)}.disabled[_ngcontent-%COMP%]{cursor:default;opacity:.7}"],changeDetection:0})}return n})();var Q=d(45387),ye=d(72180);function lr(n,r){1&n&&e.nrm(0,"div",6),2&n&&e.Y8G("inlineSVG","assets/images/icons/forms/success-input.svg")}function dr(n,r){1&n&&e.nrm(0,"div",6),2&n&&e.Y8G("inlineSVG","assets/images/icons/forms/error-input.svg")}let pr=(()=>{class n{constructor(t,i,a){this.targetNetworkAddressService=t,this.swapFormService=i,this.queryParamsService=a,this.address=this.targetNetworkAddressService.addressControl,this.toBlockchain$=this.swapFormService.toBlockchain$,this.isActiveInput=!1,this.isIntegratorWidget=this.queryParamsService.hideBranding&&this.queryParamsService.useLargeIframe}onFocusChange(t){this.isActiveInput=t||!!this.address.value}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(le.P),e.rXU(N.K),e.rXU(he.w))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-target-network-address"]],features:[e.Jv_([G.ew])],decls:9,vars:8,consts:[[1,"network-container"],["tuiTextfieldSize","l",3,"tuiTextfieldCustomContent","formControl","pseudoFocus","pseudoInvalid","tuiTextfieldCleaner","tuiTextfieldLabelOutside","focusedChange"],[1,"network-container__row"],[1,"network-container__label"],["success",""],["error",""],[1,"network-container__input-status-icon",3,"inlineSVG"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0)(1,"tui-input",1),e.bIt("focusedChange",function(c){return a.onFocusChange(c)}),e.j41(2,"div",2)(3,"label",3),e.EFF(4),e.k0s()()(),e.DNE(5,lr,1,1,"ng-template",null,4,e.C5r),e.DNE(7,dr,1,1,"ng-template",null,5,e.C5r),e.k0s()),2&i){const o=e.sdS(6),c=e.sdS(8);e.R7$(1),e.Y8G("tuiTextfieldCustomContent",a.address.value?a.address.valid?o:c:"")("formControl",a.address)("pseudoFocus",a.address.invalid)("pseudoInvalid",a.address.invalid)("tuiTextfieldCleaner",!!a.address.value)("tuiTextfieldLabelOutside",!1),e.R7$(1),e.Y8G("@moveLabel",a.isActiveInput),e.R7$(2),e.SpI(" ",a.isIntegratorWidget?"You must be the owner and have access to this wallet":"You must have access to this address"," ")}},dependencies:[K.ll,F.BC,F.l_,Q.np,Q.Rd,Q.kf,Q.G6,ye.mp,ye.Ws],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.network-container[_ngcontent-%COMP%]{margin-top:1px}.network-container__row[_ngcontent-%COMP%]{position:relative;top:0;display:flex;gap:10px}.network-container[_ngcontent-%COMP%]   tui-input[_ngcontent-%COMP%]{border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}"],data:{animation:[(0,b.hZ)("moveLabel",[(0,b.wk)("true",(0,b.iF)({color:"#02b774",fontSize:"12px",top:"-5px"})),(0,b.wk)("false",(0,b.iF)({color:"#9a9ab0",fontSize:"16px",top:"0px"})),(0,b.kY)("true <=> false",(0,b.i0)("0.2s ease-out"))])]},changeDetection:0})}return n})();function ur(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.JRh(t)}}function _r(n,r){if(1&n&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&n){const t=e.XpG().ngLet;e.Y8G("tuiHint",t)("tuiHintShowDelay",0)("tuiHintHideDelay",0),e.R7$(1),e.SpI("",t.slice(0,10),"...")}}function mr(n,r){if(1&n&&(e.qex(0),e.DNE(1,ur,2,1,"ng-container",1),e.DNE(2,_r,2,4,"span",6),e.bVm()),2&n){const t=r.ngLet;e.R7$(1),e.Y8G("ngIf",t.length<=15),e.R7$(1),e.Y8G("ngIf",t.length>15)}}function hr(n,r){if(1&n&&(e.j41(0,"div",4),e.EFF(1),e.DNE(2,mr,3,2,"ng-container",5),e.nI1(3,"withRound"),e.nI1(4,"bigNumberFormat"),e.EFF(5),e.k0s()),2&n){const t=e.XpG().ngIf;e.R7$(1),e.SpI(" 1 ",t.from.symbol," = "),e.R7$(1),e.Y8G("ngLet",e.i5U(3,3,e.bMT(4,6,t.to.amount),"toClosestValue")),e.R7$(3),e.SpI(" ",t.to.symbol," ")}}function gr(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.JRh(t)}}function fr(n,r){if(1&n&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&n){const t=e.XpG().ngLet;e.Y8G("tuiHint",t)("tuiHintShowDelay",0)("tuiHintHideDelay",0),e.R7$(1),e.SpI("",t.slice(0,10),"...")}}function vr(n,r){if(1&n&&(e.qex(0),e.DNE(1,gr,2,1,"ng-container",1),e.DNE(2,fr,2,4,"span",6),e.bVm()),2&n){const t=r.ngLet;e.R7$(1),e.Y8G("ngIf",t.length<=15),e.R7$(1),e.Y8G("ngIf",t.length>15)}}function br(n,r){if(1&n&&(e.j41(0,"div",4),e.DNE(1,vr,3,2,"ng-container",5),e.nI1(2,"withRound"),e.nI1(3,"bigNumberFormat"),e.EFF(4),e.k0s()),2&n){const t=e.XpG().ngIf;e.R7$(1),e.Y8G("ngLet",e.i5U(2,3,e.bMT(3,6,t.from.amount),"toClosestValue")),e.R7$(3),e.Lme(" ",t.from.symbol," = 1 ",t.to.symbol," ")}}function Cr(n,r){if(1&n){const t=e.RV6();e.qex(0),e.DNE(1,hr,6,8,"div",2),e.DNE(2,br,5,8,"div",2),e.j41(3,"div",3),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onChangeDirection())}),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf","from"===t.rateDirection),e.R7$(1),e.Y8G("ngIf","to"===t.rateDirection)}}let Yn=(()=>{class n{constructor(t){this.swapFormService=t,this.rateDirection="from"}ngOnInit(){this.tokensRate$=(0,Me.z)([this.swapFormService.inputValueDistinct$,this.swapFormService.outputValueDistinct$]).pipe((0,C.T)(([t,i])=>{const{fromAmount:a,fromToken:o,toToken:c}=t,{toAmount:l}=i;return l?.gt(0)&&a?.actualValue.gt(0)&&o&&c?{from:{amount:a.actualValue.dividedBy(l),symbol:o.symbol},to:{amount:l.dividedBy(a.actualValue),symbol:c.symbol}}:null}))}onChangeDirection(){this.rateDirection="from"===this.rateDirection?"to":"from"}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(N.K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-tokens-rate"]],decls:3,vars:3,consts:[[1,"tokens-rate"],[4,"ngIf"],["class","tokens-rate__amounts",4,"ngIf"],["inlineSVG","assets/images/swaps/icons/rate-direction-button.svg",1,"tokens-rate__direction-button",3,"click"],[1,"tokens-rate__amounts"],[4,"ngLet"],["tuiHintAppearance","onDark","tuiHintDirection","bottom-right",3,"tuiHint","tuiHintShowDelay","tuiHintHideDelay",4,"ngIf"],["tuiHintAppearance","onDark","tuiHintDirection","bottom-right",3,"tuiHint","tuiHintShowDelay","tuiHintHideDelay"]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.DNE(1,Cr,4,2,"ng-container",1),e.nI1(2,"async"),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngIf",e.bMT(2,1,a.tokensRate$)))},dependencies:[_.bT,M.N,K.ll,h.XZ,h.ZF,h.JL,h.AZ,_.Jj,ve.p,Hn.l],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.tokens-rate[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);justify-content:end;height:15px}.tokens-rate__amounts[_ngcontent-%COMP%]{overflow:hidden;color:var(--tui-text-03);font-size:15px;line-height:15px;letter-spacing:.08em;white-space:nowrap}.tokens-rate__direction-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:15px;cursor:pointer}.tokens-rate__direction-button[_ngcontent-%COMP%]     svg path{fill:var(--tui-text-03)}@media (max-width: 420px){.tokens-rate[_ngcontent-%COMP%]{justify-content:start}.tokens-rate__direction-button[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})}return n})();var kr=d(983),Sr=d(31397),yr=d(96697);const wr=["refreshIcon"];function Tr(n,r){if(1&n&&(e.j41(0,"span",4),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,"swaps"===t.mode?"common.refreshTrade":"Update orders"))}}let xr=(()=>{class n{constructor(t,i){this.destroy$=t,this.isMobile=i,this.onRefresh=new e.bkB}ngOnInit(){this.isRotating$.pipe((0,Ge.J)(),(0,Sr.Z)(([t,i])=>{const o=t&&!1===i;return i&&!1===t?(this.refreshIconElement.nativeElement.classList.add("refresh-button__icon_refreshing"),kr.w):(0,Ct.R)(this.refreshIconElement.nativeElement,"animationiteration").pipe((0,yr.s)(1),(0,W.M)(()=>{o&&this.refreshIconElement.nativeElement.classList.remove("refresh-button__icon_refreshing")}))}),(0,z.Q)(this.destroy$)).subscribe()}toggleClick(){this.onRefresh.emit()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(G.ew,2),e.rXU(nt.Td))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-refresh-button"]],viewQuery:function(i,a){if(1&i&&e.GBs(wr,7),2&i){let o;e.mGM(o=e.lsd())&&(a.refreshIconElement=o.first)}},inputs:{isRotating$:"isRotating$",isRotating:"isRotating",mode:"mode"},outputs:{onRefresh:"onRefresh"},features:[e.Jv_([G.ew])],decls:5,vars:1,consts:[["tuiHintAppearance","onDark",1,"refresh-button",3,"tuiHint","click"],["inlineSVG","assets/images/icons/reload.svg",1,"refresh-button__icon"],["refreshIcon",""],["refreshIconTooltip",""],[1,"refresh-icon-tooltip"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0),e.bIt("click",function(){return a.toggleClick()}),e.nrm(1,"div",1,2),e.k0s(),e.DNE(3,Tr,3,3,"ng-template",null,3,e.C5r)),2&i){const o=e.sdS(4);e.Y8G("tuiHint",a.isMobile?"":o)}},dependencies:[K.ll,h.XZ,h.ZF,h.JL,h.AZ,oe.D9],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}body.hide-unused-ui   [_nghost-%COMP%]{display:flex;align-items:center}@media (max-width: 651px){body.hide-unused-ui   [_nghost-%COMP%]{position:initial!important}}.refresh-button[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:18px;height:18px;cursor:pointer}.refresh-button__icon[_ngcontent-%COMP%]{display:flex;align-items:center;width:18px;height:16px}.refresh-button__icon[_ngcontent-%COMP%]     svg{width:100%;height:100%}.refresh-button__icon[_ngcontent-%COMP%]     svg path{fill:var(--tui-text-03)}.refresh-button__icon_refreshing[_ngcontent-%COMP%]{animation:.9s linear .1s infinite _ngcontent-%COMP%_refreshAnimation}.refresh-icon-tooltip[_ngcontent-%COMP%]{font-size:15px}@keyframes _ngcontent-%COMP%_refreshAnimation{to{transform:rotate(-360deg)}}@keyframes _ngcontent-%COMP%_timerAnimation{to{stroke-dashoffset:0}}"],changeDetection:0})}return n})();var Kn=d(65245),Ar=d(76680),Or=d(26374),ut=d(49169),Un=d(39077);function Ir(n,r){1&n&&e.eu8(0)}function Pr(n,r){if(1&n){const t=e.RV6();e.j41(0,"tui-hosted-dropdown",3),e.bIt("openChange",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.open=a)}),e.j41(1,"div",4),e.nrm(2,"div",5),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("content",t.settingsComponent)("open",t.open)("tuiDropdownMinHeight",0)}}function Mr(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.openMobile())}),e.j41(1,"div",4),e.nrm(2,"div",5),e.k0s()()}}let Nr=(()=>{class n{constructor(t,i,a,o){this.headerStore=t,this.swapsFormService=i,this.modalService=a,this.injector=o,this.mode$=this.swapsFormService.inputValue$.pipe((0,Kn.i)(1),(0,C.T)(({fromBlockchain:c,toBlockchain:l})=>c===l?X.T.INSTANT_TRADE:X.T.CROSS_CHAIN_ROUTING),(0,B.F)(),(0,$.Z)(X.T.INSTANT_TRADE)),this.isMobile$=this.headerStore.getMobileDisplayStatus(),this.open=!1}ngOnInit(){this.mode$.pipe((0,B.F)()).subscribe(t=>{this.settingsComponent=new Mt.lS(t===X.T.INSTANT_TRADE?Ar.U:Or.$)})}openMobile(){var t=this;return(0,S.A)(function*(){const i=yield(0,D._)(t.swapsFormService.inputValue$);i.fromBlockchain===i.toBlockchain?t.modalService.openItSettings(t.injector).subscribe():t.modalService.openCcrSettings(t.injector).subscribe()})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(j.X),e.rXU(N.K),e.rXU(ce.B),e.rXU(e.zZn))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-settings-container"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["settingsDesktop",""],["settingsMobile",""],["tuiDropdownDirection","bottom",3,"content","open","tuiDropdownMinHeight","openChange"],[1,"image-container"],["inlineSVG","/assets/images/icons/options.svg",1,"image"],[3,"click"]],template:function(i,a){if(1&i&&(e.DNE(0,Ir,1,0,"ng-container",0),e.nI1(1,"async"),e.DNE(2,Pr,3,3,"ng-template",null,1,e.C5r),e.DNE(4,Mr,3,0,"ng-template",null,2,e.C5r)),2&i){const o=e.sdS(3),c=e.sdS(5);e.Y8G("ngIf",e.bMT(1,3,a.isMobile$))("ngIfThen",c)("ngIfElse",o)}},dependencies:[_.bT,K.ll,ut.o2,Un.HY,_.Jj],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.image[_ngcontent-%COMP%]{display:flex;align-items:center}.image[_ngcontent-%COMP%]     svg{width:20px;height:20px}.image-container[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"],changeDetection:0})}return n})();function Er(n,r){1&n&&e.eu8(0)}function Rr(n,r){if(1&n&&(e.j41(0,"div",7)(1,"span",8),e.EFF(2),e.k0s()()),2&n){const t=r.type,i=r.text,a=e.XpG().ngLet;e.AVh("selected",a===t),e.R7$(2),e.SpI(" ",i," ")}}const Br=function(){return{type:"swapForm",text:"Swap"}};function Lr(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"div",2),e.DNE(2,Er,1,0,"ng-container",3),e.k0s(),e.j41(3,"div",4)(4,"app-refresh-button",5),e.bIt("onRefresh",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.refreshTrades())}),e.k0s(),e.nrm(5,"app-settings-container"),e.k0s(),e.DNE(6,Rr,3,3,"ng-template",null,6,e.C5r),e.k0s()}if(2&n){const t=e.sdS(7),i=e.XpG();e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(3,Br)),e.R7$(2),e.Y8G("isRotating$",i.isRefreshRotating$)}}let $r=(()=>{class n{constructor(t,i){this.formsTogglerService=t,this.refreshService=i,this.selectedForm$=this.formsTogglerService.selectedForm$,this.isRefreshRotating$=this.refreshService.status$.pipe((0,C.T)(a=>a!==de.STOPPED))}refreshTrades(){this.refreshService.onButtonClick()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ye.D),e.rXU(Bt))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-header"]],decls:2,vars:3,consts:[["class","form-header",4,"ngLet"],[1,"form-header"],[1,"form-header__links"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-header__actions"],[3,"isRotating$","onRefresh"],["formTypeSelector",""],[1,"form-header__link"],[1,"form-header__link-title"]],template:function(i,a){1&i&&(e.DNE(0,Lr,8,4,"div",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.selectedForm$))},dependencies:[_.T3,M.N,xr,Nr,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:var(--tui-padding-s) var(--tui-padding-l) var(--tui-padding-m) var(--tui-padding-l);font-weight:700;font-size:15px}.form-header__links[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);color:var(--tui-text-03)}.form-header__link[_ngcontent-%COMP%]{position:relative}.form-header__link-new[_ngcontent-%COMP%]{position:absolute;top:-7px;right:-17px;padding:0 3px;color:#fff;font-size:9px;line-height:12px;background:var(--tui-primary-active);border-radius:5px;pointer-events:none}.form-header__link.selected[_ngcontent-%COMP%]{color:var(--tui-text-01)}.form-header__actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-left:auto}@media (max-width: 651px){.form-header[_ngcontent-%COMP%]{background:var(--tui-base-01);border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}}"],changeDetection:0})}return n})();function Fr(n,r){1&n&&e.nrm(0,"app-target-network-address"),2&n&&e.Y8G("@receiverAnimation",void 0)}function Dr(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-window-container"),e.nrm(1,"app-form-header"),e.j41(2,"div",1)(3,"app-input-output-container",2)(4,"app-asset-selector",3),e.bIt("handleAssetSelection",function(){const o=e.eBV(t).ngLet,c=e.XpG();return e.Njj(c.openSelector("from",o.isMobile))}),e.k0s(),e.j41(5,"div",4)(6,"app-amount-transput",5),e.bIt("amountUpdated",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.updateInputValue(a))}),e.k0s(),e.j41(7,"app-user-balance-container",6),e.bIt("maxButtonClickEvent",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.handleMaxButton())}),e.k0s()()(),e.j41(8,"app-form-switcher",7),e.bIt("switcherClick",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.revert())}),e.k0s(),e.j41(9,"app-input-output-container",8)(10,"app-asset-selector",9),e.bIt("handleAssetSelection",function(){const o=e.eBV(t).ngLet,c=e.XpG();return e.Njj(c.openSelector("to",o.isMobile))}),e.k0s(),e.j41(11,"div",4),e.nrm(12,"app-amount-transput",10)(13,"app-tokens-rate"),e.k0s()()(),e.DNE(14,Fr,1,1,"app-target-network-address",11),e.qex(15,12),e.j41(16,"div",13),e.nrm(17,"app-action-button"),e.j41(18,"app-receiver-address-button",14),e.bIt("handleClick",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.toggleReceiver())}),e.k0s()(),e.bVm(),e.k0s()}if(2&n){const t=r.ngLet;e.R7$(3),e.Y8G("round",t.isMobile?"none":"top")("marginTop",t.isMobile),e.R7$(1),e.Y8G("asset",t.fromAsset)("isDisabled",t.isDisabledFromSelector),e.R7$(2),e.Y8G("selectedToken",t.fromAsset)("amountValue",t.fromAmount),e.R7$(3),e.Y8G("round",t.displayReceiver?"none":"bottom"),e.R7$(1),e.Y8G("asset",t.toAsset),e.R7$(2),e.Y8G("selectedToken",t.toAsset)("amountValue",t.toAmount),e.R7$(2),e.Y8G("ngIf",t.displayReceiver)}}const Gr=function(n,r,t,i,a,o){return{displayReceiver:n,isMobile:r,fromAsset:t,fromAmount:i,toAsset:a,toAmount:o}};let Vr=(()=>{class n{constructor(t,i,a,o,c,l,u,p,m,g){this.tradePageService=t,this.swapFormService=i,this.settingsService=a,this.tokensStoreService=o,this.headerStore=c,this.modalService=l,this.authService=u,this.injector=p,this.swapsStateService=m,this.refundService=g,this.isMobile$=this.headerStore.getMobileDisplayStatus(),this.fromAsset$=this.swapFormService.fromToken$,this.toAsset$=this.swapFormService.toToken$,this.fromAmount$=this.swapFormService.fromAmount$,this.toAmount$=this.swapFormService.toAmount$.pipe((0,C.T)(f=>f?{actualValue:f,visibleValue:f?.toFixed()}:null)),this.currentUser$=this.authService.currentUser$,this.displayTargetAddressInput$=this.fromAsset$.pipe((0,Y.v)(this.toAsset$,this.settingsService.crossChainRoutingValueChanges.pipe((0,$.Z)(this.settingsService.crossChainRoutingValue)),this.settingsService.instantTradeValueChanges.pipe((0,$.Z)(this.settingsService.instantTradeValue))),(0,C.T)(([f,y,k,v])=>f&&y?f.blockchain===y.blockchain?v.showReceiverAddress:k.showReceiverAddress:k.showReceiverAddress||v.showReceiverAddress),(0,B.F)()),this.swapFormService.fromBlockchain$.subscribe(f=>{f&&this.tokensStoreService.startBalanceCalculating(f)}),this.swapFormService.toBlockchain$.subscribe(f=>{f&&this.tokensStoreService.startBalanceCalculating(f)}),this.swapFormService.inputValueDistinct$.subscribe(f=>{this.refundService.onSwapFormInputChanged(f)})}openSelector(t,i){i?this.modalService.openAssetsSelector(t,this.injector).subscribe():this.tradePageService.setState("from"===t?"fromSelector":"toSelector")}updateInputValue(t){const i=!t.actualValue?.isNaN(),a=this.swapFormService.inputValue?.fromAmount?.actualValue;(!a||!a.eq(t?.actualValue))&&this.swapFormService.inputControl.patchValue({fromAmount:i?t:null})}toggleReceiver(){var t=this;return(0,S.A)(function*(){const{fromBlockchain:i,toBlockchain:a}=t.swapFormService.inputValue,o=i===a?t.settingsService.instantTrade:t.settingsService.crossChainRouting;o.patchValue({showReceiverAddress:!o.controls.showReceiverAddress.value})})()}revert(){var t=this;return(0,S.A)(function*(){const{fromBlockchain:i,toBlockchain:a,fromToken:o,toToken:c}=t.swapFormService.inputValue,{toAmount:l}=t.swapFormService.outputValue;t.swapsStateService.setCalculationProgress(0,0),t.swapFormService.inputControl.patchValue({fromBlockchain:a,fromToken:c,toToken:o,toBlockchain:i,...l?.gt(0)&&{fromAmount:{visibleValue:l.toFixed(),actualValue:l}}}),t.swapFormService.outputControl.patchValue({toAmount:null})})()}handleMaxButton(){this.swapFormService.fromToken$.pipe((0,H.$)(),(0,W.M)(t=>{const i=this.tokensStoreService.tokens.find(a=>(0,A._f)(t,a));i.amount&&this.swapFormService.inputControl.patchValue({fromAmount:{actualValue:i.amount,visibleValue:i.amount.toFixed()}})})).subscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(be.p),e.rXU(N.K),e.rXU(_e.h),e.rXU(J.p),e.rXU(j.X),e.rXU(ce.B),e.rXU(ae.u),e.rXU(e.zZn),e.rXU(Ce),e.rXU(Ne))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-swap-form-page"]],decls:7,vars:20,consts:[[4,"ngLet"],[1,"form__container"],[3,"round","marginTop"],["left","","selectorType","from",3,"asset","isDisabled","handleAssetSelection"],["right","",1,"input-container"],["formType","from","inputMode","input",3,"selectedToken","amountValue","amountUpdated"],[3,"maxButtonClickEvent"],[3,"switcherClick"],[3,"round"],["left","","selectorType","to",3,"asset","handleAssetSelection"],["formType","to","inputMode","output",3,"selectedToken","amountValue"],[4,"ngIf"],["footer",""],[1,"buttons-container"],[3,"handleClick"]],template:function(i,a){1&i&&(e.DNE(0,Dr,19,11,"app-window-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async")),2&i&&e.Y8G("ngLet",e.l4e(13,Gr,e.bMT(1,1,a.displayTargetAddressInput$),e.bMT(2,3,a.isMobile$),e.bMT(3,5,a.fromAsset$),e.bMT(4,7,a.fromAmount$),e.bMT(5,9,a.toAsset$),e.bMT(6,11,a.toAmount$)))},dependencies:[_.bT,M.N,Dt,Le.r,Dn,Vn,Jo,tr,sr,jn,pr,Yn,$r,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}app-action-button[_ngcontent-%COMP%]{width:100%}app-gas-form-hint[_ngcontent-%COMP%]{position:absolute;left:0}app-gas-form-hint.source-chain[_ngcontent-%COMP%]{top:85px}app-gas-form-hint.target-chain[_ngcontent-%COMP%]{bottom:110px}.form-links[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);color:var(--tui-text-03)}.form-links_selected[_ngcontent-%COMP%]{color:var(--tui-text-01)}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-left:auto}app-target-network-address[_ngcontent-%COMP%]{display:block}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-s);align-items:flex-end;width:100%}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-l);margin-top:var(--tui-padding-l)}app-form-switcher[_ngcontent-%COMP%]{display:flex;justify-content:center;height:2px;background:linear-gradient(90deg,var(--io-background) 0%,rgba(0,0,0,0) 50%,var(--io-background) 100%)}@media (max-width: 651px){[_nghost-%COMP%]     .window-container{padding:0!important;background:none!important;border-radius:0!important}[_nghost-%COMP%]     .window-container header{padding:var(--tui-padding-l)!important;background:var(--io-background);border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.input-container[_ngcontent-%COMP%]{gap:var(--tui-padding-xs);align-items:flex-start}}"],data:{animation:[(0,b.hZ)("receiverAnimation",[(0,b.kY)(":enter",[(0,b.iF)({height:"0px",opacity:.5}),(0,b.i0)("0.2s ease-out",(0,b.iF)({height:"56px",opacity:1}))]),(0,b.kY)(":leave",[(0,b.iF)({opacity:1,height:"56px"}),(0,b.i0)("0.2s ease-in",(0,b.iF)({height:"0px",opacity:0}))])])]},changeDetection:0})}return n})();var Hr=d(57786),jr=d(18562);let Kt=(()=>{class n{get depositRecentTrades(){return this.storeService.getItem("RUBIC_DEPOSIT_RECENT_TRADE")||[]}constructor(t,i,a){this.swapsFormService=t,this.storeService=i,this.previewSwapService=a,this.maxLatestTrades=10,this._depositTrade$=new L.t(null),this.depositTrade$=this._depositTrade$.asObservable().pipe((0,Kn.i)(1)),this._status$=new L.t(s.CROSS_CHAIN_DEPOSIT_STATUS.WAITING),this.status$=this._status$.asObservable()}updateTrade(t,i){var a=this;return(0,S.A)(function*(){const{fromToken:o,toToken:c,fromAmount:l}=a.swapsFormService.inputValue,u=yield(0,D._)(a.previewSwapService.selectedTradeState$),p={id:t.id,fromToken:o,toToken:c,fromAmount:l.visibleValue,toAmount:t.toAmount,timestamp:Date.now(),depositAddress:t.depositAddress,receiverAddress:i,extraField:t.extraField,tradeType:u.tradeType};a._depositTrade$.next(p),a.saveTrade(p)})()}getSwapStatus(t){var i=this;return(0,S.A)(function*(){try{if(!t)throw new Error;const a=yield(0,D._)(i.previewSwapService.selectedTradeState$);return(yield(0,s.getDepositStatus)(t,a.tradeType)).status}catch{return s.CROSS_CHAIN_DEPOSIT_STATUS.WAITING}})()}setupUpdate(){(0,St.Y)(3e4).pipe((0,$.Z)(-1),(0,I.n)(()=>this.getSwapStatus(this._depositTrade$.value?.id)),(0,W.M)(t=>this._status$.next(t)),(0,yt.v)(t=>t!==s.CROSS_CHAIN_DEPOSIT_STATUS.FINISHED)).subscribe()}removePrevDeposit(){this._depositTrade$.next(null)}saveTrade(t){const i=[...this.depositRecentTrades||[]];i?.length===this.maxLatestTrades&&i.pop(),i.unshift(t);const a=[...i];this.storeService.setItem("RUBIC_DEPOSIT_RECENT_TRADE",a)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(N.K),e.KVO(jr.n),e.KVO(xe))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();const Xn={[s.CROSS_CHAIN_TRADE_TYPE.CHANGELLY]:{hold:"Please contact the Changelly\u2019s security team at security@changelly.com to pass the KYC procedure or any other required procedures."}},Yr=function(n){return{opacity:n}};function Kr(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.nrm(2,"img",5),e.j41(3,"p",6),e.EFF(4," The refund address is required in the event of a failed transaction "),e.k0s()(),e.j41(5,"div",7)(6,"tui-input",8),e.bIt("focusedChange",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onFocusChange(a))}),e.j41(7,"label",9),e.EFF(8),e.k0s()()()()}if(2&n){const t=r.ngLet,i=e.XpG(),a=e.sdS(3),o=e.sdS(5);e.R7$(5),e.Y8G("ngStyle",e.eq3(9,Yr,t?.8:1)),e.R7$(1),e.Y8G("tuiTextfieldCustomContent",i.refundAddressCtrl.value?t?a:o:"")("formControl",i.refundAddressCtrl)("pseudoFocus",i.refundAddressCtrl.invalid)("pseudoInvalid",i.refundAddressCtrl.invalid)("tuiTextfieldCleaner",!!i.refundAddressCtrl.value)("tuiTextfieldLabelOutside",!1),e.R7$(1),e.Y8G("@moveLabel",i.isActiveInput),e.R7$(1),e.SpI(" ",i.labetText," ")}}function Ur(n,r){1&n&&e.nrm(0,"div",10),2&n&&e.Y8G("inlineSVG","assets/images/icons/forms/success-input.svg")}function Xr(n,r){1&n&&e.nrm(0,"div",10),2&n&&e.Y8G("inlineSVG","assets/images/icons/forms/error-input.svg")}let Wr=(()=>{class n{constructor(t,i){this.refundService=t,this.swapFormService=i,this.refundAddressCtrl=this.refundService.refundAddressCtrl,this.isCorrectDepositAddressSet$=this.refundService.isValidRefundAddress$.pipe((0,W.M)(a=>{a&&this.refundAddressCtrl.disable({emitEvent:!1})})),this.isActiveInput=!!this.refundAddressCtrl.value}ngOnDestroy(){this.refundService.setRefundAddress(""),this.refundService.refundAddressCtrl.enable()}get labetText(){return`Refund Address (${this.swapFormService.inputValue.fromBlockchain})`}onFocusChange(t){this.isActiveInput=t||!!this.refundAddressCtrl.value}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ne),e.rXU(N.K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-refund-address"]],decls:6,vars:3,consts:[["class","refund-address-container",4,"ngLet"],["success",""],["error",""],[1,"refund-address-container"],[1,"refund-address__title"],["src","assets/images/icons/yellow-warn.png","width","15","height","15","alt","warn-icon",1,"refund-address__title-icon"],[1,"refund-address__title-text"],[1,"refund-address__input",3,"ngStyle"],["tuiTextfieldSize","l",3,"tuiTextfieldCustomContent","formControl","pseudoFocus","pseudoInvalid","tuiTextfieldCleaner","tuiTextfieldLabelOutside","focusedChange"],[1,"refund-address__input-label"],[1,"network-container__input-status-icon",3,"inlineSVG"]],template:function(i,a){1&i&&(e.DNE(0,Kr,9,11,"div",0),e.nI1(1,"async"),e.DNE(2,Ur,1,1,"ng-template",null,1,e.C5r),e.DNE(4,Xr,1,1,"ng-template",null,2,e.C5r)),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.isCorrectDepositAddressSet$))},dependencies:[_.B3,M.N,K.ll,F.BC,F.l_,Q.np,Q.Rd,Q.kf,Q.G6,ye.mp,ye.Ws,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:normal;justify-content:normal;gap:2px;width:100%;font-size:15px}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__title[_ngcontent-%COMP%], [_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__input[_ngcontent-%COMP%]{background:var(--primary-background)}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:normal;gap:7px;padding:var(--tui-padding-l);color:var(--tui-warn);font-weight:700;border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__title-text[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__title-icon[_ngcontent-%COMP%]{margin-top:2px}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__input[_ngcontent-%COMP%]{position:relative;border-bottom-right-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}[_nghost-%COMP%]   .refund-address-container[_ngcontent-%COMP%]   .refund-address__input[_ngcontent-%COMP%]   .refund-address__input-label[_ngcontent-%COMP%]{position:relative;top:0}"],data:{animation:[(0,b.hZ)("moveLabel",[(0,b.wk)("true",(0,b.iF)({color:"#02b774",fontSize:"12px",top:"-4px"})),(0,b.wk)("false",(0,b.iF)({color:"#9a9ab0",fontSize:"16px",top:"0px"})),(0,b.kY)("true <=> false",(0,b.i0)("0.2s ease-out"))])]},changeDetection:0})}return n})();function zr(n,r){if(1&n&&(e.j41(0,"app-input-output-container",29),e.nrm(1,"app-asset-selector",30),e.j41(2,"div",13),e.nrm(3,"app-amount-transput",31),e.nI1(4,"async"),e.k0s()()),2&n){const t=r.ngLet,i=e.XpG().ngLet,a=e.XpG();e.Y8G("round",i.isMobile?"none":"top")("marginTop",i.isMobile),e.R7$(1),e.Y8G("asset",t),e.R7$(2),e.Y8G("selectedToken",t)("amountValue",e.bMT(4,5,a.fromAmount$))}}function Qr(n,r){1&n&&(e.j41(0,"div",32),e.nrm(1,"app-refund-address"),e.k0s())}function Zr(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3).ngLet,o=e.XpG();return e.Njj(o.copyToClipboard(a.depositTrade.depositAddress))}),e.k0s()}if(2&n){const t=e.XpG(3).ngLet,i=e.XpG(),a=e.sdS(14);e.Y8G("cdkCopyToClipboard",t.depositTrade.depositAddress)("tuiHint",a)("tuiHintManual",i.hintShown)}}function Jr(n,r){if(1&n&&(e.j41(0,"div",36),e.EFF(1),e.nI1(2,"shortAddress"),e.DNE(3,Zr,1,3,"button",37),e.k0s()),2&n){const t=e.XpG(2).ngLet;e.R7$(1),e.SpI(" ",e.brH(2,2,t.depositTrade.depositAddress,t.isMobile?10:20,t.isMobile?10:20)," "),e.R7$(2),e.Y8G("ngIf","expired"!==t.status)}}const qr=function(n){return{"target-address__disabled":n}};function es(n,r){if(1&n&&(e.j41(0,"div",33)(1,"div",34),e.EFF(2,"Deposit address to transfer funds"),e.k0s(),e.DNE(3,Jr,4,6,"div",35),e.k0s()),2&n){const t=e.XpG().ngLet;e.Y8G("@showDepositAddressAnimation",void 0)("ngClass",e.eq3(3,qr,"expired"===t.status)),e.R7$(3),e.Y8G("ngIf",null==t.depositTrade?null:t.depositTrade.depositAddress)}}function ts(n,r){1&n&&e.nrm(0,"div",39)}function ns(n,r){1&n&&e.nrm(0,"div",40)}function is(n,r){1&n&&(e.j41(0,"div",41),e.nrm(1,"img",42),e.k0s())}function as(n,r){1&n&&e.eu8(0)}function os(n,r){if(1&n&&(e.qex(0),e.DNE(1,as,1,0,"ng-container",43),e.bVm()),2&n){e.XpG(2);const t=e.sdS(18);e.R7$(1),e.Y8G("ngTemplateOutlet",t)}}function rs(n,r){1&n&&e.nrm(0,"div",39)}function ss(n,r){1&n&&e.nrm(0,"div",40)}function cs(n,r){1&n&&(e.j41(0,"div",41),e.nrm(1,"img",42),e.k0s())}function ls(n,r){1&n&&e.nrm(0,"div",39)}function ds(n,r){1&n&&e.nrm(0,"div",40)}function ps(n,r){1&n&&(e.j41(0,"div",41),e.nrm(1,"img",42),e.k0s())}function us(n,r){1&n&&e.nrm(0,"div",39)}function _s(n,r){1&n&&e.nrm(0,"div",40)}function ms(n,r){1&n&&e.eu8(0)}function hs(n,r){if(1&n&&(e.qex(0),e.DNE(1,ms,1,0,"ng-container",43),e.bVm()),2&n){e.XpG(2);const t=e.sdS(18);e.R7$(1),e.Y8G("ngTemplateOutlet",t)}}function gs(n,r){1&n&&(e.j41(0,"div",41),e.nrm(1,"img",42),e.k0s())}function fs(n,r){if(1&n&&(e.j41(0,"tui-notification",46),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2).ngLet;e.R7$(1),e.SpI(" ",t.spesificStatusText," ")}}function vs(n,r){if(1&n&&(e.qex(0,44),e.DNE(1,fs,2,1,"tui-notification",45),e.bVm()),2&n){const t=e.XpG().ngLet;e.XpG();const i=e.sdS(16);e.R7$(1),e.Y8G("ngIf",t.spesificStatusText)("ngIfElse",i)}}const bs=function(n,r){return{"status-item__value_completed":n,"status-item__value_failed":r}},Wn=function(n,r){return{"status-item__line_completed":n,"status-item__line_load":r}},Ut=function(n){return{"status-item__value_completed":n}};function Cs(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-window-container"),e.qex(1,5),e.j41(2,"app-back-button",6),e.bIt("onClick",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.backToForm())}),e.k0s(),e.j41(3,"span",7),e.EFF(4,"Deposit Swap"),e.k0s(),e.bVm(),e.qex(5),e.j41(6,"div",8)(7,"div",9),e.DNE(8,zr,5,7,"app-input-output-container",10),e.nI1(9,"async"),e.nrm(10,"app-form-switcher"),e.j41(11,"app-input-output-container",11),e.nrm(12,"app-asset-selector",12),e.nI1(13,"async"),e.j41(14,"div",13),e.nrm(15,"app-amount-transput",14),e.nI1(16,"async"),e.nI1(17,"async"),e.nrm(18,"app-tokens-rate"),e.k0s()()()(),e.DNE(19,Qr,2,0,"div",15),e.DNE(20,es,4,5,"div",16),e.j41(21,"div",17)(22,"div",18)(23,"div",19),e.DNE(24,ts,1,0,"div",20),e.DNE(25,ns,1,0,"div",21),e.DNE(26,is,2,0,"div",22),e.DNE(27,os,2,1,"ng-container",23),e.j41(28,"div",24),e.EFF(29),e.k0s()(),e.nrm(30,"img",25),e.j41(31,"div",19),e.DNE(32,rs,1,0,"div",20),e.nrm(33,"div",26),e.DNE(34,ss,1,0,"div",21),e.DNE(35,cs,2,0,"div",22),e.j41(36,"div",24),e.EFF(37," Confirming "),e.k0s()(),e.nrm(38,"img",25),e.j41(39,"div",19),e.DNE(40,ls,1,0,"div",20),e.nrm(41,"div",27),e.DNE(42,ds,1,0,"div",21),e.DNE(43,ps,2,0,"div",22),e.j41(44,"div",24),e.EFF(45," Exchanging "),e.k0s()(),e.nrm(46,"img",25),e.j41(47,"div",19),e.DNE(48,us,1,0,"div",20),e.DNE(49,_s,1,0,"div",21),e.DNE(50,hs,2,1,"ng-container",23),e.DNE(51,gs,2,0,"div",22),e.j41(52,"div",24),e.EFF(53," Sending to you "),e.k0s()()()(),e.bVm(),e.DNE(54,vs,2,2,"ng-container",28),e.k0s()}if(2&n){const t=r.ngLet,i=e.XpG();e.R7$(2),e.Y8G("isMobile",!1),e.R7$(6),e.Y8G("ngLet",e.bMT(9,33,i.fromAsset$)),e.R7$(4),e.Y8G("asset",e.bMT(13,35,i.toAsset$)),e.R7$(3),e.AVh("tui-skeleton",!t.isToAmountCalculated),e.Y8G("selectedToken",e.bMT(16,37,i.toAsset$))("amountValue",e.bMT(17,39,i.toAmount$)),e.R7$(4),e.Y8G("ngIf",t.isRefundAddressRequired),e.R7$(1),e.Y8G("ngIf",t.isValidRefundAddress),e.R7$(1),e.AVh("status-wrapper__inactive",!t.isValidRefundAddress),e.R7$(3),e.Y8G("ngIf","waiting"===t.status&&!t.isValidRefundAddress),e.R7$(1),e.Y8G("ngIf","waiting"===t.status&&t.isValidRefundAddress),e.R7$(1),e.Y8G("ngIf","waiting"!==t.status&&"expired"!==t.status),e.R7$(1),e.Y8G("ngIf","expired"===t.status),e.R7$(1),e.Y8G("ngClass",e.l_i(41,bs,"expired"!==t.status&&t.isValidRefundAddress,"expired"===t.status&&t.isValidRefundAddress)),e.R7$(1),e.SpI(" ","expired"===t.status?"Expired":"Awaiting deposit"," "),e.R7$(3),e.Y8G("ngIf","waiting"===t.status||"expired"===t.status),e.R7$(1),e.Y8G("ngClass",e.l_i(44,Wn,"exchanging"===t.status||"sending"===t.status||"finished"===t.status,"confirming"===t.status)),e.R7$(1),e.Y8G("ngIf","confirming"===t.status),e.R7$(1),e.Y8G("ngIf","exchanging"===t.status||"sending"===t.status||"finished"===t.status||"failed"===t.status),e.R7$(1),e.Y8G("ngClass",e.eq3(47,Ut,"confirming"===t.status||"exchanging"===t.status||"sending"===t.status||"finished"===t.status||"failed"===t.status)),e.R7$(4),e.Y8G("ngIf","waiting"===t.status||"confirming"===t.status||"failed"===t.status||"expired"===t.status),e.R7$(1),e.Y8G("ngClass",e.l_i(49,Wn,"sending"===t.status||"finished"===t.status,"exchanging"===t.status)),e.R7$(1),e.Y8G("ngIf","exchanging"===t.status),e.R7$(1),e.Y8G("ngIf","sending"===t.status||"finished"===t.status),e.R7$(1),e.Y8G("ngClass",e.eq3(52,Ut,"exchanging"===t.status||"sending"===t.status||"finished"===t.status)),e.R7$(4),e.Y8G("ngIf","waiting"===t.status||"confirming"===t.status||"exchanging"===t.status||"expired"===t.status),e.R7$(1),e.Y8G("ngIf","sending"===t.status),e.R7$(1),e.Y8G("ngIf","failed"===t.status),e.R7$(1),e.Y8G("ngIf","finished"===t.status),e.R7$(1),e.Y8G("ngClass",e.eq3(54,Ut,"sending"===t.status||"finished"===t.status)),e.R7$(2),e.Y8G("ngIf","failed"===t.status)}}function ks(n,r){1&n&&(e.j41(0,"div",47),e.EFF(1," If your transaction seems to be taking longer than normal (more than 10 minutes), please contact our Support Team at "),e.j41(2,"span",48),e.EFF(3,"support@rubic.exchange"),e.k0s(),e.EFF(4,". "),e.k0s())}function Ss(n,r){1&n&&e.EFF(0,"Address copied on clipboard!")}function ys(n,r){1&n&&(e.j41(0,"tui-notification",49),e.EFF(1," The transaction failed, please contact our Support Team at "),e.j41(2,"a",50),e.EFF(3,"support@rubic.exchange"),e.k0s()())}function ws(n,r){1&n&&(e.j41(0,"div",51),e.nrm(1,"img",52),e.k0s())}const Ts=function(n,r,t,i,a,o,c,l,u,p){return{tradeInfo:n,tradeState:r,transaction:t,status:i,depositTrade:a,isMobile:o,isValidRefundAddress:c,spesificStatusText:l,isRefundAddressRequired:u,isToAmountCalculated:p}};let xs=(()=>{class n{constructor(t,i,a,o,c,l,u,p,m,g,f,y,k){this.tradePageService=t,this.previewSwapService=i,this.router=a,this.swapsFormService=o,this.headerStore=c,this.platformConfigurationService=l,this.depositService=u,this.targetAddressService=p,this.refundService=m,this.navigator=g,this.cdr=f,this.destroy$=y,this.modalService=k,this.status$=(0,Me.z)([this.depositService.status$.pipe((0,$.Z)(s.CROSS_CHAIN_DEPOSIT_STATUS.WAITING)),this.depositService.depositTrade$.pipe((0,$.Z)(null))]).pipe((0,C.T)(([v,T])=>Xn[T?.tradeType]?.[v]?s.CROSS_CHAIN_DEPOSIT_STATUS.FAILED:v)),this.specificProviderStatusText$=(0,Me.z)([this.depositService.status$,this.depositService.depositTrade$]).pipe((0,C.T)(([v,T])=>{const O=Xn[T?.tradeType]?.[v];return O||null})),this.fromAsset$=this.swapsFormService.fromToken$.pipe((0,H.$)()),this.toAsset$=this.swapsFormService.toToken$.pipe((0,H.$)()),this.fromAmount$=this.swapsFormService.fromAmount$.pipe((0,H.$)()),this.calculatedToAmount$=this.swapsFormService.toAmount$.pipe((0,C.T)(v=>v?{actualValue:v,visibleValue:v?.toFixed()}:null)).pipe((0,H.$)()),this.toAmount$=(0,Hr.h)(this.calculatedToAmount$,this.depositService.depositTrade$.pipe((0,C.T)(v=>v?.toAmount?{actualValue:v.toAmount,visibleValue:v.toAmount.toFixed()}:null))),this.isToAmountCalculated$=this.toAmount$.pipe((0,C.T)(v=>!!v)),this.SWAP_PROVIDER_TYPE=X.T,this.tradeInfo$=this.previewSwapService.tradeInfo$,this.nativeToken$=this.swapsFormService.nativeToken$,this.tradeState$=this.previewSwapService.selectedTradeState$.pipe((0,C.T)(v=>{const T=v.trade.getTradeInfo();return{...v,feeInfo:T?.feeInfo}})),this.transactionState$=this.previewSwapService.transactionState$,this.isMobile$=this.headerStore.getMobileDisplayStatus(),this.ADDRESS_TYPE=ze.A,this.depositTrade$=this.depositService.depositTrade$,this.isRefundAddressRequired$=this.previewSwapService.selectedTradeState$.pipe((0,C.T)(v=>v.tradeType===s.CROSS_CHAIN_TRADE_TYPE.CHANGELLY)),this.isValidRefundAddress$=this.refundService.isValidRefundAddress$,this.hintShown=!1,this.previewSwapService.setSelectedProvider(),this.setupTradeIfValidRefundAddress()}backToForm(){this.tradePageService.setState("form"),this.previewSwapService.setNextTxState({step:"idle",data:{}})}startTrade(){var t=this;return(0,S.A)(function*(){yield t.previewSwapService.requestTxSign()})()}swap(){var t=this;return(0,S.A)(function*(){t.previewSwapService.startSwap()})()}approve(){var t=this;return(0,S.A)(function*(){yield t.previewSwapService.startApprove()})()}navigateToHistory(){var t=this;return(0,S.A)(function*(){const a=(yield(0,D._)(t.tradeState$)).trade instanceof q.CrossChainTrade;yield t.router.navigate(["/history"],{queryParamsHandling:"preserve",state:{type:a?"cross-chain":"on-chain"}})})()}getAverageTime(t){if(t?.tradeType){const i=Gt.r[t.tradeType],o=this.platformConfigurationService.providersAverageTime?.[t.tradeType];return o?`${o} M`:`${i.averageTime} M`}return t instanceof q.CrossChainTrade?"30 M":"3 M"}getGasData(t){let i=null;if(t instanceof s.EvmCrossChainTrade?i=t.gasData:t instanceof s.EvmOnChainTrade&&(i=t.gasFeeInfo),!i)return null;const o=s.nativeTokensList[t.from.blockchain];let c=null;return i.gasLimit?c=i.gasLimit.multipliedBy(i.gasPrice??0):i.totalGas&&(c=s.Web3Pure.fromWei(i.totalGas,o.decimals)),c?{amount:s.Web3Pure.fromWei(c,o.decimals),symbol:o.symbol}:null}setupTrade(){var t=this;return(0,S.A)(function*(){const i=t.targetAddressService.address,a=yield(0,D._)(t.tradeState$);t.depositService.removePrevDeposit();try{const o=yield a.trade.getTransferTrade(i,t.refundService.refundAddress);t.depositService.updateTrade(o,i),t.depositService.setupUpdate()}catch(o){console.error(`DepositPreviewSwapComponent_setupTrade_error ===> ${o}`),(yield t.modalService.openDepositTradeRateChangedModal(a))&&t.tradePageService.setState("form")}})()}copyToClipboard(t){this.showHint(),this.navigator.clipboard.writeText(t)}showHint(){this.hintShown=!0,(0,Te.O)(1500).subscribe(()=>{this.hintShown=!1,this.cdr.markForCheck()})}setupTradeIfValidRefundAddress(){this.refundService.isValidRefundAddress$.pipe((0,B.F)(),(0,z.Q)(this.destroy$)).subscribe(t=>{t?this.setupTrade():this.depositService.removePrevDeposit()})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(be.p),e.rXU(xe),e.rXU(De.Ix),e.rXU(N.K),e.rXU(j.X),e.rXU(Re.p),e.rXU(Kt),e.rXU(le.P),e.rXU(Ne),e.rXU(it.kW),e.rXU(e.gRc),e.rXU(G.ew,2),e.rXU(ce.B))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-deposit-preview-swap"]],features:[e.Jv_([G.ew])],decls:19,vars:32,consts:[[4,"ngLet"],["contactSupportHint",""],["template",""],["defaultFailedStatusText",""],["failedStatus",""],["header",""],[3,"isMobile","onClick"],[1,"back-button__text"],[1,"preview"],[1,"form__container"],[3,"round","marginTop",4,"ngLet"],["round","bottom"],["left","","selectorType","to",3,"asset"],["right","",1,"input-container"],["formType","to","inputMode","output",3,"selectedToken","amountValue"],["class","refund-address",4,"ngIf"],["class","target-address",3,"ngClass",4,"ngIf"],[1,"status-wrapper"],[1,"row","row-status"],[1,"row-item","status-item"],["class","status-item__circle",4,"ngIf"],["class","status-item__spinner",4,"ngIf"],["class","status-item__circle_complete",4,"ngIf"],[4,"ngIf"],[1,"row-item__value","status-item__value",3,"ngClass"],["src","assets/images/icons/arrow/arrow-right-white.svg","alt","Next step",1,"arrow-step"],[1,"status-item__line","status-item__line_confirming",3,"ngClass"],[1,"status-item__line","status-item__line_exchanging",3,"ngClass"],["footer","",4,"ngIf"],[3,"round","marginTop"],["left","","selectorType","from",3,"asset"],["formType","from","inputMode","output",3,"selectedToken","amountValue"],[1,"refund-address"],[1,"target-address",3,"ngClass"],[1,"target-address__title"],["class","target-address__text",4,"ngIf"],[1,"target-address__text"],["class","copy-icon copy-icon_green","inlineSVG","assets/images/icons/copy.svg",3,"cdkCopyToClipboard","tuiHint","tuiHintManual","click",4,"ngIf"],["inlineSVG","assets/images/icons/copy.svg",1,"copy-icon","copy-icon_green",3,"cdkCopyToClipboard","tuiHint","tuiHintManual","click"],[1,"status-item__circle"],[1,"status-item__spinner"],[1,"status-item__circle_complete"],["src","assets/images/icons/checkmark/checkmark-bold-black.svg","alt","",1,"scheme__state.status-icon"],[4,"ngTemplateOutlet"],["footer",""],["class","failed-notification","status","error",4,"ngIf","ngIfElse"],["status","error",1,"failed-notification"],[1,"contact-support-hint"],[1,"primary-text"],["status","error"],["href","mailto:support@rubic.exchange","target","_blank",1,"modal__footer-link"],[1,"status-item__circle_failed"],["src","assets/images/icons/checkmark/failed-checkmark.svg","alt","",1,"scheme__state.status-icon"]],template:function(i,a){1&i&&(e.DNE(0,Cs,55,56,"app-window-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,ks,5,0,"ng-template",null,1,e.C5r),e.DNE(13,Ss,1,0,"ng-template",null,2,e.C5r),e.DNE(15,ys,4,0,"ng-template",null,3,e.C5r),e.DNE(17,ws,2,0,"ng-template",null,4,e.C5r)),2&i&&e.Y8G("ngLet",e.zJS(21,Ts,[e.bMT(1,1,a.tradeInfo$),e.bMT(2,3,a.tradeState$),e.bMT(3,5,a.transactionState$),e.bMT(4,7,a.status$),e.bMT(5,9,a.depositTrade$),e.bMT(6,11,a.isMobile$),e.bMT(7,13,a.isValidRefundAddress$),e.bMT(8,15,a.specificProviderStatusText$),e.bMT(9,17,a.isRefundAddressRequired$),e.bMT(10,19,a.isToAmountCalculated$)]))},dependencies:[_.YU,_.bT,_.T3,M.N,Ht,Dt,Le.r,Dn,Vn,K.ll,jt.dF,h.XZ,h.ZF,h.JL,h.Hg,h.AZ,lt.v,jn,Yn,Wr,_.Jj,Yt.b],styles:['[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}app-form-switcher[_ngcontent-%COMP%]{display:flex;justify-content:center;height:2px}[_nghost-%COMP%]   app-input-output-container[_ngcontent-%COMP%]     .io-right{justify-content:flex-end}.refund-address[_ngcontent-%COMP%]{margin-top:var(--tui-padding-l)}.target-address[_ngcontent-%COMP%]{margin-top:var(--tui-padding-l);padding:var(--tui-padding-l);background:var(--primary-background);border-bottom:2px solid var(--secondary-background);border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.target-address__title[_ngcontent-%COMP%]{color:var(--tui-text-03);font-weight:400;font-size:15px}.target-address__text[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center;color:var(--tui-text-01);font-weight:700;font-size:18px}.target-address__disabled[_ngcontent-%COMP%]{opacity:.8;-webkit-user-select:none;user-select:none}.status-wrapper[_ngcontent-%COMP%]{padding:var(--tui-padding-l);background:var(--primary-background);border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m);transition:all .1s}.status-wrapper__inactive[_ngcontent-%COMP%]{margin-top:var(--tui-padding-l);border-radius:var(--tui-radius-m)}.row[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center;justify-content:space-between}.row[_ngcontent-%COMP%]:first-of-type{margin-top:0}.row__recent-trades[_ngcontent-%COMP%]{margin-top:var(--tui-padding-s)}.row-item__header[_ngcontent-%COMP%]{margin-bottom:2px;color:var(--primary-color)}.row-item__value[_ngcontent-%COMP%]{display:flex;grid-gap:var(--tui-padding-s);align-items:center;height:-moz-fit-content;height:fit-content;min-height:16px;color:var(--primary-text);font-weight:600;font-size:16px}.row-item__value[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:16px}.status-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.status-item__circle[_ngcontent-%COMP%]{position:relative;width:16px;height:16px;border:1px solid var(--tui-text-02);border-radius:50%}.status-item__circle_complete[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:16px;height:16px;background-color:var(--tui-primary);border-color:var(--tui-primary);border-radius:50%}.status-item__circle_complete[_ngcontent-%COMP%]:before{display:none}.status-item__circle_failed[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:16px;height:16px;background-color:#ba0303;border-color:#ba0303;border-radius:50%}.status-item__circle_failed[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:10px}.status-item__circle_failed[_ngcontent-%COMP%]:before{display:none}.status-item__spinner[_ngcontent-%COMP%]{width:16px;height:16px;color:#fff;border-radius:50%;transform:rotate(45deg);perspective:1000px}.status-item__spinner[_ngcontent-%COMP%]:before, .status-item__spinner[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;display:block;width:inherit;height:inherit;border-radius:50%;transform:rotateX(70deg);animation:1s _ngcontent-%COMP%_spin linear infinite;content:""}.status-item__spinner[_ngcontent-%COMP%]:after{color:var(--tui-primary);transform:rotateY(70deg) rotate(180deg)}.status-item__value[_ngcontent-%COMP%]{margin-top:var(--tui-padding-xs);color:var(--tui-text-01);font-weight:400;font-size:12px;line-height:120%;white-space:nowrap}.status-item__value_completed[_ngcontent-%COMP%]{color:var(--tui-primary)}.status-item__value_failed[_ngcontent-%COMP%]{color:#ba0303}@media (max-width: 651px){.row-status[_ngcontent-%COMP%]{flex-direction:column}.row-status[_ngcontent-%COMP%]   .arrow-step[_ngcontent-%COMP%]{rotate:90deg}}.copy-icon[_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.copy-icon_green[_ngcontent-%COMP%]     svg path{stroke:var(--tui-primary)}@keyframes _ngcontent-%COMP%_dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotateccw{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(-360deg)}}@keyframes _ngcontent-%COMP%_spin{0%,to{box-shadow:.2em 0 0 0 currentcolor}12%{box-shadow:.2em .2em 0 0 currentcolor}25%{box-shadow:0 .2em 0 0 currentcolor}37%{box-shadow:-.2em .2em 0 0 currentcolor}50%{box-shadow:-.2em 0 0 0 currentcolor}62%{box-shadow:-.2em -.2em 0 0 currentcolor}75%{box-shadow:0 -.2em 0 0 currentcolor}87%{box-shadow:.2em -.2em 0 0 currentcolor}}.failed-notification[_ngcontent-%COMP%]     .t-content{max-width:450px}'],data:{animation:[(0,b.hZ)("showDepositAddressAnimation",[(0,b.kY)(":enter",[(0,b.iF)({height:"0px",padding:0,"margin-top":0}),(0,b.i0)("0.3s ease-out",(0,b.iF)({height:"54px",padding:"1rem","margin-top":"1rem"}))])])]},changeDetection:0})}return n})();const As={transactionId:{label:"Transaction ID",description:"Transaction swap identifier"},receiver:{label:"Receiver address",description:"Address to send assets"}};function Os(n,r){1&n&&e.EFF(0," Copied! ")}let Is=(()=>{class n{constructor(t,i){this.cdr=t,this.navigator=i,this.hintShown=!1}copyToClipboard(){this.openHint(),this.navigator.clipboard.writeText(this.text)}openHint(){this.hintShown=!0,this.cdr.detectChanges(),setTimeout(()=>{this.hintShown=!1,this.cdr.markForCheck()},1e3)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.gRc),e.rXU(it.kW))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-copy-container"]],inputs:{text:"text"},decls:3,vars:2,consts:[["inlineSVG","assets/images/icons/copy.svg",1,"button-container",3,"tuiHint","tuiHintManual","click"],["tooltip",""]],template:function(i,a){if(1&i&&(e.j41(0,"button",0),e.bIt("click",function(){return a.copyToClipboard()}),e.k0s(),e.DNE(1,Os,1,0,"ng-template",null,1,e.C5r)),2&i){const o=e.sdS(2);e.Y8G("tuiHint",o)("tuiHintManual",a.hintShown)}},dependencies:[K.ll,h.XZ,h.ZF,h.JL,h.Hg,h.AZ],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{display:block}.button-container[_ngcontent-%COMP%]{position:relative}.button-container[_ngcontent-%COMP%]:active{transform:scale(.95)}"],changeDetection:0})}return n})();function Ps(n,r){if(1&n&&(e.j41(0,"app-transaction-details-element",5)(1,"div",9),e.EFF(2),e.nI1(3,"shortAddress"),e.j41(4,"a",10),e.nI1(5,"scannerLink"),e.nrm(6,"img",11),e.nI1(7,"translate"),e.k0s()()()),2&n){const t=e.XpG(2).ngLet,i=e.XpG();e.Y8G("title",i.text.receiver.label)("description",i.text.receiver.description),e.R7$(2),e.SpI(" ",e.brH(3,5,t.wallet,5,5)," "),e.R7$(2),e.Y8G("safetyLink",e.brH(5,9,t.wallet,t.trade.toToken.blockchain,i.ADDRESS_TYPE.WALLET)),e.R7$(2),e.Y8G("alt",e.bMT(7,13,"common.checkOnScanner"))}}function Ms(n,r){if(1&n&&(e.j41(0,"app-transaction-details-element",5)(1,"div",6),e.EFF(2),e.nI1(3,"shortAddress"),e.nrm(4,"app-copy-container",7),e.k0s()()),2&n){const t=e.XpG(2).ngLet;e.Y8G("title",t.extraField.name)("description",t.extraField.text),e.R7$(2),e.SpI(" ",t.extraField.value.length>25?e.brH(3,4,t.extraField.value,10,10):t.extraField.value," "),e.R7$(2),e.Y8G("text",t.extraField.value)}}function Ns(n,r){if(1&n&&(e.j41(0,"div",4)(1,"app-transaction-details-element",5)(2,"div",6),e.EFF(3),e.nrm(4,"app-copy-container",7),e.k0s()(),e.DNE(5,Ps,8,15,"app-transaction-details-element",8),e.DNE(6,Ms,5,8,"app-transaction-details-element",8),e.k0s()),2&n){const t=e.XpG().ngLet,i=e.XpG();e.R7$(1),e.Y8G("title",i.text.transactionId.label)("description",i.text.transactionId.description),e.R7$(2),e.SpI(" ",t.trade.id," "),e.R7$(1),e.Y8G("text",t.trade.id),e.R7$(1),e.Y8G("ngIf",t.wallet&&(null==t.trade?null:t.trade.toToken.blockchain)),e.R7$(1),e.Y8G("ngIf",t.extraField)}}function Es(n,r){if(1&n&&(e.j41(0,"tui-notification",12),e.EFF(1),e.k0s()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.SpI(" ",t.extraField.text," ")}}function Rs(n,r){}function Bs(n,r){if(1&n&&(e.j41(0,"app-window-container"),e.qex(1,1),e.EFF(2,"Transaction details"),e.bVm(),e.DNE(3,Ns,7,6,"div",2),e.DNE(4,Es,2,1,"tui-notification",3),e.DNE(5,Rs,0,0,"ng-template"),e.k0s()),2&n){const t=r.ngLet;e.R7$(3),e.Y8G("ngIf",null==t?null:t.trade),e.R7$(1),e.Y8G("ngIf",t.extraField)}}const Ls=function(n,r,t){return{trade:n,wallet:r,extraField:t}};let $s=(()=>{class n{constructor(t,i,a){this.walletConnector=t,this.targetAddressService=i,this.depositService=a,this.text=As,this.ADDRESS_TYPE=ze.A,this.trade$=this.depositService.depositTrade$,this.extraField$=this.trade$.pipe((0,C.T)(o=>o?.extraField?{name:o.extraField.name,value:o.extraField.value,text:`Please don\u2019t forget to specify the ${o.extraField.name} while sending the ${o.fromToken.symbol} transaction for the exchange`}:null)),this.walletAddress$=this.targetAddressService.address$.pipe((0,A.n)(Boolean,o=>(0,w.of)(o),()=>this.walletConnector.addressChange$))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ee.c),e.rXU(le.P),e.rXU(Kt))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-deposit-trade-info"]],decls:4,vars:11,consts:[[4,"ngLet"],["header",""],["class","transaction-details",4,"ngIf"],["status","warning","class","tui-space_vertical-4",4,"ngIf"],[1,"transaction-details"],[3,"title","description"],[1,"row"],[3,"text"],[3,"title","description",4,"ngIf"],[1,"receiver-container"],[3,"safetyLink"],["src","assets/images/icons/scanner.svg",1,"image",3,"alt"],["status","warning",1,"tui-space_vertical-4"]],template:function(i,a){1&i&&(e.DNE(0,Bs,6,2,"app-window-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async")),2&i&&e.Y8G("ngLet",e.sMw(7,Ls,e.bMT(1,1,a.trade$),e.bMT(2,3,a.walletAddress$),e.bMT(3,5,a.extraField$)))},dependencies:[_.bT,st.A,M.N,Is,Le.r,lt.v,Bn,_.Jj,ct.n,oe.D9,Yt.b],styles:["[_nghost-%COMP%]{display:block;width:360px;background:var(--secondary-background);border-radius:17px}.transaction-details[_ngcontent-%COMP%]{padding:var(--tui-padding-l);background:var(--primary-background);border-radius:var(--tui-radius-m)}.transaction-details__label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:var(--tui-padding-l);font-size:15px;text-align:center}.image[_ngcontent-%COMP%]{width:13px;height:13px}.image[_ngcontent-%COMP%]     svg{width:100%;height:100%}.receiver-container[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-xs);align-items:center}.receiver-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex}tui-notification[_ngcontent-%COMP%]{margin-top:var(--tui-padding-s)!important;margin-bottom:0!important;border:1px solid}.row[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);justify-content:flex-end}app-transaction-details-element[_ngcontent-%COMP%]{display:flex;align-items:center;height:24px}"],changeDetection:0})}return n})();function Fs(n,r){1&n&&e.nrm(0,"app-token-selector-page",10)}function Ds(n,r){1&n&&e.nrm(0,"app-token-selector-page",11)}function Gs(n,r){1&n&&e.nrm(0,"app-preview-swap")}function Vs(n,r){1&n&&e.nrm(0,"app-deposit-preview-swap")}function Hs(n,r){1&n&&e.nrm(0,"app-spindle-banner")}function js(n,r){1&n&&(e.qex(0),e.DNE(1,Hs,1,0,"app-spindle-banner",8),e.bVm())}function Ys(n,r){1&n&&e.nrm(0,"app-hypelab-banner")}function Ks(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-providers-list-general",12),e.bIt("selectTrade",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.selectTrade(a))}),e.nI1(1,"async"),e.k0s()}if(2&n){const t=e.XpG().ngLet,i=e.XpG();e.Y8G("@inOutAnimation",void 0)("states",t.providers)("selectedTradeType",e.bMT(1,5,i.selectedTradeType$))("calculationStatus",t.calculationStatus)("showCalculation",!0)}}function Us(n,r){1&n&&e.nrm(0,"app-deposit-trade-info")}const Xs=function(n,r){return{form_small:n,form_tokens:r}},zn=function(n){return{display:n}};function Ws(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"div",2),e.DNE(2,Fs,1,0,"app-token-selector-page",3),e.DNE(3,Ds,1,0,"app-token-selector-page",4),e.nrm(4,"app-swap-form-page"),e.DNE(5,Gs,1,0,"app-preview-swap",5),e.DNE(6,Vs,1,0,"app-deposit-preview-swap",5),e.j41(7,"tui-carousel",6),e.bIt("indexChange",function(a){const c=e.eBV(t).ngLet;return e.Njj(c.resetCarouselIndex=a)}),e.DNE(8,js,2,0,"ng-container",7),e.DNE(9,Ys,1,0,"app-hypelab-banner",8),e.k0s()(),e.DNE(10,Ks,2,7,"app-providers-list-general",9),e.DNE(11,Us,1,0,"app-deposit-trade-info",7),e.k0s()}if(2&n){const t=r.ngLet,i=e.XpG();e.AVh("large-iframe-swap-container",i.useLargeIframe),e.R7$(1),e.Y8G("ngClass",e.l_i(16,Xs,"preview"===t.content,"fromSelector"===t.content||"toSelector"===t.content))("ngSwitch",t.content),e.R7$(1),e.Y8G("ngSwitchCase","fromSelector"),e.R7$(1),e.Y8G("ngSwitchCase","toSelector"),e.R7$(1),e.Aen(e.eq3(19,zn,"form"===t.content?"block":"none")),e.R7$(1),e.Y8G("ngSwitchCase","preview"),e.R7$(1),e.Y8G("ngSwitchCase","depositPreview"),e.R7$(1),e.Y8G("duration",t.showHypelab?t.resetCarouselDuration:0)("index",t.resetCarouselIndex)("ngStyle",e.eq3(21,zn,"form"===t.content?"block":"none")),e.R7$(1),e.Y8G("ngIf",t.showSpindl),e.R7$(2),e.Y8G("ngIf",t.calculationStatus&&t.calculationStatus.showSidebar&&"form"===t.content&&!i.useLargeIframe),e.R7$(1),e.Y8G("ngIf","depositPreview"===t.content)}}const zs=function(n,r,t,i,a,o,c,l){return{content:n,providers:r,calculationStatus:t,transactionState:i,showSpindl:a,resetCarouselIndex:o,resetCarouselDuration:c,showHypelab:l}};let Qn=(()=>{class n{constructor(t,i,a,o,c,l,u,p,m,g,f,y){this.swapsState=t,this.tradePageService=i,this.swapFormQueryService=a,this.swapFormService=o,this.swapTokensUpdaterService=c,this.headerStore=l,this.previewSwapService=u,this.actionButtonService=p,this.notificationsService=m,this.queryParamsService=g,this.spindlService=f,this.authService=y,this.formContent$=this.tradePageService.formContent$,this.providers$=this.swapsState.tradesStore$.pipe((0,W.M)(k=>this.setProvidersVisibility(k)),(0,C.T)(k=>k.filter(v=>v.trade))),this.calculationStatus$=this.swapsState.calculationStatus$,this.selectedTradeType$=this.swapsState.tradeState$.pipe((0,C.T)(k=>k.tradeType)),this.isMobile=this.headerStore.isMobile,this.useLargeIframe=this.queryParamsService.useLargeIframe,this.buttonState$=this.actionButtonService.buttonState$,this.transactionState$=this.previewSwapService.transactionState$,this.hideIframeBanner=this.queryParamsService.hideBranding&&this.queryParamsService.useLargeIframe,this.showSpindl$=this.spindlService.showSpindl$.pipe((0,Y.v)(this.authService.currentUser$),(0,C.T)(([k,v])=>k&&!!v?.address),(0,C.T)(k=>!this.hideIframeBanner&&k)),this.showHypelab$=(0,Ct.R)(window,"message").pipe((0,C.T)(k=>"bannerReady"===k.data?.type),(0,$.Z)(!1)),this.resetCarouselDuration$=this.authService.currentUser$.pipe((0,I.n)(()=>(0,Ii.x)((0,w.of)(0),(0,w.of)(6e4).pipe((0,He.c)(100))))),this.resetCarouselIndex$=this.authService.currentUser$.pipe((0,I.n)(()=>(0,w.of)(0)))}selectTrade(t){var i=this;return(0,S.A)(function*(){yield i.swapsState.selectTrade(t),yield i.getSwapPreview()})()}getSwapPreview(){var t=this;return(0,S.A)(function*(){const i=yield(0,D._)(t.buttonState$);"Preview swap"===i.text?i.action():("error"===i.type||"Connect wallet"===i.text)&&t.notificationsService.show(i.text,{status:Mi.wS.Warning,autoClose:5e3,data:null,icon:"",defaultAutoCloseTime:0})})()}setProvidersVisibility(t){if(this.swapFormService.isFilled){let i;0===t.length?i=setTimeout(()=>{this.tradePageService.setProvidersVisibility(!0),clearTimeout(i)},1500):t[0].trade?.type===s.ON_CHAIN_TRADE_TYPE.WRAPPED?(i&&clearTimeout(i),this.tradePageService.setProvidersVisibility(!1)):t.length>0?(this.tradePageService.setProvidersVisibility(!0),i&&clearTimeout(i)):i||this.tradePageService.setProvidersVisibility(!1)}}ngAfterViewInit(){const t=document.querySelector(".banner-carousel");t&&(t.removeAllListeners("mouseenter"),t.removeAllListeners("mouseleave"))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ce),e.rXU(be.p),e.rXU(rn),e.rXU(N.K),e.rXU(cn),e.rXU(j.X),e.rXU(xe),e.rXU(kt),e.rXU(Tn.I),e.rXU(he.w),e.rXU(wn.Q),e.rXU(ae.u))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-trade-view-container"]],decls:9,vars:26,consts:[["class","swap-container",3,"large-iframe-swap-container",4,"ngLet"],[1,"swap-container"],[1,"form",3,"ngClass","ngSwitch"],["formType","from",4,"ngSwitchCase"],["formType","to",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"banner-carousel",3,"duration","index","ngStyle","indexChange"],[4,"ngIf"],[4,"tuiItem"],[3,"states","selectedTradeType","calculationStatus","showCalculation","selectTrade",4,"ngIf"],["formType","from"],["formType","to"],[3,"states","selectedTradeType","calculationStatus","showCalculation","selectTrade"]],template:function(i,a){1&i&&(e.DNE(0,Ws,12,23,"div",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async")),2&i&&e.Y8G("ngLet",e.lV(17,zs,e.bMT(1,1,a.formContent$),e.bMT(2,3,a.providers$),e.bMT(3,5,a.calculationStatus$),e.bMT(4,7,a.transactionState$),e.bMT(5,9,a.showSpindl$),e.bMT(6,11,a.resetCarouselIndex$),e.bMT(7,13,a.resetCarouselDuration$),e.bMT(8,15,a.showHypelab$)))},dependencies:[_.YU,_.bT,_.B3,_.ux,_.e1,M.N,oa,ra,Be.ep,Be.qE,An.$,Pa,Xo,Fn.R,Vr,xs,$s,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]     .back-button{display:flex;gap:var(--tui-padding-s);align-items:center;padding:0 5px;cursor:pointer}[_nghost-%COMP%]     .back-button__text{display:block;margin-right:auto;margin-left:auto;padding-right:14px}[_nghost-%COMP%]     .back-button__image{height:12px}.swap-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin:0 auto}.swap-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;width:600px;margin-right:10px;margin-left:10px;transition:.2s ease-in-out}.swap-container[_ngcontent-%COMP%]   .form_tokens[_ngcontent-%COMP%]{width:600px}.swap-container[_ngcontent-%COMP%]   .form_small[_ngcontent-%COMP%]{width:360px}.swap-container[_ngcontent-%COMP%]   app-spindle-banner[_ngcontent-%COMP%], .swap-container[_ngcontent-%COMP%]   app-hypelab-banner[_ngcontent-%COMP%], .swap-container[_ngcontent-%COMP%]   app-token-selector-page[_ngcontent-%COMP%]{width:100%}.swap-container[_ngcontent-%COMP%]   app-swap-form-page[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.swap-container[_ngcontent-%COMP%]   app-preview-swap[_ngcontent-%COMP%], .swap-container[_ngcontent-%COMP%]   app-cn-preview-swap[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.swap-container[_ngcontent-%COMP%]   app-input-output-container[_ngcontent-%COMP%]:first-child{display:block;margin-bottom:1px}.swap-container[_ngcontent-%COMP%]   app-providers-list-general[_ngcontent-%COMP%]{display:block;width:360px;height:510px;background:var(--secondary-background);border-radius:17px}.large-iframe-swap-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.large-iframe-swap-container[_ngcontent-%COMP%]   app-cn-trade-info[_ngcontent-%COMP%]{width:600px;margin:0 10px}@media (max-width: 651px){.swap-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-l);align-items:center;width:100%;margin:0 auto}.swap-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:360px;overflow:hidden}.swap-container[_ngcontent-%COMP%]   app-providers-list-general[_ngcontent-%COMP%]{width:360px;height:auto;overflow:hidden;background:none;border-radius:0}}.banner-carousel[_ngcontent-%COMP%]{width:100%}.banner-carousel[_ngcontent-%COMP%]     fieldset{height:-moz-fit-content;height:fit-content;padding:0}"],data:{animation:[(0,b.hZ)("inOutAnimation",[(0,b.kY)(":enter",[(0,b.iF)({opacity:0,scale:0}),(0,b.i0)("0.25s ease-in-out",(0,b.iF)({opacity:1,scale:1}))]),(0,b.kY)(":leave",[(0,b.iF)({opacity:.5,width:"360px",scale:1}),(0,b.i0)("0.25s ease-in-out",(0,b.iF)({opacity:0,width:0,scale:0}))])])]},changeDetection:0})}return n})();const Qs=[{path:"get-gas",canActivate:[ui],component:Qn},{path:"preview",redirectTo:""},{path:"",component:Qn}];let Zs=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[De.iI.forChild(Qs),De.iI]})}return n})();var Zn=d(30640),Xt=d(8894);let Js=(()=>{class n{constructor(){this.skipDefault=!0}onClick(t){this.skipDefault&&(t.preventDefault(),t.stopPropagation())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","skipDefault",""]],hostBindings:function(i,a){1&i&&e.bIt("click",function(c){return a.onClick(c)})},inputs:{skipDefault:"skipDefault"},exportAs:["skipDefault"]})}return n})(),qs=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-promotion-badge"]],inputs:{data:"data",hideHint:"hideHint"},decls:2,vars:7,consts:[["target","_blank",3,"skipDefault","href"],["size","s","status","custom",1,"element__gas-refund-badge",3,"value","tuiHint","tuiHintHideDelay"]],template:function(i,a){1&i&&(e.j41(0,"a",0),e.nrm(1,"tui-tag",1),e.k0s()),2&i&&(e.Y8G("skipDefault",!a.data.href)("href",null==a.data?null:a.data.href,e.B4B),e.R7$(1),e.xc7("background",a.data.bgColor&&a.data.bgColor),e.Y8G("value",a.data.label)("tuiHint",(null==a.data?null:a.data.hint)||null)("tuiHintHideDelay",a.hideHint?0:200))},dependencies:[Js,pt.ud,h.XZ,h.ZF,h.JL,h.AZ],styles:[".element__gas-refund-badge[_ngcontent-%COMP%]{font-weight:700!important;text-shadow:0 1px 4px rgba(0,0,0,.6196078431);background:linear-gradient(90deg,rgb(188,45,255) 0%,rgb(0,102,255) 99.18%);cursor:pointer}"],changeDetection:0})}return n})(),ec=(()=>{class n{transform(t,i,a=2,o=!1){return o&&t.isLessThanOrEqualTo(0)?"0":t.multipliedBy(i).toFixed(a)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"getUsdPrice",type:n,pure:!0})}return n})();function tc(n,r){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.nI1(2,"getUsdPrice"),e.k0s()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.SpI(" ~ ",e.ii3(2,1,t.to.tokenAmount,t.to.price,2,!0),"\xa0$ ")}}function nc(n,r){if(1&n&&e.nrm(0,"tui-tag",25),2&n){const t=e.XpG(2).ngLet;e.Y8G("tuiHint","The most profitable trade according to our calculations")("tuiHintHideDelay",t?0:200)}}function ic(n,r){if(1&n&&e.nrm(0,"app-promotion-badge",26),2&n){const t=r.$implicit,i=e.XpG(2).ngLet;e.Y8G("data",t)("hideHint",i)}}function ac(n,r){if(1&n&&e.nrm(0,"tui-tag",27),2&n){const t=e.XpG(4);e.Y8G("tuiHint",null==t.tradeState.error?null:t.tradeState.error.message)}}function oc(n,r){if(1&n&&(e.j41(0,"div",31),e.nrm(1,"img",32),e.j41(2,"p",33),e.EFF(3),e.k0s()()),2&n){const t=e.XpG(5);e.R7$(1),e.Y8G("src","assets/images/icons/"+t.tradeState.centralizationStatus+".png",e.B4B),e.R7$(2),e.JRh(t.tradeState.centralizationStatus)}}function rc(n,r){if(1&n&&(e.j41(0,"div",28),e.DNE(1,oc,4,2,"div",29),e.nrm(2,"app-route-element",30),e.k0s()),2&n){const t=e.XpG(4);e.R7$(1),e.Y8G("ngIf",t.tradeState.centralizationStatus),e.R7$(1),e.Y8G("tradeType",t.tradeState.tradeType)("routes",t.tradeState.routes)}}const sc=function(n){return{"element__provider-container_selected":n}},cc=function(n){return{element__expander_active:n}};function lc(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),e.EFF(5),e.nI1(6,"shortenAmount"),e.nI1(7,"bigNumberFormat"),e.k0s(),e.j41(8,"div",10),e.EFF(9,"Provider"),e.k0s(),e.j41(10,"div",11),e.nrm(11,"img",12),e.j41(12,"div",13),e.EFF(13),e.k0s()()()(),e.j41(14,"div",14),e.DNE(15,tc,3,6,"div",15),e.j41(16,"div",16)(17,"div",17),e.DNE(18,nc,1,2,"tui-tag",18),e.DNE(19,ic,1,2,"app-promotion-badge",19),e.DNE(20,ac,1,1,"tui-tag",20),e.k0s(),e.j41(21,"div",21),e.bIt("click",function(a){e.eBV(t);const o=e.XpG(3);return e.Njj(o.toggleExpand(a))}),e.k0s()()()(),e.j41(22,"tui-expand",22),e.DNE(23,rc,3,3,"ng-template",23),e.k0s()()}if(2&n){const t=r.ngLet,i=e.XpG(2).ngLet,a=e.XpG();e.Y8G("ngClass",e.eq3(19,sc,a.selectedTradeType===(null==a.tradeState?null:a.tradeState.tradeType))),e.R7$(5),e.Lme(" ",e.ii3(6,12,e.bMT(7,17,t.to.tokenAmount),7,5,!0),"\xa0",t.to.symbol," "),e.R7$(6),e.Y8G("src",i.image,e.B4B)("alt",i.name),e.R7$(2),e.JRh(i.name),e.R7$(2),e.Y8G("ngIf",(null==t||null==t.to||null==t.to.tokenAmount?null:t.to.tokenAmount.isFinite)&&(null==t||null==t.to||null==t.to.price?null:t.to.price.gt(0))),e.R7$(3),e.Y8G("ngIf",a.isBest),e.R7$(1),e.Y8G("ngForOf",a.tradeState.badges),e.R7$(1),e.Y8G("ngIf",null==a.tradeState?null:a.tradeState.error),e.R7$(1),e.Y8G("ngClass",e.eq3(21,cc,a.expanded)),e.R7$(1),e.Y8G("expanded",a.expanded)}}const dc=function(n,r){return{element_shorted:n,element_disabled:r}};function pc(n,r){if(1&n&&(e.j41(0,"div",2),e.DNE(1,lc,24,23,"div",3),e.nrm(2,"app-swap-data-element",4),e.k0s()),2&n){const t=r.ngLet,i=e.XpG(2);e.Y8G("ngClass",e.l_i(6,dc,i.shortedInfo,(null==i.tradeState?null:i.tradeState.error)||(null==i.tradeState||null==i.tradeState.trade||null==i.tradeState.trade.to||null==i.tradeState.trade.to.tokenAmount?null:i.tradeState.trade.to.tokenAmount.lte(0)))),e.R7$(1),e.Y8G("ngLet",null==i.tradeState?null:i.tradeState.trade),e.R7$(1),e.Y8G("gasInfo",i.getGasData())("feeInfoChange",i.getFeeInfo())("time",i.getAverageTimeString())("hideHint",t)}}function uc(n,r){if(1&n&&(e.qex(0),e.DNE(1,pc,3,9,"div",1),e.nI1(2,"async"),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngLet",e.bMT(2,1,t.hideHint$))}}let _c=(()=>{class n{constructor(t){this.tradeInfoManager=t,this.isBest=!1,this.shortedInfo=!1,this.expanded=!1}toggleExpand(t){t.preventDefault(),t.stopPropagation(),this.expanded=!this.expanded}getAverageTimeString(){return Nn(this.tradeState.trade)?"7 D":`${this.getProviderInfo(this.tradeState.tradeType)?.averageTime||3} M`}getProviderInfo(t){return this.tradeInfoManager.getProviderInfo(t)}getFeeInfo(){return this.tradeInfoManager.getFeeInfo(this.tradeState.trade)}getGasData(){return this.tradeInfoManager.getGasData(this.tradeState.trade)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Vt))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-provider-element"]],inputs:{tradeState:"tradeState",selectedTradeType:"selectedTradeType",isBest:"isBest",shortedInfo:"shortedInfo",hideHint$:"hideHint$"},decls:1,vars:1,consts:[[4,"ngLet"],["class","element",3,"ngClass",4,"ngLet"],[1,"element",3,"ngClass"],["class","element__provider-container",3,"ngClass",4,"ngLet"],[3,"gasInfo","feeInfoChange","time","hideHint"],[1,"element__provider-container",3,"ngClass"],[1,"element__amounts-container"],[1,"element__amount"],[1,"element__token"],[1,"element__token-amount"],[1,"element__token-provider"],[1,"element__token-info"],[1,"element__token-image",3,"src","alt"],[1,"element__token-symbol"],[1,"element__right"],["class","element__amount-price",4,"ngIf"],[1,"element__row"],[1,"element__row-badges"],["class","element__best-badge","size","s","status","custom","value","Best",3,"tuiHint","tuiHintHideDelay",4,"ngIf"],[3,"data","hideHint",4,"ngFor","ngForOf"],["class","element__warning-badge","size","s","status","custom","value","Warn",3,"tuiHint",4,"ngIf"],["inlineSVG","assets/images/icons/arrow-down.svg",1,"element__expander",3,"ngClass","click"],[3,"expanded"],["tuiExpandContent",""],[1,"element__amount-price"],["size","s","status","custom","value","Best",1,"element__best-badge",3,"tuiHint","tuiHintHideDelay"],[3,"data","hideHint"],["size","s","status","custom","value","Warn",1,"element__warning-badge",3,"tuiHint"],[1,"element__expandable"],["class","element__expandable-status",4,"ngIf"],[3,"tradeType","routes"],[1,"element__expandable-status"],["width","16","height","16","alt","centralization",1,"element__expan","dable-status-icon",3,"src"],[1,"element__expandable-status-text"]],template:function(i,a){1&i&&e.DNE(0,uc,3,3,"ng-container",0),2&i&&e.Y8G("ngLet",a.getProviderInfo(a.tradeState.tradeType))},dependencies:[_.YU,_.Sq,_.bT,M.N,Xt.sv,Xt.ND,pt.ud,K.ll,h.XZ,h.ZF,h.JL,h.AZ,Rn,Ln,qs,_.Jj,ve.p,Se.W,ec],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.element[_ngcontent-%COMP%]{overflow:hidden;background:var(--primary-background);border-radius:var(--tui-radius-m);cursor:pointer}.element_disabled[_ngcontent-%COMP%]{cursor:no-drop;opacity:.75}.element__provider-container[_ngcontent-%COMP%]{padding:var(--tui-padding-l);border-bottom:1px solid var(--tui-secondary)}.element__provider-container_selected[_ngcontent-%COMP%]{background:var(--io-background)}.element__row[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:flex-start}.element__row-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--tui-padding-s);justify-content:flex-end}.element__amounts-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.element__amount[_ngcontent-%COMP%]{display:flex;align-items:center}.element__token[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-xs)}.element__token-info[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);align-items:center}.element__token-provider[_ngcontent-%COMP%]{color:var(--tui-text-03);font-weight:500;font-size:18px;line-height:18px;letter-spacing:.54px;display:none}.element__token-image[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:100%}.element__token-amount[_ngcontent-%COMP%]{max-width:145px;overflow:hidden;font-weight:700;font-size:18px;text-overflow:ellipsis}.element__token-symbol[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:14px}.element__amount-price[_ngcontent-%COMP%]{color:var(--tui-text-03);font-weight:400;font-size:14px}.element__middle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.element__provider[_ngcontent-%COMP%]{display:flex;align-items:center}.element__provider-image[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:var(--tui-padding-m);border-radius:100%}.element__provider-label[_ngcontent-%COMP%]{color:var(--tui-text-03)}.element__best-badge[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700!important;text-transform:uppercase;background:linear-gradient(90deg,rgba(0,255,117,.6) 0%,rgba(224,255,32,.6) 99.18%);cursor:pointer}.element__warning-badge[_ngcontent-%COMP%]{font-weight:700!important;text-transform:uppercase;background:linear-gradient(90deg,rgba(204,141,23,.83) 0%,rgba(213,185,5,.94) 99.18%);cursor:pointer}  .element__expander{display:flex;align-items:center;justify-content:center;width:30px;height:20px}  .element__expander svg{transition:.2s ease-in-out}  .element__expander_active svg{transform:rotate(180deg);transform-origin:center}  .element__expander_active svg path{fill:var(--tui-text-03)}  .element__expander svg path{fill:var(--tui-text-03)}.element__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--tui-padding-xs);align-items:flex-end}.element__expandable[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:normal;justify-content:normal;margin-top:var(--tui-padding-s)}.element__expandable-status[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:normal;gap:7px}.element__expandable-status-text[_ngcontent-%COMP%]{color:var(--tui-text-03);line-height:10px}app-route-element[_ngcontent-%COMP%]{display:block}@media (max-width: 651px){.element_shorted[_ngcontent-%COMP%]   .element__amounts-container[_ngcontent-%COMP%]{align-items:end}.element_shorted[_ngcontent-%COMP%]   .element__token-info[_ngcontent-%COMP%]{gap:var(--tui-padding-s)}.element_shorted[_ngcontent-%COMP%]   .element__token[_ngcontent-%COMP%]{gap:var(--tui-padding-m)}.element_shorted[_ngcontent-%COMP%]   .element__token-provider[_ngcontent-%COMP%]{display:block}.element_shorted[_ngcontent-%COMP%]   .element__token-image[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:100%}.element_shorted[_ngcontent-%COMP%]   .element__token-symbol[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:500;font-size:18px;line-height:18px;letter-spacing:.54px}.element_shorted[_ngcontent-%COMP%]   .element__token-amount[_ngcontent-%COMP%]{display:none}.element_shorted[_ngcontent-%COMP%]   .element__right[_ngcontent-%COMP%]{gap:var(--tui-padding-m)}.element_shorted[_ngcontent-%COMP%]   .element__amount-price[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})}return n})();var _t=d(6249),mc=d(78323),hc=d(17944),gc=d(94350),Jn=d(1203);let fc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({}),n})();var Ze=d(27367),vc=d(51146),qn=d(91813),Oe=d(88965),Je=d(54978),Wt=d(46221);function bc(n,r){if(1&n){const t=e.RV6();e.j41(0,"tui-input",3),e.bIt("ngModelChange",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onQueryChanges(a))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&n){const t=e.XpG().ngLet,i=e.XpG();e.Y8G("ngModel",t)("tuiTextfieldIconLeft","tuiIconSearch")("tuiTextfieldSize","m")("tuiTextfieldLabelOutside",!0)("focusable",!1),e.R7$(1),e.SpI(" ",e.bMT(2,6,i.searchBarText)," ")}}function Cc(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.expand())}),e.j41(1,"tui-input",5),e.bIt("ngModelChange",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onQueryChanges(a))}),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&n){const t=e.XpG().ngLet,i=e.XpG();e.AVh("expandable-input_expanded",i.isExpanded),e.R7$(1),e.Y8G("ngModel",t)("tuiTextfieldIcon","tuiIconSearch")("tuiTextfieldCleaner",!0),e.R7$(1),e.SpI(" ",e.bMT(3,6,"modals.tokensListModal.searchPlaceholder")," ")}}function kc(n,r){if(1&n&&(e.qex(0),e.DNE(1,bc,3,8,"tui-input",1),e.DNE(2,Cc,4,8,"ng-template",null,2,e.C5r),e.bVm()),2&n){const t=e.sdS(3),i=e.XpG();e.R7$(1),e.Y8G("ngIf",!i.expandableField)("ngIfElse",t)}}let mt=(()=>{class n{ngOnInit(){this.searchBarText="blockchains"===this.searchBarType?`Search among ${this.blockchainListService.availableBlockchains.length} Chains`:"modals.tokensListModal.searchPlaceholder",this.searchQuery$="blockchains"===this.searchBarType?this.assetsSearchQueryService.assetsQuery$:this.searchQueryService.query$}constructor(t,i,a,o){this.searchQueryService=t,this.assetsSearchQueryService=i,this.headerStore=a,this.blockchainListService=o,this.expandableField=!1,this.isExpanded=!1,this.searchBarSize=this.headerStore.isMobile?"m":"s"}onQueryChanges(t){"tokens"===this.searchBarType?this.searchQueryService.setSearchQuery(t):"blockchains"===this.searchBarType&&(this.assetsSearchQueryService.assetsQuery=t)}expand(){this.isExpanded=!this.isExpanded}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Oe.W),e.rXU(Wt.x),e.rXU(j.X),e.rXU(Je.h))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-search-bar"]],inputs:{expandableField:"expandableField",injector:"injector",searchBarType:"searchBarType"},decls:2,vars:3,consts:[[4,"ngLet"],[3,"ngModel","tuiTextfieldIconLeft","tuiTextfieldSize","tuiTextfieldLabelOutside","focusable","ngModelChange",4,"ngIf","ngIfElse"],["expandableInputTpl",""],[3,"ngModel","tuiTextfieldIconLeft","tuiTextfieldSize","tuiTextfieldLabelOutside","focusable","ngModelChange"],[1,"expandable-input",3,"click"],["tuiTextfieldSize","l",3,"ngModel","tuiTextfieldIcon","tuiTextfieldCleaner","ngModelChange"]],template:function(i,a){1&i&&(e.DNE(0,kc,4,2,"ng-container",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.searchQuery$))},dependencies:[_.bT,M.N,ye.mp,ye.Ws,F.BC,F.vS,Q.np,Q.kf,Q.G6,Q.OC,Q.dx,_.Jj,oe.D9],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}"],changeDetection:0})}return n})();var Sc=d(65089),we=d(53893),ht=d(3738),gt=d(38349);const yc={[s.BLOCKCHAIN_NAME.POLYGON_ZKEVM]:"https://app.layer3.xyz/streaks/swap-on-rubic",[s.BLOCKCHAIN_NAME.ZK_SYNC]:"https://www.intract.io/quest/6659a29721949f76bb4714df",[s.BLOCKCHAIN_NAME.MODE]:"https://app.layer3.xyz/quests/rubic-on-mode?slug=rubic-on-mode",[s.BLOCKCHAIN_NAME.BLAST]:"https://app.layer3.xyz/quests/blast-through-rubic-exchange?slug=blast-through-rubic-exchange",[s.BLOCKCHAIN_NAME.TAIKO]:"https://rubic.exchange/blog/how-to-bridge-to-and-from-taiko-and-get-taiko-airdrop/",[s.BLOCKCHAIN_NAME.SCROLL]:"https://rubic.exchange/birthday4",[s.BLOCKCHAIN_NAME.UNICHAIN]:"https://app.layer3.xyz/activations/unichain-rubic",[s.BLOCKCHAIN_NAME.SONEIUM]:"https://app.layer3.xyz/activations/superchain-enjoyeers-rubic"};function wc(n,r){if(1&n&&(e.qex(0),e.j41(1,"a",1)(2,"span"),e.EFF(3),e.nI1(4,"uppercase"),e.k0s(),e.nrm(5,"img",2),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("href",t.blockchainPromoLinks[t.blockchain],e.B4B),e.R7$(2),e.JRh(e.bMT(4,2,t.tag))}}function Tc(n,r){1&n&&(e.qex(0),e.j41(1,"a",3),e.nrm(2,"img",4),e.k0s(),e.bVm())}function xc(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",5)(2,"span"),e.EFF(3),e.nI1(4,"uppercase"),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,1,t.tag))}}let ei=(()=>{class n{constructor(){this.blockchainTags=gt.g,this.blockchainPromoLinks=yc}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-blockchains-promo-badge"]],inputs:{tag:"tag",blockchain:"blockchain"},decls:3,vars:3,consts:[[4,"ngIf"],["target","_blank",1,"badge-element","promo",3,"href"],["src","assets/images/icons/promo-link.svg"],["target","_blank",1,"badge-element","badge-element_full","birthday"],["src","assets/images/icons/bday_promo.svg"],[1,"badge-element","new"]],template:function(i,a){1&i&&(e.DNE(0,wc,6,4,"ng-container",0),e.DNE(1,Tc,3,0,"ng-container",0),e.DNE(2,xc,5,3,"ng-container",0)),2&i&&(e.Y8G("ngIf",a.tag===a.blockchainTags.PROMO),e.R7$(1),e.Y8G("ngIf",a.tag===a.blockchainTags.BDAY_PROMO),e.R7$(1),e.Y8G("ngIf",a.tag===a.blockchainTags.NEW))},dependencies:[_.bT,_.Pc],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.badge-element[_ngcontent-%COMP%]{display:flex;gap:2px;align-items:center;justify-content:center;width:45px;height:15px;margin-right:8px;font-size:50%;border-radius:4px}.badge-element[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50%}.promo[_ngcontent-%COMP%]{background:linear-gradient(150deg,#23dca4 8%,#377fec 60%,#7e1dca 90%)}.new[_ngcontent-%COMP%]{background:linear-gradient(160deg,#fab2ff 10%,#1904e5 90%)}.birthday[_ngcontent-%COMP%]{background:transparent}.birthday[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}@media (max-width: 651px){.badge-element[_ngcontent-%COMP%]{width:83px;height:24px;font-size:70%;border-radius:6px}}"],changeDetection:0})}return n})();var ti=d(61201);let Ac=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[Oe.W,Ye.D,we.Y,ht.s,Wt.x],imports:[_.MD,Zn.G,Ae.FC,ye.zi,F.YN,Q.CN,gc.vl,re.Pv,Ze.E9,h.Q3,h.Q3,_t.Yc,K.e1,vc.Yk,ut.NT,fc,qn.L,Un.ML,Jn.Jk,Be.x3]})}return n})();e.wjB(Sc.F,[_.Sq,_.bT,_.T3,M.N,Pn.q,Ae.UB,re.SM,h.XZ,h.ZF,h.JL,h.AZ,mt,ei],[_.Jj,ti.J]);let Ie=(()=>{class n{constructor(){this._listType$=new L.t("default"),this.listType$=this._listType$.asObservable()}get listType(){return this._listType$.value}set listType(t){this._listType$.next(t)}switchListType(){this.listType="default"===this.listType?"favorite":"default"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Oc=d(70980),Ic=d(36106);const Pc={...Object.values(s.BLOCKCHAIN_NAME).reduce((n,r)=>({...n,[r]:null}),{}),[s.BLOCKCHAIN_NAME.ETHEREUM]:"ethereum",[s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:"smartchain",[s.BLOCKCHAIN_NAME.POLYGON]:"polygon",[s.BLOCKCHAIN_NAME.POLYGON_ZKEVM]:"polygon",[s.BLOCKCHAIN_NAME.AVALANCHE]:"avalanche",[s.BLOCKCHAIN_NAME.MOONRIVER]:"moonriver",[s.BLOCKCHAIN_NAME.FANTOM]:"fantom",[s.BLOCKCHAIN_NAME.ARBITRUM]:"arbitrum",[s.BLOCKCHAIN_NAME.AURORA]:"aurora",[s.BLOCKCHAIN_NAME.TELOS]:"telos",[s.BLOCKCHAIN_NAME.HARMONY]:"harmony",[s.BLOCKCHAIN_NAME.SOLANA]:"solana",[s.BLOCKCHAIN_NAME.NEAR]:"near",[s.BLOCKCHAIN_NAME.OPTIMISM]:"optimism",[s.BLOCKCHAIN_NAME.CRONOS]:"cronos",[s.BLOCKCHAIN_NAME.GNOSIS]:"xdai",[s.BLOCKCHAIN_NAME.MOONBEAM]:"moonbeam",[s.BLOCKCHAIN_NAME.CELO]:"celo",[s.BLOCKCHAIN_NAME.BOBA]:"boba",[s.BLOCKCHAIN_NAME.ASTAR_EVM]:"astar_evm",[s.BLOCKCHAIN_NAME.BITCOIN]:"bitcoin",[s.BLOCKCHAIN_NAME.TRON]:"tron",[s.BLOCKCHAIN_NAME.KAVA]:"kava",[s.BLOCKCHAIN_NAME.BITGERT]:"bitgert",[s.BLOCKCHAIN_NAME.OASIS]:"oasis",[s.BLOCKCHAIN_NAME.METIS]:"metis",[s.BLOCKCHAIN_NAME.DFK]:"defi-kingdoms",[s.BLOCKCHAIN_NAME.KLAYTN]:"kaia",[s.BLOCKCHAIN_NAME.VELAS]:"velas",[s.BLOCKCHAIN_NAME.SYSCOIN]:"syscoin",[s.BLOCKCHAIN_NAME.PULSECHAIN]:"pulsechain",[s.BLOCKCHAIN_NAME.LINEA]:"linea",[s.BLOCKCHAIN_NAME.BASE]:"base",[s.BLOCKCHAIN_NAME.MANTLE]:"mantle",[s.BLOCKCHAIN_NAME.MANTA_PACIFIC]:"manta-pacific",[s.BLOCKCHAIN_NAME.SCROLL]:"scroll",[s.BLOCKCHAIN_NAME.ZETACHAIN]:"zetachain",[s.BLOCKCHAIN_NAME.BLAST]:"blast",[s.BLOCKCHAIN_NAME.MERLIN]:"merlin",[s.BLOCKCHAIN_NAME.ROOTSTOCK]:"rootstock",[s.BLOCKCHAIN_NAME.MODE]:"mode",[s.BLOCKCHAIN_NAME.ZK_FAIR]:"zkfair",[s.BLOCKCHAIN_NAME.ZK_LINK]:"zklink",[s.BLOCKCHAIN_NAME.XLAYER]:"xlayer",[s.BLOCKCHAIN_NAME.TAIKO]:"taiko",[s.BLOCKCHAIN_NAME.SEI]:"sei",[s.BLOCKCHAIN_NAME.CORE]:"core",[s.BLOCKCHAIN_NAME.BAHAMUT]:"bahamut",[s.BLOCKCHAIN_NAME.GRAVITY]:"gravity",[s.BLOCKCHAIN_NAME.FRAXTAL]:"fraxtal",[s.BLOCKCHAIN_NAME.BERACHAIN]:"berachain",[s.BLOCKCHAIN_NAME.SONEIUM]:"soneium"};var zt=d(20039);const Mc=(n,r)=>{const t=n.amount.isFinite()?n.amount.multipliedBy(null===n.price?0:n.price):new E.A(0),i=r.amount.isFinite()?r.amount.multipliedBy(null===r.price?0:r.price):new E.A(0),a=n.amount?.gt(0),o=r.amount?.gt(0),c=Number(r.available)-Number(n.available),l=i.minus(t).toNumber(),u=Number(o)-Number(a);return c||l||u||We.kM[r.blockchain]-We.kM[n.blockchain]||(n.blockchain===r.blockchain?0:n.blockchain>r.blockchain?1:-1)||r.rank-n.rank},Nc=(n,r)=>{const t=n.amount.isFinite()?n.amount.multipliedBy(null===n.price?0:n.price):new E.A(0),i=r.amount.isFinite()?r.amount.multipliedBy(null===r.price?0:r.price):new E.A(0),a=n.amount?.gt(0),o=r.amount?.gt(0),c=Number(r.available)-Number(n.available),l=i.minus(t).toNumber(),u=Number(o)-Number(a);return c||l||u||r.rank-n.rank||We.kM[r.blockchain]-We.kM[n.blockchain]||(n.blockchain===r.blockchain?0:n.blockchain>r.blockchain?1:-1)},Ec=(n,r)=>n.priceChange24h-r.priceChange24h,Rc=(n,r)=>r.priceChange24h-n.priceChange24h;var ne=d(94856);class ft{constructor(r,t,i,a){this.tokensStoreService=r,this.assetsSelectorStateService=t,this.swapFormService=i,this.tokenConverters=a,this.tempTokensList=(0,zt.B8)([])}initList(r){return r?(this.tempTokensList=this.addAvailableFavoriteFields(r),this):(this.tempTokensList=this.addAvailableFavoriteFields("allChains"===this.assetsSelectorStateService.assetType?this.tokensStoreService.allChainsTokens[this.assetsSelectorStateService.tokenFilter]:this.tokensStoreService.tokens),this)}toArray(){return this.tempTokensList.toArray()}toList(){return this.tempTokensList}applyFilterByChain(r){return this.tempTokensList=this.tempTokensList.filter(t=>t.blockchain===r),this}applyFilterOnlyWithBalancesAndTopTokens(){return this.tempTokensList=this.tempTokensList.filter(r=>r.rank>=7||r.amount.gt(0)),this}applyFilterByQueryOnClient(r){return this.tempTokensList=r.startsWith("0x")?this.tempTokensList.filter(t=>t.address.toLowerCase().includes(r)):this.tempTokensList.filter(t=>t.symbol.toLowerCase().includes(r)||t.name.toLowerCase().includes(r)),this}applyShowFavoriteTokensIf(r){if(!r)return this;const t=this.tokenConverters.convertTokensListToMap(this.tokensStoreService.favoriteTokens);return this.tempTokensList=this.tempTokensList.filter(i=>!!t.get(this.tokenConverters.getTokenKeyInMap(i))),this}applyDefaultSort(){const r=this.tempTokensList.toArray();return this.tempTokensList=this.sortTokens(r,Mc),this}applySortByTokenRank(){const r=this.tempTokensList.toArray();return this.tempTokensList=this.sortTokens(r,Nc),this}applySortByMostGainer(r){if(r!==ne.A.ALL_CHAINS_GAINERS)throw new Error(`[applySortByMostGainer] Invalid tokenFilter ${r}`);const t=this.tempTokensList.toArray();return this.tempTokensList=this.sortTokens(t,Rc),this}applySortByMostLoser(r){if(r!==ne.A.ALL_CHAINS_LOSERS)throw new Error(`[applySortByMostLoser] Invalid tokenFilter ${r}`);const t=this.tempTokensList.toArray();return this.tempTokensList=this.sortTokens(t,Ec),this}addAvailableFavoriteFields(r){return r.map(t=>({...t,available:this.isTokenAvailable(t),favorite:this.isTokenFavorite(t)}))}sortTokens(r,t){const i=r.findIndex(a=>{const o=s.BlockchainsInfo.getChainType(a.blockchain);return s.Web3Pure[o].isNativeAddress(a.address)});if(-1===i||"allChains"===this.assetsSelectorStateService.assetType)return(0,zt.B8)(r.sort(t));{const a=[...r.slice(0,i),...r.slice(i+1,r.length)];return(0,zt.B8)([r[i],...a.sort(t)])}}isTokenFavorite(r){return this.tokensStoreService.favoriteTokens.some(t=>(0,A._f)(t,r))}isTokenAvailable(r){const t=this.oppositeToken();return!t||!(0,A._f)(t,r)}oppositeToken(){const t=this.swapFormService.inputValue["from"===this.assetsSelectorStateService.formType?"toToken":"fromToken"];return(0,ke.Tl)(t)?t:null}}var $e=d(84055),Bc=d(46666),Qt=d(43045);let vt=(()=>{class n{get tokensToShow(){return this._tokensToShow$.value}set tokensToShow(t){this._tokensToShow$.next(t)}get customToken(){return this._customToken$.value}set customToken(t){this._customToken$.next(t)}get searchQuery(){return this.searchQueryService.query}get blockchain(){const t=this.assetsSelectorStateService.assetType;return s.BlockchainsInfo.isBlockchainName(t)?t:null}get listType(){return this.tokensListTypeService.listType}get tokenFilter(){return this.assetsSelectorStateService.tokenFilter}constructor(t,i,a,o,c,l,u,p,m,g,f){this.tokensListTypeService=t,this.searchQueryService=i,this.tokensService=a,this.tokensStoreService=o,this.assetsSelectorService=c,this.assetsSelectorStateService=l,this.httpClient=u,this.swapFormService=p,this.destroy$=m,this.tokensUpdaterService=g,this.tokenConverters=f,this._tokensToShow$=new L.t([]),this.tokensToShow$=this._tokensToShow$.asObservable(),this._customToken$=new L.t(void 0),this.customToken$=this._customToken$.asObservable(),this.subscribeOnUpdateTokens(),this.subscribeOnTokensChange(),this.subscribeOnSearchQueryChange(),this.subscribeOnBlockchainChange(),this.subscribeOnListType()}subscribeOnTokensChange(){(0,Me.z)([this.tokensStoreService.tokens$,this.tokensStoreService.favoriteTokens$]).pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.searchQuery||this.tokensUpdaterService.triggerUpdateTokens()})}subscribeOnSearchQueryChange(){(0,Me.z)([this.searchQueryService.query$,this.assetsSelectorStateService.selectorListType$]).pipe((0,se.p)(([t,i])=>"tokens"===i),(0,z.Q)(this.destroy$)).subscribe(()=>{this.tokensUpdaterService.triggerUpdateTokens()})}subscribeOnBlockchainChange(){this.assetsSelectorService.assetType$.pipe((0,B.F)(),(0,z.Q)(this.destroy$)).subscribe(()=>{this.tokensUpdaterService.triggerUpdateTokens()})}subscribeOnListType(){this.tokensListTypeService.listType$.pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.searchQueryService.setSearchQuery(""),this.tokensUpdaterService.triggerUpdateTokens()})}subscribeOnUpdateTokens(){this.tokensUpdaterService.updateTokensList$.pipe((0,W.M)(),(0,I.n)(({skipRefetch:t})=>this.searchQuery.length?"default"===this.listType?this.getDefaultTokensByQuery(t):(0,w.of)({tokensToShow:this.getFavoriteTokensByQuery()}):(0,w.of)({tokensToShow:this.getSortedTokens()})),(0,z.Q)(this.destroy$)).subscribe(t=>{"tokensToShow"in t?(this.tokensToShow=t.tokensToShow,this.customToken=null):(this.tokensToShow=[],this.customToken=t.customToken)})}getDefaultTokensByQuery(t){var i=this;if("allChains"===this.assetsSelectorStateService.assetType&&this.assetsSelectorStateService.tokenFilter!==ne.A.ALL_CHAINS_ALL_TOKENS){const a=this.searchQuery.toLowerCase(),o=new ft(this.tokensStoreService,this.assetsSelectorStateService,this.swapFormService,this.tokenConverters);return(0,w.of)({tokensToShow:o.initList().applyFilterByQueryOnClient(a).applySortByTokenRank().toArray()})}return(0,Te.O)(300).pipe((0,B.F)(),(0,Z.B)(200),(0,W.M)(()=>this.tokensUpdaterService.setTokensLoading(!0)),(0,wt.H)(()=>this.tryParseQueryAsBackendTokens(t)),(0,I.n)(function(){var a=(0,S.A)(function*(o){if(o?.length)return{tokensToShow:o};const c=yield i.tryParseQueryAsCustomToken();return c?{customToken:c}:{tokensToShow:[]}});return function(o){return a.apply(this,arguments)}}()),(0,Oc.j)(()=>this.tokensUpdaterService.setTokensLoading(!1)))}tryParseQueryAsBackendTokens(t){if(!this.searchQuery)return(0,w.of)([]);const i=new ft(this.tokensStoreService,this.assetsSelectorStateService,this.swapFormService,this.tokenConverters);if(t){const a=i.initList(this.tokensStoreService.lastQueriedTokens).applySortByTokenRank().toArray();return(0,w.of)(a)}return this.tokensService.fetchQueryTokensDynamicallyAndPatch(this.searchQuery,this.blockchain).pipe((0,C.T)(a=>a.size?i.initList(a).applySortByTokenRank().toArray():[]))}tryParseQueryAsCustomToken(){var t=this;return(0,S.A)(function*(){try{if(t.searchQuery&&t.blockchain){const i=t.blockchain===s.BLOCKCHAIN_NAME.SOLANA?t.searchQuery:t.searchQuery.toLowerCase(),a=yield Ic.Token.createToken({blockchain:t.blockchain,address:i});if(a?.name&&a?.symbol&&a?.decimals){let o=a.image;return o||(o=yield t.fetchTokenImage(a).catch(()=>Qe.c)),{...a,image:o,rank:0,amount:new E.A(NaN),price:0,available:t.isTokenAvailable(a),favorite:t.isTokenFavorite(a),tokenSecurity:yield t.getTokenSecurity(a)}}}}catch{}return null})()}fetchTokenImage(t){var i=this;return(0,S.A)(function*(){const a=Pc[t.blockchain];if(!a)return Qe.c;const c=`https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/${a}/assets/${s.BlockchainsInfo.isEvmBlockchainName(t.blockchain)?s.EvmWeb3Pure.toChecksumAddress(t.address):t.address}/logo.png`;return(0,D._)(i.httpClient.get(c).pipe((0,ue.W)(l=>(0,w.of)(200===l?.status?c:Qe.c))))})()}getFavoriteTokensByQuery(){const t=this.searchQuery.toLowerCase(),i=new ft(this.tokensStoreService,this.assetsSelectorStateService,this.swapFormService,this.tokenConverters);return"allChains"===this.assetsSelectorStateService.assetType?i.initList().applyShowFavoriteTokensIf(!0).applyFilterByQueryOnClient(t).applyDefaultSort().toArray():i.initList().applyShowFavoriteTokensIf(!0).applyFilterByChain(this.blockchain).applyFilterByQueryOnClient(t).applyDefaultSort().toArray()}getSortedTokens(){const t=new ft(this.tokensStoreService,this.assetsSelectorStateService,this.swapFormService,this.tokenConverters);return"allChains"===this.assetsSelectorStateService.assetType?this.tokenFilter===ne.A.ALL_CHAINS_TRENDING?t.initList().applyShowFavoriteTokensIf("favorite"===this.listType).toArray():this.tokenFilter===ne.A.ALL_CHAINS_GAINERS?t.initList().applyShowFavoriteTokensIf("favorite"===this.listType).applySortByMostGainer(this.tokenFilter).toArray():this.tokenFilter===ne.A.ALL_CHAINS_LOSERS?t.initList().applyShowFavoriteTokensIf("favorite"===this.listType).applySortByMostLoser(this.tokenFilter).toArray():t.initList().applyFilterOnlyWithBalancesAndTopTokens().applyShowFavoriteTokensIf("favorite"===this.listType).applyDefaultSort().toArray():t.initList().applyShowFavoriteTokensIf("favorite"===this.listType).applyFilterByChain(this.blockchain).applyDefaultSort().toArray()}isTokenFavorite(t){return this.tokensStoreService.favoriteTokens.some(i=>(0,A._f)(i,t))}isTokenAvailable(t){const i=this.oppositeToken();return!i||!(0,A._f)(i,t)}oppositeToken(){const i=this.swapFormService.inputValue["from"===this.assetsSelectorStateService.formType?"toToken":"fromToken"];return(0,ke.Tl)(i)?i:null}getTokenSecurity(t){return s.BlockchainsInfo.isSolanaBlockchainName(t.blockchain)?null:this.tokensService.fetchTokenSecurity(t.address,t.blockchain)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(Ie),e.KVO(Oe.W),e.KVO(ge.m),e.KVO(J.p),e.KVO(we.Y),e.KVO($e.V),e.KVO(tn.Qq),e.KVO(N.K),e.KVO(G.ew),e.KVO(Qt.F),e.KVO(Bc.s))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var Lc=d(99618),Fc=d(65485);let ni=(()=>{class n{get loading(){return this.tokensUpdaterService.tokensLoading}set listAnimationType(t){this._listAnimationType$.next(t)}get listType(){return this.tokensListTypeService.listType}get tokensToShow(){return this.tokensListStoreService.tokensToShow}constructor(t,i,a,o,c,l,u,p,m){this.tokensListStoreService=t,this.tokensListTypeService=i,this.tokensStoreService=a,this.tokensNetworkService=o,this.tokensNetworkStateService=c,this.assetsSelectorStateService=l,this.searchQueryService=u,this.destroy$=p,this.tokensUpdaterService=m,this.listScrollSubject$=new L.t(void 0),this._listAnimationType$=new L.t("shown"),this.listAnimationType$=this._listAnimationType$.asObservable(),this.subscribeOnScroll(),this.subscribeOnTokensToShow()}setListScrollSubject(t){t&&this.listScrollSubject$.next(t)}resetScrollToTop(){this.listScrollSubject$.value&&this.listScrollSubject$.value.scrollToIndex(0)}subscribeOnScroll(){this.listScrollSubject$.pipe((0,se.p)(t=>!!t),(0,I.n)(t=>t.renderedRangeStream),(0,se.p)(t=>!this.skipTokensFetching(t.end)),(0,z.Q)(this.destroy$)).subscribe(()=>{this.tokensUpdaterService.setTokensLoading(!0);const t=this.getTokensNetworkStateKey();this.tokensNetworkService.fetchNextPageOfTokensForSelectedAsset(t,()=>this.tokensUpdaterService.setTokensLoading(!1))})}getTokensNetworkStateKey(){return function $c(n){if(!s.BlockchainsInfo.isBlockchainName(n))throw new Error(`[assertTokensNetworkStateKey] ${n} is not TokensNetworkStateKey.`)}(this.assetsSelectorStateService.assetType),this.assetsSelectorStateService.assetType}subscribeOnTokensToShow(){this.assetsSelectorStateService.assetType$.pipe((0,Y.v)(this.assetsSelectorStateService.tokenFilter$),(0,z.Q)(this.destroy$)).subscribe(()=>{this.resetScrollToTop(),this.listAnimationType="hidden",setTimeout(()=>{this.listAnimationType="shown"})})}skipTokensFetching(t){const i=this.assetsSelectorStateService.assetType;if(!s.BlockchainsInfo.isBlockchainName(i))return!0;const a=this.tokensNetworkStateService.tokensNetworkState[i];return!(!this.loading&&!this.searchQueryService.query&&"favorite"!==this.listType&&a&&a.maxPage!==a.page)||this.tokensToShow.length-t>10}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(vt),e.KVO(Ie),e.KVO(J.p),e.KVO(Lc.A),e.KVO(Fc.h),e.KVO($e.V),e.KVO(Oe.W),e.KVO(G.ew),e.KVO(Qt.F))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();const Dc=[we.Y,Oe.W,Je.h,ht.s,Ie,vt,ni,G.ew,Wt.x];var Gc=d(89364);let Vc=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-small-blockchain-button"]],inputs:{blockchainItem:"blockchainItem",selectedAssetType:"selectedAssetType"},decls:2,vars:4,consts:[[1,"blockchain-button"],["width","30","height","30",1,"blockchain-button__img",3,"src","alt"]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.nrm(1,"img",1),e.k0s()),2&i&&(e.AVh("blockchain-button__selected",a.blockchainItem.name&&a.selectedAssetType===a.blockchainItem.name),e.R7$(1),e.Y8G("src",a.blockchainItem.icon,e.B4B)("alt",a.blockchainItem.label))},styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]   .blockchain-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:51px;height:51px;padding:5px;background:var(--primary-background);border-radius:35%}[_nghost-%COMP%]   .blockchain-button__img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .blockchain-button__selected[_ngcontent-%COMP%]{background:var(--tui-secondary-hover)}"],changeDetection:0})}return n})();var Hc=d(94998);function jc(n,r){if(1&n&&(e.qex(0),e.nrm(1,"app-blockchains-promo-badge",6),e.bVm()),2&n){const t=r.ngIf,i=e.XpG(2);e.R7$(1),e.Y8G("tag",t)("blockchain",i.blockchainItem.name)}}function Yc(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",1),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onItemClick(a.blockchainItem))}),e.nI1(2,"functionCall"),e.j41(3,"div",2),e.nrm(4,"img",3),e.j41(5,"span",4),e.EFF(6),e.k0s()(),e.DNE(7,jc,2,2,"ng-container",5),e.k0s(),e.bVm()}if(2&n){const t=r.ngLet,i=e.XpG();e.R7$(1),e.AVh("disabled",t)("selected",i.isSelected),e.Y8G("id",i.id)("disabled",t)("tuiHint",e.brH(2,11,i.blockchainItem,i.getHintText,i)),e.R7$(3),e.Y8G("src",i.blockchainItem.icon,e.B4B)("alt",i.blockchainItem.label),e.R7$(2),e.JRh(i.blockchainItem.label),e.R7$(1),e.Y8G("ngIf",!i.isMobile&&i.getBlockchainTag(i.blockchainItem))}}let Kc=(()=>{class n{get isAllChains(){return null===this.blockchainItem.name}get isSelected(){return this.selectedAssetType===this.blockchainItem.name||this.isAllChains&&"allChains"===this.selectedAssetType}get id(){return this.isAllChains?"allChainsSelector":`idPrefixNetwork_${this.blockchainItem.name}`}constructor(t,i){this.assetsSelectorService=t,this.blockchainsListService=i,this.isMobile=!1}isItemDisabled(t){return!this.isAllChains&&this.blockchainsListService.isDisabled(t)}getHintText(t){return this.isAllChains?"Show tokens of all chains.":this.blockchainsListService.getHintText(t)}getBlockchainTag(t){return this.isAllChains?null:Hc.j.getBlockchainTag(t)}onItemClick(t){this.isAllChains?this.assetsSelectorService.onAllChainsSelect():this.assetsSelectorService.onBlockchainSelect(t.name)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(we.Y),e.rXU(Je.h))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-assets-type-aside-element"]],inputs:{blockchainItem:"blockchainItem",selectedAssetType:"selectedAssetType",isMobile:"isMobile"},decls:2,vars:5,consts:[[4,"ngLet"],["tuiButton","","size","l","type","button","appearance","secondary",1,"asset-types-aside__list-element",3,"id","disabled","tuiHint","click"],[1,"icon"],[1,"icon-img",3,"src","alt"],[1,"icon-label"],[4,"ngIf"],[3,"tag","blockchain"]],template:function(i,a){1&i&&(e.DNE(0,Yc,8,15,"ng-container",0),e.nI1(1,"functionCall")),2&i&&e.Y8G("ngLet",e.brH(1,1,a.blockchainItem,a.isItemDisabled,a))},dependencies:[_.bT,M.N,re.SM,h.XZ,h.ZF,h.JL,h.AZ,ei,ti.J],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}@media (max-width: 651px){[_nghost-%COMP%]   .asset-types-aside__list-element[_ngcontent-%COMP%]{width:80px;height:62px;border-radius:16px}[_nghost-%COMP%]   .asset-types-aside__list-element[_ngcontent-%COMP%]     .t-content{justify-content:center}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}}[_nghost-%COMP%]   .asset-types-aside__list-element[_ngcontent-%COMP%]{width:169px;height:41px;border-radius:8px;cursor:pointer}[_nghost-%COMP%]   .asset-types-aside__list-element[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}[_nghost-%COMP%]   .asset-types-aside__list-element[_ngcontent-%COMP%]   app-blockchains-promo-badge[_ngcontent-%COMP%]{z-index:1;pointer-events:auto}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{background:var(--tui-secondary-hover);cursor:not-allowed}[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]     .t-wrapper{background:var(--tui-secondary-hover);border-radius:8px}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--tui-padding-xs);align-items:center;width:100%;height:60px;padding:5px;overflow:hidden}[_nghost-%COMP%]   .icon-label[_ngcontent-%COMP%]{font-size:12px;line-height:1}[_nghost-%COMP%]   .icon-img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}[_nghost-%COMP%]   app-blockchains-promo-badge[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}"],changeDetection:0})}return n})();function Uc(n,r){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"app-small-blockchain-button",7),e.bIt("click",function(){const o=e.eBV(t).$implicit,c=e.XpG(4);return e.Njj(c.onBlockchainItemClick(o))}),e.k0s()()}if(2&n){const t=r.$implicit,i=e.XpG(3).ngLet;e.R7$(1),e.Y8G("blockchainItem",t)("selectedAssetType",i)}}function Xc(n,r){if(1&n){const t=e.RV6();e.qex(0),e.DNE(1,Uc,2,2,"div",6),e.j41(2,"app-small-blockchain-button",7),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setBlockchainFilterAll())}),e.k0s(),e.bVm()}if(2&n){const t=r.ngLet,i=e.XpG(2).ngLet,a=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.slice(0,5)),e.R7$(1),e.Y8G("blockchainItem",a.allChainsSelectorItem)("selectedAssetType",i)}}function Wc(n,r){if(1&n&&(e.j41(0,"div",5),e.DNE(1,Xc,3,3,"ng-container",0),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngLet",e.bMT(2,1,t.blockchainsToShow$))}}function zc(n,r){1&n&&e.nrm(0,"app-search-bar",8),2&n&&e.Y8G("searchBarType","blockchains")}function Qc(n,r){if(1&n&&(e.qex(0),e.nrm(1,"app-assets-type-aside-element",12),e.bVm()),2&n){const t=r.$implicit,i=e.XpG(2).ngLet,a=e.XpG();e.R7$(1),e.Y8G("blockchainItem",t)("selectedAssetType",i)("isMobile",a.isMobile)}}function Zc(n,r){if(1&n&&(e.j41(0,"aside",9)(1,"tui-scrollbar",10)(2,"ul",11),e.nrm(3,"app-assets-type-aside-element",12),e.DNE(4,Qc,2,3,"ng-container",6),e.nI1(5,"async"),e.k0s()()()),2&n){const t=e.XpG().ngLet,i=e.XpG();e.AVh("large-iframe-asset",i.useLargeIframe),e.R7$(3),e.Y8G("blockchainItem",i.allChainsSelectorItem)("selectedAssetType",t)("isMobile",i.isMobile),e.R7$(1),e.Y8G("ngForOf",e.bMT(5,6,i.blockchainsToShow$))}}const Jc=function(n,r){return{"asset-types-aside__search-bar":n,"asset-types-aside__search-bar-mobile":r}};function qc(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",1),e.DNE(2,Wc,3,3,"div",2),e.DNE(3,zc,1,1,"app-search-bar",3),e.k0s(),e.DNE(4,Zc,6,8,"aside",4),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngClass",e.l_i(4,Jc,!t.isMobile,t.isMobile)),e.R7$(1),e.Y8G("ngIf",t.isMobile),e.R7$(1),e.Y8G("ngIf",!t.isMobile),e.R7$(1),e.Y8G("ngIf",!t.isMobile)}}let el=(()=>{class n{get blockchainsAmount(){return this.blockchainsListService.availableBlockchains.length}constructor(t,i,a,o,c,l){this.blockchainsListService=t,this.assetsSelectorStateService=i,this.assetsSelectorService=a,this.queryParamsService=o,this.headerStore=c,this.filterQueryService=l,this.allChainsSelectorItem=Gc.c,this.selectedAssetType$=this.assetsSelectorStateService.assetType$,this.formType=this.assetsSelectorStateService.formType,this.isMobile=this.headerStore.isMobile,this.blockchainTags=gt.g,this.selectedFilter$=this.filterQueryService.filterQuery$,this.blockchainsToShow$=this.blockchainsListService.assetsBlockchainsToShow$,this.useLargeIframe=this.queryParamsService.useLargeIframe}setBlockchainFilterAll(){this.filterQueryService.filterQuery=gt.g.ALL}onBlockchainItemClick(t){null===t.name?this.assetsSelectorService.onAllChainsSelect():this.assetsSelectorService.onBlockchainSelect(t.name)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Je.h),e.rXU($e.V),e.rXU(we.Y),e.rXU(he.w),e.rXU(j.X),e.rXU(ht.s))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-types-aside"]],decls:2,vars:3,consts:[[4,"ngLet"],[3,"ngClass"],["class","asset-types-aside__mobile-chain-type-row",4,"ngIf"],[3,"searchBarType",4,"ngIf"],["class","asset-types-aside",3,"large-iframe-asset",4,"ngIf"],[1,"asset-types-aside__mobile-chain-type-row"],[4,"ngFor","ngForOf"],[3,"blockchainItem","selectedAssetType","click"],[3,"searchBarType"],[1,"asset-types-aside"],[1,"asset-types-aside__scroll"],[1,"asset-types-aside__list"],[3,"blockchainItem","selectedAssetType","isMobile"]],template:function(i,a){1&i&&(e.DNE(0,qc,5,7,"ng-container",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.selectedAssetType$))},dependencies:[_.YU,_.Sq,_.bT,M.N,Vc,Ae.UB,mt,Kc,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{--tui-secondary: var(--io-background);--tui-padding: 0;--tui-height-l: 60px}.icon[_ngcontent-%COMP%]{width:24px;height:24px}.icon-label[_ngcontent-%COMP%]{font-size:12px;line-height:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--tui-padding-s);align-items:center;height:60px;padding:5px;overflow:hidden}.badge-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.asset-types-aside[_ngcontent-%COMP%]{width:191px;height:469px;padding-top:10px;padding-bottom:10px;background:var(--tui-secondary);border-bottom-right-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.asset-types-aside__scroll[_ngcontent-%COMP%]{min-height:450px;max-height:100%}.asset-types-aside__search-bar[_ngcontent-%COMP%]{width:191px;margin-bottom:2px}.asset-types-aside__search-bar[_ngcontent-%COMP%]     .tui-autofill{background-color:var(--tui-secondary);border-radius:0;border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.asset-types-aside__search-bar-mobile[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:space-between;height:51px}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]   app-filter-list-element[_ngcontent-%COMP%]     .t-wrapper{width:51px;height:51px}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]   app-filter-list-element[_ngcontent-%COMP%]     .t-content{color:var(--tui-text-02)}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]   app-filter-list-element[_ngcontent-%COMP%]     .filter-list-element__clicked-element .t-content{color:#000}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]   app-search-bar[_ngcontent-%COMP%]{flex:1}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]     .tui-autofill{height:51px}.asset-types-aside__search-bar-mobile__search-bar-container[_ngcontent-%COMP%]     .t-wrapper{background:var(--tui-base-01)}.asset-types-aside__list-element[_ngcontent-%COMP%]{width:169px;height:41px;border-radius:8px}.asset-types-aside__list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.asset-types-aside__list-element._disabled[_ngcontent-%COMP%]{cursor:not-allowed!important}.asset-types-aside__list-element._disabled[_ngcontent-%COMP%]   app-blockchains-promo-badge[_ngcontent-%COMP%]{z-index:1;pointer-events:auto}.asset-types-aside__list-element._disabled[_ngcontent-%COMP%]     .t-wrapper{background:var(--tui-secondary-hover)!important;opacity:1!important}.asset-types-aside__list-element[_ngcontent-%COMP%]     .t-content{justify-content:space-between}.asset-types-aside__blockchain-header[_ngcontent-%COMP%]{display:none}.asset-types-aside__mobile-chain-type-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:7px;width:100%}.open-selector[_ngcontent-%COMP%]{width:75px}.open-selector[_ngcontent-%COMP%]     app-rubic-button [tuiButton]{height:68px;border-radius:var(--tui-radius-m)}.open-selector[_ngcontent-%COMP%]     app-rubic-button [tuiButton]._pressed, .open-selector[_ngcontent-%COMP%]     app-rubic-button [tuiButton]:focus, .open-selector[_ngcontent-%COMP%]     app-rubic-button [tuiButton]:hover{background:transparent;box-shadow:none}.open-selector[_ngcontent-%COMP%]     app-rubic-button .t-wrapper{padding:0!important}@media (max-width: 651px){[_nghost-%COMP%]{display:flex;flex-direction:column;gap:16px}.icon-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.asset-types-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;width:100%;height:100%;padding:0;overflow-x:auto;background-color:unset;border-radius:unset}.asset-types-aside__list-element[_ngcontent-%COMP%]{width:80px;height:62px;border-radius:16px}.asset-types-aside__list-element[_ngcontent-%COMP%]     .t-content{justify-content:center}.asset-types-aside__list[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;gap:12px;align-items:center}.asset-types-aside__blockchain-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;padding:0 1rem}.asset-types-aside__blockchain-header-label[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:400;font-size:18px;line-height:18px;letter-spacing:.54px}.asset-types-aside__blockchain-header-expand[_ngcontent-%COMP%]{color:var(--tui-primary);font-weight:400;font-size:16px}.asset-types-aside__scroll[_ngcontent-%COMP%]{min-height:unset}.asset-types-aside__scroll[_ngcontent-%COMP%]     tui-scroll-controls{display:none}.asset-types-aside[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}}@media (max-width: 500px){.open-selector[_ngcontent-%COMP%]{width:57px}.open-selector[_ngcontent-%COMP%]     app-rubic-button [tuiButton]{height:52px}}.large-iframe-asset[_ngcontent-%COMP%]{height:430px}.large-iframe-asset[_ngcontent-%COMP%]   tui-scrollbar[_ngcontent-%COMP%]{min-height:410px}"],changeDetection:0})}return n})();const tl=(0,b.hZ)("listAnimation",[(0,b.kY)(":enter",[(0,b.iF)({opacity:.4}),(0,b.i0)("0.28s",(0,b.iF)({opacity:1}))]),(0,b.wk)("hidden",(0,b.iF)({opacity:"0.4"})),(0,b.wk)("shown",(0,b.iF)({opacity:"1"})),(0,b.kY)("hidden => shown",(0,b.i0)("0.28s ease-in-out"))]);var ii=d(92223),nl=d(45639),V=function(n){return n.TRUST_LIST="trust-list",n.SECURED="safe",n.LOW_RISK="low-risk",n.HIGH_RISK="high-risk",n.NO_INFO="no-info",n.UNSUPPORTED_BLOCKCHAIN="unsupported",n.SCAM_LIST="scam-list",n.PLATFORM_TOKEN="platform-token",n}(V||{});const ai={[V.TRUST_LIST]:"Token is in the Go+ Trust List",[V.SCAM_LIST]:"Token is in the Scam List",[V.SECURED]:"Token code has no elements of concern",[V.LOW_RISK]:"Token code contains some low risk elements of concern",[V.HIGH_RISK]:"Token code contains some high risk elements of concern",[V.NO_INFO]:"No information",[V.PLATFORM_TOKEN]:"Platform Native Token",[V.UNSUPPORTED_BLOCKCHAIN]:"Unsupported blockchain"},il=[s.BLOCKCHAIN_NAME.ETHEREUM,s.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN,s.BLOCKCHAIN_NAME.POLYGON,s.BLOCKCHAIN_NAME.ARBITRUM,s.BLOCKCHAIN_NAME.OPTIMISM,s.BLOCKCHAIN_NAME.AVALANCHE,s.BLOCKCHAIN_NAME.FANTOM,s.BLOCKCHAIN_NAME.OKE_X_CHAIN,s.BLOCKCHAIN_NAME.CRONOS,s.BLOCKCHAIN_NAME.GNOSIS,s.BLOCKCHAIN_NAME.TRON,s.BLOCKCHAIN_NAME.ZK_FAIR,s.BLOCKCHAIN_NAME.BASE];var oi=d(53517);const ri="0x3330BFb7332cA23cd071631837dC289B09C33333",si="0x10aaed289a7b1b0155bf4b86c862f297e84465e0";var al=d(97119),ci=d(14741),ol=d(90345);function rl(n,r){if(1&n){const t=e.RV6();e.j41(0,"tui-hosted-dropdown",3,4),e.bIt("openChange",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.isDropdownOpen=a)}),e.nrm(2,"button",5),e.k0s()}if(2&n){const t=e.sdS(1),i=e.XpG().ngLet,a=e.sdS(3),o=e.XpG();e.Y8G("content",a)("open",o.isDropdownOpen),e.R7$(2),e.Y8G("size",i?"m":"s")("pseudoHover",t.open||null)}}function sl(n,r){1&n&&(e.qex(0),e.nrm(1,"span",15),e.bVm()),2&n&&(e.R7$(1),e.Y8G("inlineSVG","assets/images/swaps/swaps-info/copy-icon.svg"))}function cl(n,r){if(1&n&&(e.j41(0,"span",16),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(1),e.JRh(t.token.address)}}function ll(n,r){1&n&&(e.j41(0,"span",17),e.nrm(1,"span",18),e.k0s()),2&n&&(e.R7$(1),e.Y8G("inlineSVG","assets/images/swaps/swaps-info/tick.svg"))}function dl(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.copyToClipboard())}),e.DNE(2,sl,2,1,"ng-container",11),e.j41(3,"span",12),e.EFF(4,"Copy address"),e.k0s(),e.DNE(5,cl,2,1,"ng-template",null,13,e.C5r),e.k0s(),e.DNE(7,ll,2,1,"ng-template",null,14,e.C5r),e.bVm()}if(2&n){const t=e.sdS(6),i=e.sdS(8),a=e.XpG(3);e.R7$(1),e.Y8G("tuiHint",t)("tuiHintShowDelay",50)("tuiHintHideDelay",100),e.R7$(1),e.Y8G("ngIf",!a.isCopyClicked)("ngIfElse",i)}}const pl=function(n){return{"dropdown-content__favorite_active":n}};function ul(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"tui-loader",19),e.bIt("click.stop",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.toggleFavorite())}),e.j41(2,"div",20),e.nrm(3,"div",21),e.j41(4,"span",12),e.EFF(5,"Save to favorites"),e.k0s()()(),e.bVm()}if(2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("showLoader",t.loadingFavoriteToken)("overlay",!0)("size","s"),e.R7$(2),e.Y8G("ngClass",e.eq3(5,pl,null==t.token?null:t.token.favorite))("inlineSVG","assets/images/icons/star2.svg")}}function _l(n,r){1&n&&(e.qex(0),e.j41(1,"span",26),e.EFF(2," Powered by Go+"),e.k0s(),e.bVm())}function ml(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",22)(2,"a",23)(3,"span",24),e.bIt("click",function(i){return i.stopPropagation()}),e.k0s(),e.j41(4,"span",25)(5,"span",12),e.EFF(6),e.k0s(),e.DNE(7,_l,3,0,"ng-container",9),e.k0s()()(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(2),e.Y8G("href",t.goPlusLabsLink,e.B4B),e.R7$(1),e.Y8G("inlineSVG","assets/images/swaps/swaps-info/token-security-"+t.securityStatus+"-icon.svg"),e.R7$(3),e.JRh(t.securityMessages[t.securityStatus]),e.R7$(1),e.Y8G("ngIf",t.securityStatus!==t.TokenSecurityStatus.PLATFORM_TOKEN)}}function hl(n,r){if(1&n&&(e.j41(0,"tui-data-list",6)(1,"div",7)(2,"div",8),e.DNE(3,dl,9,5,"ng-container",9),e.DNE(4,ul,6,7,"ng-container",9),e.DNE(5,ml,8,4,"ng-container",9),e.k0s()()()),2&n){const t=r.$implicit,i=e.XpG(2);e.Y8G("tuiActiveZoneParent",t),e.R7$(3),e.Y8G("ngIf",i.showCopyToClipboardOption),e.R7$(1),e.Y8G("ngIf",i.canBeAddedToFavorite),e.R7$(1),e.Y8G("ngIf",i.securityStatus!==i.TokenSecurityStatus.UNSUPPORTED_BLOCKCHAIN)}}function gl(n,r){if(1&n&&(e.qex(0),e.DNE(1,rl,3,4,"tui-hosted-dropdown",1),e.DNE(2,hl,6,4,"ng-template",null,2,e.C5r),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.canBeAddedToFavorite||t.showCopyToClipboardOption||t.securityStatus!==t.TokenSecurityStatus.UNSUPPORTED_BLOCKCHAIN)}}let fl=(()=>{class n{constructor(t,i,a,o,c,l,u){this.navigator=t,this.cdr=i,this.tokensStoreService=a,this.errorsService=o,this.authService=c,this.tokensListTypeService=l,this.headerStore=u,this.isDropdownOpen=!1,this.isCopyClicked=!1,this.loadingFavoriteToken=!1,this.TokenSecurityStatus=V,this.securityMessages=ai,this.isMobile$=this.headerStore.getMobileDisplayStatus()}get canBeAddedToFavorite(){return s.BlockchainsInfo.getChainType(this.token.blockchain)===this.authService.userChainType}get showCopyToClipboardOption(){return this.token.address&&"0x0000000000000000000000000000000000000000"!==this.token.address}get isNativeToken(){return this.token?.address===oi.DG}get isPlatformToken(){return(0,s.compareAddresses)(this.token.address,ri)||(0,s.compareAddresses)(this.token.address,si)}toggleFavorite(){this.token&&!this.loadingFavoriteToken&&(this.authService.userAddress?(this.loadingFavoriteToken=!0,(this.token.favorite?this.tokensStoreService.removeFavoriteToken(this.token):this.tokensStoreService.addFavoriteToken(this.token)).subscribe({error:()=>{this.errorsService.catch(new ci.m)},complete:()=>{this.loadingFavoriteToken=!1,this.token.favorite=!this.token.favorite,this.isDropdownOpen="favorite"!==this.tokensListTypeService.listType&&this.isDropdownOpen,this.cdr.detectChanges()}})):this.errorsService.catch(new ci.m))}get goPlusLabsLink(){return`${ol.m.GO_PLUS_LABS}/${this.token.blockchain===s.BLOCKCHAIN_NAME.TRON?"tron":s.blockchainId[this.token.blockchain]}/${(this.isNativeToken?s.wrappedNativeTokensList[this.token.blockchain]?.address:this.token.address)||""}`}copyToClipboard(){this.isCopyClicked=!0,this.navigator.clipboard.writeText(this.token.address),setTimeout(()=>{this.isCopyClicked=!1,this.cdr.markForCheck()},500)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(it.kW),e.rXU(e.gRc),e.rXU(J.p),e.rXU(Rt.b),e.rXU(ae.u),e.rXU(Ie),e.rXU(j.X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-dropdown-options-token"]],inputs:{token:"token",securityStatus:"securityStatus"},decls:2,vars:3,consts:[[4,"ngLet"],[3,"content","open","openChange",4,"ngIf"],["content",""],[3,"content","open","openChange"],["dropdown",""],["appearance","flat","icon","tuiIconMoreVertical","tuiIconButton","","type","button",3,"size","pseudoHover"],["tuiDataListDropdownManager","","size","m",3,"tuiActiveZoneParent"],[1,"dropdown-content__wrapper"],[1,"dropdown-content"],[4,"ngIf"],["tuiHintAppearance","onDark","tuiHintDirection","top-right",1,"dropdown-content__element",3,"tuiHint","tuiHintShowDelay","tuiHintHideDelay","click"],[4,"ngIf","ngIfElse"],[1,"auto-height"],["copyHint",""],["copyClicked",""],[1,"dropdown-content__copy-icon",3,"inlineSVG"],[1,"dropdown-content__container-address-hint"],[1,"dropdown-content__container-copied-container"],[1,"dropdown-content__container-copied-icon",3,"inlineSVG"],[1,"dropdown-content__favorite-container",3,"showLoader","overlay","size","click.stop"],[1,"dropdown-content__element"],[1,"dropdown-content__favorite",3,"ngClass","inlineSVG"],[1,"dropdown-content__security-container"],["target","_blank",1,"dropdown-content__element","security-content",3,"href"],["tuiHintAppearance","onDark","tuiHintDirection","top-right","rel","noopener noreferrer","target","_blank",1,"dropdown-content__security-container-icon",3,"inlineSVG","click"],[1,"dropdown-content__security-container-label"],[1,"dropdown-content__security-label-powered-by","auto-height"]],template:function(i,a){1&i&&(e.DNE(0,gl,4,1,"ng-container",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.isMobile$))},dependencies:[_.YU,_.bT,K.ll,h.XZ,h.ZF,h.JL,h.AZ,re.SM,Jn.uE,qn.Y,ut.o2,_t.jT,M.N,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.dropdown-content__wrapper[_ngcontent-%COMP%]{display:flex;gap:var(--tui-padding-s);padding:var(--tui-padding-xs)}.dropdown-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:209px;padding:var(--tui-padding-xs) var(--tui-padding-xs)}.dropdown-content[_ngcontent-%COMP%]   .auto-height[_ngcontent-%COMP%]{height:auto!important}.dropdown-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}.dropdown-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]     *{height:100%}.dropdown-content[_ngcontent-%COMP%]:hover{background:var(--tui-secondary);border-radius:var(--tui-radius-m)}.dropdown-content__element[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:5px;color:#fff;font-size:13px}.dropdown-content__element[_ngcontent-%COMP%]:active{padding:5px}.dropdown-content__element[_ngcontent-%COMP%]:hover{text-decoration:none;background:var(--tui-base-01);border-radius:var(--tui-radius-s)}.dropdown-content__element[_ngcontent-%COMP%]     svg{width:20px;height:20px}.dropdown-content__favorite_active[_ngcontent-%COMP%]     path{stroke:var(--tui-primary)}.dropdown-content__favorite-container[_ngcontent-%COMP%]{height:16px}.dropdown-content__favorite-container[_ngcontent-%COMP%]     .t-loader{left:-65%;min-width:unset}.dropdown-content__security-label-powered-by[_ngcontent-%COMP%]{color:#9a9ab0;font-weight:400}.dropdown-content__security-container-label[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;justify-content:center;line-height:1.2}"],changeDetection:0})}return n})(),vl=(()=>{class n{transform(t,i,a){return"allChains"!==a||i!==ne.A.ALL_CHAINS_GAINERS&&i!==ne.A.ALL_CHAINS_LOSERS||!(0,ke.Dy)(t)?null:new E.A(t.priceChange24h).dp(2).toNumber()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"showPriceChange",type:n,pure:!0})}return n})(),bl=(()=>{class n{transform(t,i){return t.length<=i?t:t.slice(0,i)+"..."}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"shortenText",type:n,pure:!0})}return n})(),Cl=(()=>{class n{transform(t){return"string"==typeof t?t.replaceAll("-",""):Math.abs(t).toString()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"mathAbs",type:n,pure:!0})}return n})();function kl(n,r){if(1&n){const t=e.RV6();e.j41(0,"img",16),e.bIt("error",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onImageError(a))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("src",t.BLOCKCHAIN_ICON[t.token.blockchain]||t.DEFAULT_TOKEN_IMAGE,e.B4B)("alt",t.token.blockchain)}}function Sl(n,r){if(1&n&&(e.j41(0,"div",17)(1,"div",18),e.nrm(2,"div",19),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("inlineSVG","assets/images/swaps/swaps-info/token-security-"+t.securityStatus+"-icon.svg")}}function yl(n,r){if(1&n&&(e.j41(0,"div",21)(1,"span",22),e.EFF(2,"\u25be"),e.k0s(),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mathAbs"),e.k0s()()),2&n){const t=e.XpG().ngLet;e.AVh("green",t>=0)("red",t<0),e.R7$(1),e.xc7("transform",t>0&&"rotateZ(180deg)"),e.R7$(3),e.JRh(e.bMT(5,7,t+"%"))}}function wl(n,r){if(1&n&&(e.qex(0),e.DNE(1,yl,6,9,"div",20),e.bVm()),2&n){const t=r.ngLet;e.R7$(1),e.Y8G("ngIf",null!==t)}}function Tl(n,r){if(1&n&&(e.EFF(0),e.nI1(1,"bigNumberFormat")),2&n){const t=e.XpG(2);e.JRh(e.bMT(1,1,t.token.amount))}}function xl(n,r){if(1&n&&(e.j41(0,"div",24)(1,"span",25),e.EFF(2),e.nI1(3,"shortenAmount"),e.nI1(4,"bigNumberFormat"),e.k0s(),e.DNE(5,Tl,2,3,"ng-template",null,26,e.C5r),e.k0s()),2&n){const t=e.sdS(6),i=e.XpG();e.R7$(1),e.Y8G("tuiHint",t),e.R7$(1),e.JRh(e.brH(3,2,e.bMT(4,6,i.token.amount),6,4))}}function Al(n,r){if(1&n&&(e.j41(0,"span",27),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.SpI("~",t.token.amount.multipliedBy(t.token.price).toFixed(2)," $")}}let li=(()=>{class n{get isNativeToken(){return this.token.address===oi.DG}get isPlatformToken(){return(0,s.compareAddresses)(this.token.address,ri)||(0,s.compareAddresses)(this.token.address,si)}get securityStatus(){return il.includes(this.token.blockchain)?this.isPlatformToken?V.PLATFORM_TOKEN:this.isNativeToken||this.token.tokenSecurity&&this.token.tokenSecurity.trust_list?V.TRUST_LIST:!this.token.tokenSecurity||this.token.tokenSecurity&&!1===this.token.tokenSecurity.has_info?V.NO_INFO:this.token.tokenSecurity.fake_token||this.token.tokenSecurity.is_airdrop_scam?V.SCAM_LIST:0===this.token.tokenSecurity.risky_security_items&&0===this.token.tokenSecurity.attention_security_items?V.SECURED:this.token.tokenSecurity.risky_security_items>0?V.HIGH_RISK:V.LOW_RISK:V.UNSUPPORTED_BLOCKCHAIN}constructor(t,i){this.tokensService=t,this.isMobile=i,this.balanceLoading=!1,this.showAll=!1,this.selectToken=new e.bkB,this.BLOCKCHAIN_ICON=al._,this.DEFAULT_TOKEN_IMAGE=Qe.c,this.TokenSecurityStatus=V,this.securityMessages=ai}onImageError(t){this.tokensService.onTokenImageError(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ge.m),e.rXU(nt.Td))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-tokens-list-element"]],inputs:{token:"token",balanceLoading:"balanceLoading",showAll:"showAll",tokenFilter:"tokenFilter",assetType:"assetType"},outputs:{selectToken:"selectToken"},decls:21,vars:23,consts:[[1,"token-card-container"],[1,"token-card",3,"click"],[1,"token-card__image-container"],["loading","lazy",1,"token-card__image-container-token",3,"src","alt","error"],["class","token-card__image-container-blockchain","loading","lazy",3,"src","alt","error",4,"ngIf"],[1,"token-card__symbol-name-container"],[1,"token-card__symbol-container"],[1,"token-card__symbol"],["class","token-card__actions",4,"ngIf"],[1,"token-card__name"],[1,"token-card__right"],[4,"ngLet"],[1,"token-card__amount-container"],["class","token-card__amount",4,"ngIf"],["class","token-card__dollar-amount",4,"ngIf"],[3,"token","securityStatus"],["loading","lazy",1,"token-card__image-container-blockchain",3,"src","alt","error"],[1,"token-card__actions"],[1,"token-card__security-container"],[1,"token-card__security-container-security-icon",3,"inlineSVG"],["class","token-card__price-change-container",3,"green","red",4,"ngIf"],[1,"token-card__price-change-container"],[1,"arrow"],[1,"price-change"],[1,"token-card__amount"],["tuiHintDirection","top-left","tuiHintAppearance","onDark",3,"tuiHint"],["tokenAmountTooltip",""],[1,"token-card__dollar-amount"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1),e.bIt("click",function(){return a.selectToken.emit(a.token)}),e.j41(2,"div",2)(3,"img",3),e.bIt("error",function(c){return a.onImageError(c)}),e.k0s(),e.DNE(4,kl,1,2,"img",4),e.k0s(),e.j41(5,"div",5)(6,"div",6)(7,"span",7),e.EFF(8),e.nI1(9,"shortenText"),e.k0s(),e.DNE(10,Sl,3,1,"div",8),e.k0s(),e.j41(11,"span",9),e.EFF(12),e.nI1(13,"shortenText"),e.k0s()(),e.j41(14,"div",10),e.DNE(15,wl,2,1,"ng-container",11),e.nI1(16,"showPriceChange"),e.j41(17,"div",12),e.DNE(18,xl,7,8,"div",13),e.DNE(19,Al,2,1,"span",14),e.k0s()()(),e.nrm(20,"app-dropdown-options-token",15),e.k0s()),2&i&&(e.R7$(3),e.Y8G("src",a.token.image||a.DEFAULT_TOKEN_IMAGE,e.B4B)("alt",a.token.name),e.R7$(1),e.Y8G("ngIf",a.showAll),e.R7$(4),e.JRh(e.i5U(9,13,a.token.symbol,10)),e.R7$(2),e.Y8G("ngIf",a.securityStatus!==a.TokenSecurityStatus.UNSUPPORTED_BLOCKCHAIN),e.R7$(2),e.JRh(e.i5U(13,16,a.token.name,15)),e.R7$(3),e.Y8G("ngLet",e.brH(16,19,a.token,a.tokenFilter,a.assetType)),e.R7$(2),e.AVh("tui-skeleton",a.balanceLoading),e.R7$(1),e.Y8G("ngIf",a.token.amount.gt(0)),e.R7$(1),e.Y8G("ngIf",a.token.amount.gt(0)&&a.token.price),e.R7$(1),e.Y8G("token",a.token)("securityStatus",a.securityStatus))},dependencies:[_.bT,M.N,fl,h.XZ,h.ZF,h.JL,h.AZ,K.ll,ve.p,Se.W,vl,bl,Cl],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.token-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.token-card[_ngcontent-%COMP%]{display:flex;align-items:center;width:310px;padding:var(--tui-padding-xs) var(--tui-padding-s)}.token-card[_ngcontent-%COMP%]:hover{background:var(--tui-secondary);border-radius:var(--tui-radius-m)}.token-card__image-container[_ngcontent-%COMP%]{position:relative;display:flex;margin-right:10px}.token-card__image-container-token[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:25%}.token-card__image-container-blockchain[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-5px;width:16px;height:16px;border-radius:25%}.token-card__symbol-name-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:95px;margin-right:40px;white-space:nowrap}.token-card__symbol-container[_ngcontent-%COMP%]{display:flex;gap:10px}.token-card__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px}.token-card__actions[_ngcontent-%COMP%]{display:flex;gap:5px}.token-card__actions_clickable[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{cursor:pointer}.token-card__actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:16px;height:16px}.token-card__actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]     *{width:100%;height:100%}.token-card__name[_ngcontent-%COMP%], .token-card__dollar-amount[_ngcontent-%COMP%]{color:var(--tui-text-03);font-size:12px;line-height:12px;white-space:nowrap}.token-card__price-change-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-around;width:63px;max-height:16px;margin-right:10px;padding:0 2px;color:#fff;font-weight:700;font-size:10px;border-radius:5px}.token-card[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background:#1aa773}.token-card[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background:#a93d3f}.token-card__amount-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;margin-right:5px}@media (max-width: 651px){.token-card[_ngcontent-%COMP%]{gap:var(--tui-padding-s);width:290px;padding:var(--tui-padding-s);background:var(--io-background);border-radius:var(--tui-radius-m)}.token-card[_ngcontent-%COMP%]:hover{background:var(--tui-base-01)}.token-card__image-container[_ngcontent-%COMP%]{display:flex}.token-card__image-container-token[_ngcontent-%COMP%]{width:35px;height:35px}.token-card__symbol-name-container[_ngcontent-%COMP%]{margin-right:0}.token-card__symbol[_ngcontent-%COMP%]{font-weight:500;font-size:18px;letter-spacing:.54px}.token-card__amount[_ngcontent-%COMP%]{font-weight:500;font-size:14px;letter-spacing:.54px}}"],changeDetection:0})}return n})(),Ol=(()=>{class n{constructor(t,i){this.context=t,this.mobileNativeService=i,this.token=t.data.token}onAccept(){this.mobileNativeService.forceClose(),this.context.completeWith(!0)}onDecline(){this.context.completeWith(!1)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Mt.su),e.rXU(ii.c))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["polymorpheus-custom-token-warning-modal"]],decls:11,vars:9,consts:[[1,"buttons-container"],["fullWidth","","appearance","outline",3,"click"],["fullWidth","","bordered","",3,"click"]],template:function(i,a){1&i&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",0)(5,"app-rubic-button",1),e.bIt("click",function(){return a.onDecline()}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"app-rubic-button",2),e.bIt("click",function(){return a.onAccept()}),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.bVm()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,3,"modals.confirmImportModal.text")),e.R7$(4),e.JRh(e.bMT(7,5,"common.cancel")),e.R7$(3),e.JRh(e.bMT(10,7,"common.OK")))},dependencies:[En.l,oe.D9],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;text-align:center}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:15px}.buttons-container[_ngcontent-%COMP%]   app-rubic-button[_ngcontent-%COMP%]{width:150px}@media (max-width: 651px){[_nghost-%COMP%]   span[_ngcontent-%COMP%]{padding:0 25px}.buttons-container[_ngcontent-%COMP%]{padding:0 25px}}"],changeDetection:0})}return n})(),di=(()=>{class n{constructor(t,i,a,o,c){this.dialogService=t,this.injector=i,this.translateService=a,this.authService=o,this.assetsSelectorService=c}openModal(t){var i=this;this.dialogService.showDialog(Ol,{data:{token:t},dismissible:!0,label:this.translateService.instant("modals.confirmImportModal.title"),size:"s",fitContent:!0},this.injector).pipe((0,I.n)(function(){var a=(0,S.A)(function*(o){if(o){try{if(i.authService.userAddress&&i.authService.userChainType===s.BlockchainsInfo.getChainType(t.blockchain)){const c=yield bn.Injector.web3PublicService.getWeb3Public(t.blockchain).getTokenBalance(i.authService.userAddress,t.address);return{...t,amount:s.Web3Pure.fromWei(c,t.decimals)}}}catch{}return t}});return function(o){return a.apply(this,arguments)}}())).subscribe(a=>{a&&this.assetsSelectorService.onAssetSelect(a)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(ce.B),e.KVO(e.zZn),e.KVO(oe.c$),e.KVO(ae.u),e.KVO(we.Y))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();function Il(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const a=e.XpG().ngLet,o=e.XpG();return e.Njj(o.onImportClick(a))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG().ngLet;e.Y8G("disabled",!t.available),e.R7$(1),e.SpI(" Import ",t.symbol," ")}}const Pl=function(n){return{"custom-token__element_disabled":n}};function Ml(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3),e.nrm(2,"app-tokens-list-element",4),e.k0s(),e.DNE(3,Il,2,2,"button",5),e.k0s()),2&n){const t=r.ngLet,i=e.XpG(),a=e.sdS(3);e.R7$(1),e.Y8G("ngClass",e.eq3(6,Pl,!t.available)),e.R7$(1),e.Y8G("token",t)("tokenFilter",i.tokenFilter)("assetType",i.assetType)("tuiHint",t.available?null:a),e.R7$(1),e.Y8G("ngIf",t.available)}}function Nl(n,r){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"modals.tokensListModal.unsupportedPairsHint")," "))}let El=(()=>{class n{get tokenFilter(){return this.assetsSelectorStateService.tokenFilter}get assetType(){return this.assetsSelectorStateService.assetType}constructor(t,i,a){this.customTokenService=t,this.tokensListStoreService=i,this.assetsSelectorStateService=a,this.customToken$=this.tokensListStoreService.customToken$}onImportClick(t){this.customTokenService.openModal(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(di),e.rXU(vt),e.rXU($e.V))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-custom-token"]],features:[e.Jv_([di])],decls:4,vars:3,consts:[["class","custom-token",4,"ngLet"],["disabledTokenHint",""],[1,"custom-token"],[1,"custom-token__element",3,"ngClass"],["tuiHintAppearance","error","tuiHintDirection","bottom-right",3,"token","tokenFilter","assetType","tuiHint"],["tuiButton","","appearance","secondary","type","button","size","m","class","custom-token__button",3,"disabled","click",4,"ngIf"],["tuiButton","","appearance","secondary","type","button","size","m",1,"custom-token__button",3,"disabled","click"]],template:function(i,a){1&i&&(e.DNE(0,Ml,4,8,"div",0),e.nI1(1,"async"),e.DNE(2,Nl,3,3,"ng-template",null,1,e.C5r)),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.customToken$))},dependencies:[_.YU,_.bT,M.N,re.SM,h.XZ,h.ZF,h.JL,h.AZ,li,_.Jj,oe.D9],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{width:100%}.custom-token__element[_ngcontent-%COMP%]{padding:5px 0;cursor:default}.custom-token__element_disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.4}.custom-token__element_disabled[_ngcontent-%COMP%]:hover{background-color:unset}.custom-token__button[_ngcontent-%COMP%]{display:block;width:100%;margin-top:15px}.custom-token__button[_ngcontent-%COMP%]     .t-wrapper{background-color:var(--tui-primary)}.custom-token__button[_ngcontent-%COMP%]     .t-wrapper span{height:100%;font-size:14px}"],changeDetection:0})}return n})();function Rl(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",1),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.switchMode())}),e.nrm(1,"img",2),e.k0s()}if(2&n){const t=r.ngLet;e.Y8G("tuiHint",t.hintText),e.R7$(1),e.Y8G("src","assets/images/icons/"+t.icon,e.B4B)("alt","Switch list")}}let pi=(()=>{class n{constructor(t){this.tokensListTypeService=t,this.buttonData$=this.tokensListTypeService.listType$.pipe((0,C.T)(i=>({icon:"default"===i?"star.svg":"back.svg",hintText:"default"===i?"List of favorite tokens":"Back to whole tokens list"})))}switchMode(){this.tokensListTypeService.switchListType()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ie))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-switch-list-type-button"]],decls:2,vars:3,consts:[["tuiIconButton","","size","m","appearance","secondary","type","button","tuiHintAppearance","onDark",3,"tuiHint","click",4,"ngLet"],["tuiIconButton","","size","m","appearance","secondary","type","button","tuiHintAppearance","onDark",3,"tuiHint","click"],[1,"image",3,"src","alt"]],template:function(i,a){1&i&&(e.DNE(0,Rl,2,3,"button",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.buttonData$))},dependencies:[M.N,re.SM,h.XZ,h.ZF,h.JL,h.AZ,_.Jj],styles:["[_nghost-%COMP%]{--tui-secondary: var(--tui-base-01)}.image[_ngcontent-%COMP%]{width:16px;height:16px}"],changeDetection:0})}return n})();var Bl=d(31861);function Ll(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"modals.tokensListModal.noSearchData")," "))}function $l(n,r){if(1&n){const t=e.RV6();e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.j41(3,"button",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.switchToDefaultList())}),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.bVm()}2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,2,"modals.tokensListModal.noFavoriteData")," "),e.R7$(3),e.SpI(" ",e.bMT(5,4,"modals.tokensListModal.backToTokens")," "))}function Fl(n,r){if(1&n&&(e.DNE(0,$l,6,6,"ng-container",1),e.nI1(1,"async")),2&n){const t=e.XpG(),i=e.sdS(7);e.Y8G("ngIf",e.bMT(1,2,t.user$))("ngIfElse",i)}}function Dl(n,r){if(1&n){const t=e.RV6();e.EFF(0),e.nI1(1,"translate"),e.j41(2,"button",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.openAuthModal())}),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&n&&(e.SpI(" ",e.bMT(1,2,"modals.tokensListModal.unauthorized")," "),e.R7$(3),e.SpI(" ",e.bMT(4,4,"navigation.login")," "))}let Gl=(()=>{class n{constructor(t,i,a,o){this.tokensListTypeService=t,this.searchQueryService=i,this.authService=a,this.walletsModalService=o,this.user$=this.authService.currentUser$,this.hasSearchQuery$=this.searchQueryService.query$.pipe((0,C.T)(c=>!!c.length)),this.listType$=this.tokensListTypeService.listType$}switchToDefaultList(){this.tokensListTypeService.switchListType()}openAuthModal(){this.walletsModalService.open$()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Ie),e.rXU(Oe.W),e.rXU(ae.u),e.rXU(Bl.R))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-empty-list"]],decls:8,vars:6,consts:[[1,"nothing-to-show-message"],[4,"ngIf","ngIfElse"],["noFavoriteTokens",""],["noAuth",""],[1,"nothing-to-show-message__link",3,"click"]],template:function(i,a){if(1&i&&(e.j41(0,"div",0),e.DNE(1,Ll,3,3,"ng-container",1),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,Fl,2,4,"ng-template",null,2,e.C5r),e.DNE(6,Dl,5,6,"ng-template",null,3,e.C5r),e.k0s()),2&i){const o=e.sdS(5);e.R7$(1),e.Y8G("ngIf",e.bMT(2,2,a.hasSearchQuery$)||"default"===e.bMT(3,4,a.listType$))("ngIfElse",o)}},dependencies:[_.bT,_.Jj,oe.D9],styles:[".nothing-to-show-message[_ngcontent-%COMP%]{font-size:16px;text-align:center;opacity:.6}.nothing-to-show-message__link[_ngcontent-%COMP%]{color:var(--tui-primary);font-size:16px;cursor:pointer}"],changeDetection:0})}return n})();const Vl=[{img:"assets/images/icons/all-tokens.svg",label:"All Tokens",value:ne.A.ALL_CHAINS_ALL_TOKENS},{img:"assets/images/icons/trending.svg",label:"Trending",value:ne.A.ALL_CHAINS_TRENDING},{img:"assets/images/icons/gainers.svg",label:"Gainers",value:ne.A.ALL_CHAINS_GAINERS},{img:"assets/images/icons/losers.svg",label:"Losers",value:ne.A.ALL_CHAINS_LOSERS}];function Hl(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.prev())}),e.nrm(1,"img",8),e.k0s()}}function jl(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.selectFilter(a))}),e.j41(1,"p",11),e.EFF(2),e.k0s(),e.nrm(3,"img",12),e.k0s()}if(2&n){const t=e.XpG().$implicit,i=e.XpG(2);e.AVh("token-filter__active",i.tokenFilter===t.value),e.Y8G("draggable",!1),e.R7$(2),e.JRh(t.label),e.R7$(1),e.Y8G("src",t.img,e.B4B)}}function Yl(n,r){1&n&&(e.qex(0),e.DNE(1,jl,4,5,"div",9),e.bVm())}function Kl(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.next())}),e.nrm(1,"img",8),e.k0s()}}function Ul(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",1),e.DNE(1,Hl,2,0,"button",2),e.j41(2,"tui-carousel",3,4),e.bIt("indexChange",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.currentIdx=a)}),e.DNE(4,Yl,2,0,"ng-container",5),e.k0s(),e.DNE(5,Kl,2,0,"button",6),e.k0s()}if(2&n){const t=r.ngLet,i=e.XpG();e.R7$(1),e.Y8G("ngIf",!t),e.R7$(1),e.Y8G("draggable",!1)("itemsCount",i.ITEMS_PER_SLIDE)("index",i.currentIdx),e.R7$(2),e.Y8G("ngForOf",i.TOKEN_FILTERS_UI),e.R7$(1),e.Y8G("ngIf",!t)}}let Xl=(()=>{class n{constructor(t){this.headerStore=t,this.onSelect=new e.bkB,this.ITEMS_PER_SLIDE=3,this.TOKEN_FILTERS_UI=Vl,this.isMobile$=this.headerStore.getMobileDisplayStatus().pipe((0,W.M)(i=>this.ITEMS_PER_SLIDE=i?4:3)),this.currentIdx=0}prev(){this.currentIdx&&(this.currentIdx-=1)}next(){this.currentIdx>=this.TOKEN_FILTERS_UI.length-this.ITEMS_PER_SLIDE||(this.currentIdx+=1)}selectFilter(t){this.onSelect.emit(t.value)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(j.X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-tokens-list-filters"]],inputs:{tokenFilter:"tokenFilter"},outputs:{onSelect:"onSelect"},decls:2,vars:3,consts:[["class","filters-wrapper",4,"ngLet"],[1,"filters-wrapper"],["class","filters-wrapper__prev-btn",3,"click",4,"ngIf"],[3,"draggable","itemsCount","index","indexChange"],["carousel",""],[4,"ngFor","ngForOf"],["class","filters-wrapper__next-btn",3,"click",4,"ngIf"],[1,"filters-wrapper__prev-btn",3,"click"],["src","assets/images/icons/chevron.svg","alt","prev-button"],["class","token-filter",3,"draggable","token-filter__active","click",4,"tuiItem"],[1,"token-filter",3,"draggable","click"],[1,"token-filter__text"],["alt","token-filter",1,"token-filter__icon",3,"src"],[1,"filters-wrapper__next-btn",3,"click"]],template:function(i,a){1&i&&(e.DNE(0,Ul,6,6,"div",0),e.nI1(1,"async")),2&i&&e.Y8G("ngLet",e.bMT(1,1,a.isMobile$))},dependencies:[_.Sq,_.bT,M.N,Be.ep,Be.qE,An.$,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]   .filters-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end;justify-content:space-between;gap:5px;width:100%;max-width:375px;height:56px;padding:5px;background-color:var(--io-background)}@media (max-width: 651px){[_nghost-%COMP%]   .filters-wrapper[_ngcontent-%COMP%]{margin-top:5px;margin-left:5px;background-color:transparent;border-radius:var(--tui-radius-m)}}[_nghost-%COMP%]   .filters-wrapper__next-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .filters-wrapper__prev-btn[_ngcontent-%COMP%]{padding:11px 5px;background-color:#2c2d3e;border-radius:var(--tui-radius-s)}[_nghost-%COMP%]   .filters-wrapper__next-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .filters-wrapper__prev-btn[_ngcontent-%COMP%]:hover{background-color:var(--tui-secondary-hover)}[_nghost-%COMP%]   .filters-wrapper__next-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(270deg)}[_nghost-%COMP%]   .filters-wrapper__prev-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(90deg)}[_nghost-%COMP%]   .token-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:7px;width:155%;height:41px;margin:0 auto 0 -18px;background:#2c2d3e;border-radius:8px;transition:all .1s}@media (max-width: 767px){[_nghost-%COMP%]   .token-filter[_ngcontent-%COMP%]{gap:2px}}[_nghost-%COMP%]   .token-filter[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover);cursor:pointer}[_nghost-%COMP%]   .token-filter__active[_ngcontent-%COMP%]{background:var(--tui-secondary-active)}[_nghost-%COMP%]   .token-filter__text[_ngcontent-%COMP%]{line-height:15px}@media (max-width: 767px){[_nghost-%COMP%]   .token-filter__text[_ngcontent-%COMP%]{font-size:11px;white-space:no-wrap;text-align:center}}"],changeDetection:0})}return n})();function Wl(n,r){1&n&&(e.j41(0,"div",6),e.nrm(1,"app-search-bar",7)(2,"app-switch-list-type-button"),e.k0s()),2&n&&(e.R7$(1),e.Y8G("searchBarType","tokens"))}function zl(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-tokens-list-filters",8),e.bIt("onSelect",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.selectTokenFilter(a))}),e.k0s()}if(2&n){const t=e.XpG().ngLet;e.Y8G("tokenFilter",t.tokenFilter)}}function Ql(n,r){1&n&&(e.j41(0,"div",14),e.nrm(1,"app-empty-list"),e.k0s())}const Zl=function(n){return{"tokens-list__item_disabled":n}};function Jl(n,r){if(1&n){const t=e.RV6();e.j41(0,"li",18)(1,"app-tokens-list-element",19),e.bIt("selectToken",function(){const o=e.eBV(t).$implicit,c=e.XpG(5);return e.Njj(c.onTokenSelect(o))}),e.nI1(2,"async"),e.k0s()()}if(2&n){const t=r.$implicit,i=e.XpG(4).ngLet,a=e.XpG(),o=e.sdS(4);e.Y8G("ngClass",e.eq3(9,Zl,!t.available))("tuiHint",t.available?null:o),e.R7$(1),e.Y8G("token",t)("showAll",a.isAllChainsOpened)("balanceLoading",e.bMT(2,7,a.isBalanceLoading$))("tokenFilter",i.tokenFilter)("assetType",a.assetType)}}const ql=function(n){return{"tokens-scrollbar__empty":n}};function ed(n,r){if(1&n&&(e.j41(0,"ul",15),e.nI1(1,"async"),e.j41(2,"cdk-virtual-scroll-viewport",16),e.DNE(3,Jl,3,11,"li",17),e.k0s()()),2&n){const t=e.XpG(2).ngLet,i=e.XpG().ngLet,a=e.XpG();e.Y8G("@listAnimation",e.bMT(1,7,a.listAnimationState$)),e.R7$(2),e.xc7("overflow",t?"hidden":"auto"),e.Y8G("ngClass",e.eq3(9,ql,!(null!=i.tokensToShow&&i.tokensToShow.length))),e.R7$(1),e.Y8G("cdkVirtualForOf",i.tokensToShow)("cdkVirtualForTemplateCacheSize",0)("cdkVirtualForTrackBy",a.trackByFn)}}function td(n,r){if(1&n&&(e.qex(0),e.DNE(1,Ql,2,0,"div",12),e.DNE(2,ed,4,11,"ng-template",null,13,e.C5r),e.bVm()),2&n){const t=e.sdS(3),i=e.XpG(2).ngLet;e.R7$(1),e.Y8G("ngIf",!(null!=i.tokensToShow&&i.tokensToShow.length))("ngIfElse",t)}}function nd(n,r){1&n&&e.nrm(0,"app-custom-token")}function id(n,r){if(1&n&&(e.j41(0,"tui-loader",9),e.DNE(1,td,4,2,"ng-container",10),e.nI1(2,"async"),e.DNE(3,nd,1,0,"ng-template",null,11,e.C5r),e.k0s()),2&n){const t=r.ngLet,i=e.sdS(4),a=e.XpG(2);e.Y8G("showLoader",t)("overlay",!0),e.R7$(1),e.Y8G("ngIf",null===e.bMT(2,4,a.customToken$))("ngIfElse",i)}}const ad=function(n,r){return{"large-iframe-token-container":n,"tokens-container__all-chains":r}};function od(n,r){if(1&n&&(e.qex(0),e.DNE(1,Wl,3,1,"div",2),e.DNE(2,zl,1,1,"app-tokens-list-filters",3),e.j41(3,"tui-scrollbar",4),e.DNE(4,id,5,6,"tui-loader",5),e.nI1(5,"async"),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",!t.isMobile),e.R7$(1),e.Y8G("ngIf",t.isAllChainsOpened),e.R7$(1),e.Y8G("ngClass",e.l_i(6,ad,t.useLargeIframe,t.isAllChainsOpened)),e.R7$(1),e.Y8G("ngLet",e.bMT(5,4,t.tokensLoading$))}}function rd(n,r){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"modals.tokensListModal.clearParamsHint")," "))}const sd=function(n,r){return{tokensToShow:n,tokenFilter:r}};let cd=(()=>{class n{set virtualScroll(t){this.tokensListService.setListScrollSubject(t)}get isAllChainsOpened(){return"allChains"===this.assetsSelectorStateService.assetType}get assetType(){return this.assetsSelectorStateService.assetType}constructor(t,i,a,o,c,l,u,p,m,g,f,y){this.tokensListService=t,this.tokensListStoreService=i,this.mobileNativeService=a,this.assetsSelectorStateService=o,this.assetsSelectorService=c,this.headerStore=l,this.queryParamsService=u,this.balanceLoadingStateService=p,this.tokensStoreService=m,this.tokensUpdaterService=g,this.searchQueryService=f,this.destroy$=y,this.tokensLoading$=this.tokensUpdaterService.tokensLoading$,this.listAnimationState$=this.tokensListService.listAnimationType$,this.customToken$=this.tokensListStoreService.customToken$,this.isMobile=this.headerStore.isMobile,this.isBalanceLoading$=this.tokensListStoreService.tokensToShow$.pipe((0,I.n)(()=>this.balanceLoadingStateService.isBalanceLoading$({assetType:this.assetsSelectorStateService.assetType,tokenFilter:this.assetsSelectorStateService.tokenFilter}))),this.tokensToShow$=this.tokensListStoreService.tokensToShow$,this.tokenFilter$=this.assetsSelectorStateService.tokenFilter$,this.useLargeIframe=this.queryParamsService.useLargeIframe,this.assetsSelectorStateService.tokenFilter$.pipe((0,B.F)(),(0,z.Q)(this.destroy$)).subscribe(()=>{this.searchQueryService.setSearchQuery(""),this.tokensStoreService.startBalanceCalculating("allChains"),this.tokensUpdaterService.triggerUpdateTokens()})}trackByFn(t,i){return`${i.blockchain}_${i.address}`}onTokenSelect(t){this.mobileNativeService.forceClose(),t.available&&this.assetsSelectorService.onAssetSelect(t)}selectTokenFilter(t){this.assetsSelectorStateService.setTokenFilter(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ni),e.rXU(vt),e.rXU(ii.c),e.rXU($e.V),e.rXU(we.Y),e.rXU(j.X),e.rXU(he.w),e.rXU(nl.P),e.rXU(J.p),e.rXU(Qt.F),e.rXU(Oe.W),e.rXU(G.ew,2))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-tokens-list"]],viewQuery:function(i,a){if(1&i&&e.GBs(Ze.d6,5),2&i){let o;e.mGM(o=e.lsd())&&(a.virtualScroll=o.first)}},features:[e.Jv_([G.ew])],decls:5,vars:8,consts:[[4,"ngLet"],["disabledTokenHint",""],["class","tokens-list__search-bar-container",4,"ngIf"],[3,"tokenFilter","onSelect",4,"ngIf"],[1,"tokens-container",3,"ngClass"],[3,"showLoader","overlay",4,"ngLet"],[1,"tokens-list__search-bar-container"],[3,"searchBarType"],[3,"tokenFilter","onSelect"],[3,"showLoader","overlay"],[4,"ngIf","ngIfElse"],["customTokenTmpl",""],["class","tokens-container__empty-list",4,"ngIf","ngIfElse"],["tokenList",""],[1,"tokens-container__empty-list"],[1,"tokens-list"],["tuiScrollable","","itemSize","50",1,"tokens-scrollbar","tui-zero-scrollbar",3,"ngClass"],["class","tokens-list__item","tuiHintAppearance","error","tuiHintDirection","bottom-right",3,"ngClass","tuiHint",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize","cdkVirtualForTrackBy"],["tuiHintAppearance","error","tuiHintDirection","bottom-right",1,"tokens-list__item",3,"ngClass","tuiHint"],[3,"token","showAll","balanceLoading","tokenFilter","assetType","selectToken"]],template:function(i,a){1&i&&(e.DNE(0,od,6,9,"ng-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.DNE(3,rd,3,3,"ng-template",null,1,e.C5r)),2&i&&e.Y8G("ngLet",e.l_i(5,sd,e.bMT(1,1,a.tokensToShow$),e.bMT(2,3,a.tokenFilter$)))},dependencies:[_.YU,_.bT,M.N,Ae.UB,Ae.d6,Ze.yg,Ze.E$,Ze.d6,h.XZ,h.ZF,h.JL,h.AZ,_t.jT,mt,li,El,pi,Gl,Xl,_.Jj,oe.D9],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}[_nghost-%COMP%]{width:100%}@media (max-width: 651px){[_nghost-%COMP%]     tui-scroll-controls .t-bar{right:-14px!important}}.tokens-container[_ngcontent-%COMP%]{position:relative;height:469px;padding:10px;background:var(--io-background);border-bottom-right-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}@media (max-width: 651px){.tokens-container[_ngcontent-%COMP%]{height:67vh;padding:var(--tui-padding-l);background:none;border-radius:0}.tokens-container__all-chains[_ngcontent-%COMP%]{height:60vh!important}}.tokens-container__all-chains[_ngcontent-%COMP%]{height:413px}.tokens-container__empty-list[_ngcontent-%COMP%]{position:relative;margin-top:20px}.tokens-container__empty-list_metis[_ngcontent-%COMP%]{margin:0 20px;font-size:16px}.tokens-container[_ngcontent-%COMP%]     .t-content{height:100%}@media (max-width: 599px){.tokens-container[_ngcontent-%COMP%]     .t-content{height:calc(100% - 10px)}}tui-loader[_ngcontent-%COMP%]{height:100%}.tokens-list[_ngcontent-%COMP%]{height:100%;padding-right:15px}@media (max-width: 651px){.tokens-list[_ngcontent-%COMP%]{padding:0}}.tokens-list__search-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2px}.tokens-list__search-bar-container[_ngcontent-%COMP%]   app-search-bar[_ngcontent-%COMP%]{flex:1}.tokens-list__search-bar-container[_ngcontent-%COMP%]     .tui-autofill{background-color:var(--io-background);border-radius:0;border-top-left-radius:var(--tui-radius-m)}.tokens-list__search-bar-container[_ngcontent-%COMP%]     button .t-wrapper{background-color:var(--io-background);border-radius:0;border-top-right-radius:var(--tui-radius-m)}.tokens-list__item[_ngcontent-%COMP%]{border-radius:var(--tui-radius-m);cursor:pointer}@media (max-width: 651px){.tokens-list__item[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--transparent-line)}}.tokens-list__item[_ngcontent-%COMP%]:hover{background-color:var(--transparent-line)}.tokens-list__item_disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.4}.tokens-list__item_disabled[_ngcontent-%COMP%]:hover{background-color:unset}.tokens-list__item_empty[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:18px}.tokens-list__item_empty[_ngcontent-%COMP%]:hover{background-color:unset}.tokens-scrollbar[_ngcontent-%COMP%]{height:100%;overflow-x:hidden!important}.tokens-scrollbar[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:column;gap:10px;width:100%}.vertical-frame-link[_ngcontent-%COMP%]{border:2px solid var(--primary-color)}.vertical-frame-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100%;height:100%;line-height:30px;text-align:center}.vertical-frame-link[_ngcontent-%COMP%]:hover{background-color:unset}.large-iframe-token-container[_ngcontent-%COMP%]{height:430px}@media (max-width: 651px){app-tokens-list-filters[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}}"],data:{animation:[tl]},changeDetection:0})}return n})();function ld(n,r){if(1&n&&(e.nrm(0,"img",2),e.nI1(1,"lowercase")),2&n){const t=e.XpG();e.Y8G("src","assets/images/icons/blockchain-filters/"+e.bMT(1,1,t.blockchainFilter)+".svg",e.B4B)}}const dd=function(n){return{"filter-list-element__clicked-element":n}};let pd=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-filter-list-element"]],inputs:{blockchainFilter:"blockchainFilter",isSelected:"isSelected"},decls:3,vars:5,consts:[["tuiButton","","type","button","appearance","secondary","size","m",1,"filter-list-element",3,"ngClass"],["class","filter-list-element__icon",3,"src",4,"ngIf"],[1,"filter-list-element__icon",3,"src"]],template:function(i,a){1&i&&(e.j41(0,"button",0),e.EFF(1),e.DNE(2,ld,2,3,"img",1),e.k0s()),2&i&&(e.Y8G("ngClass",e.eq3(3,dd,a.isSelected)),e.R7$(1),e.SpI(" ",a.blockchainFilter," "),e.R7$(1),e.Y8G("ngIf","All"!==a.blockchainFilter))},dependencies:[_.YU,_.bT,re.SM,_.GH],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.filter-list-element[_ngcontent-%COMP%]     .t-wrapper{width:90px;padding:0!important;background:var(--tui-base-01)}.filter-list-element[_ngcontent-%COMP%]     .t-content{gap:8px;font-size:12px}.filter-list-element__icon[_ngcontent-%COMP%]{filter:invert(0);transition:filter var(--tui-duration, .3s) ease-in-out}.filter-list-element__clicked-element[_ngcontent-%COMP%]     .t-wrapper{color:#000;background:var(--tui-primary)}.filter-list-element__clicked-element[_ngcontent-%COMP%]     .t-wrapper:hover{background-color:var(--tui-primary)}.filter-list-element__clicked-element[_ngcontent-%COMP%]   .filter-list-element__icon[_ngcontent-%COMP%]{filter:invert(1)}"],changeDetection:0})}return n})();function ud(n,r){if(1&n){const t=e.RV6();e.j41(0,"app-filter-list-element",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.onSelectFilter(a))}),e.k0s()}if(2&n){const t=r.ngLet,i=e.XpG(2).$implicit;e.Y8G("blockchainFilter",i)("isSelected",t===i)}}function _d(n,r){if(1&n&&(e.qex(0),e.DNE(1,ud,1,2,"app-filter-list-element",3),e.nI1(2,"async"),e.bVm()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngLet",e.bMT(2,1,t.currentFilter$))}}function md(n,r){if(1&n&&(e.qex(0),e.DNE(1,_d,3,3,"ng-container",2),e.bVm()),2&n){const t=r.$implicit,i=e.XpG();e.R7$(1),e.Y8G("ngIf",!i.isMobile||i.isMobile&&"All"!==t)}}let hd=(()=>{class n{constructor(t,i){this.filterQueryService=t,this.headerStore=i,this.BLOCKCHAIN_FILTERS=gt.C,this.currentFilter$=this.filterQueryService.filterQuery$,this.isMobile=this.headerStore.isMobile}onSelectFilter(t){this.filterQueryService.filterQuery=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ht.s),e.rXU(j.X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-blockchains-filter-list"]],decls:2,vars:1,consts:[[1,"blockchains-filter-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"blockchainFilter","isSelected","click",4,"ngLet"],[3,"blockchainFilter","isSelected","click"]],template:function(i,a){1&i&&(e.j41(0,"div",0),e.DNE(1,md,2,1,"ng-container",1),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngForOf",a.BLOCKCHAIN_FILTERS))},dependencies:[_.Sq,_.bT,M.N,pd,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.blockchains-filter-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:12px}@media (max-width: 500px){.blockchains-filter-list[_ngcontent-%COMP%]{gap:12px;align-items:unset;margin-top:0;overflow-x:auto}.blockchains-filter-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}}"],changeDetection:0})}return n})();function gd(n,r){if(1&n){const t=e.RV6();e.qex(0,3),e.j41(1,"div",4)(2,"app-back-button",5),e.bIt("onClick",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.backToForm())}),e.k0s(),e.j41(3,"span",6),e.EFF(4),e.nI1(5,"async"),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("isMobile",!1),e.R7$(2),e.JRh(e.bMT(5,2,t.headerText$))}}function fd(n,r){1&n&&e.nrm(0,"app-blockchains-filter-list")}function vd(n,r){1&n&&e.eu8(0)}function bd(n,r){1&n&&(e.qex(0),e.nrm(1,"app-search-bar",12),e.bVm()),2&n&&(e.R7$(1),e.Y8G("searchBarType","tokens"))}function Cd(n,r){1&n&&e.eu8(0)}function kd(n,r){1&n&&(e.j41(0,"div",13)(1,"div",14),e.nrm(2,"app-tokens-list"),e.k0s()())}function Sd(n,r){if(1&n&&(e.qex(0),e.nrm(1,"app-asset-types-aside"),e.DNE(2,bd,2,1,"ng-container",7),e.DNE(3,Cd,1,0,"ng-container",8),e.DNE(4,kd,3,0,"div",11),e.bVm()),2&n){const t=e.XpG().ngLet,i=e.sdS(6),a=e.XpG();e.R7$(2),e.Y8G("ngIf","fiats"===t),e.R7$(1),e.Y8G("ngIf",a.isMobile)("ngIfThen",i),e.R7$(1),e.Y8G("ngIf","tokens"===t)}}function yd(n,r){1&n&&e.nrm(0,"app-switch-list-type-button")}function wd(n,r){if(1&n&&(e.j41(0,"div",9),e.nrm(1,"app-search-bar",15),e.DNE(2,yd,1,0,"app-switch-list-type-button",7),e.k0s()),2&n){const t=e.XpG().ngLet;e.R7$(1),e.Y8G("searchBarType","tokens"),e.R7$(1),e.Y8G("ngIf","tokens"===t)}}function Td(n,r){if(1&n&&(e.qex(0),e.DNE(1,fd,1,0,"app-blockchains-filter-list",7),e.DNE(2,vd,1,0,"ng-container",8),e.j41(3,"div",9),e.DNE(4,Sd,5,4,"ng-container",7),e.k0s(),e.DNE(5,wd,3,2,"ng-template",null,10,e.C5r),e.bVm()),2&n){const t=r.ngLet,i=e.sdS(6),a=e.XpG();e.R7$(1),e.Y8G("ngIf",!a.isMobile&&"blockchains"!==t),e.R7$(1),e.Y8G("ngIf",!a.isMobile&&"blockchains"===t)("ngIfThen",i),e.R7$(2),e.Y8G("ngIf","blockchains"!==t)}}let xd=(()=>{class n{set type(t){this.assetsSelectorService.initParameters({formType:t})}constructor(t,i,a,o,c,l,u,p,m){this.tokensService=t,this.tokensStoreService=i,this.assetsSelectorService=a,this.assetsSelectorStateService=o,this.tokensListTypeService=c,this.headerStore=l,this.document=u,this.destroy$=p,this.tradePageService=m,this.tokenSelect=new e.bkB,this.selectorListType$=this.assetsSelectorStateService.selectorListType$,this.headerText$=this.selectorListType$.pipe((0,C.T)(g=>"blockchains"===g?"Blockchains List":"Select Chain and Token")),this.isMobile=this.headerStore.isMobile,this.subscribeOnAssetsSelect()}ngOnInit(){this.setWindowHeight()}ngOnDestroy(){this.resetWindowHeight()}backToForm(){this.tradePageService.setState("form")}setWindowHeight(){this.isMobile&&(this.document.documentElement.style.setProperty("--window-inner-height",`${window.innerHeight}px`),this.document.documentElement.classList.add("is-locked"),this.document.documentElement.classList.add("scroll-y"))}resetWindowHeight(){this.document.documentElement.classList.remove("is-locked")}subscribeOnAssetsSelect(){this.assetsSelectorStateService.assetSelected$.pipe((0,z.Q)(this.destroy$)).subscribe(t=>{(0,ke.Tl)(t)&&this.tokensStoreService.addToken(t),this.tokenSelect.emit(t)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ge.m),e.rXU(J.p),e.rXU(we.Y),e.rXU($e.V),e.rXU(Ie),e.rXU(j.X),e.rXU(_.qQ),e.rXU(G.ew,2),e.rXU(be.p))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-assets-selector-page"]],inputs:{type:"type"},outputs:{tokenSelect:"tokenSelect"},features:[e.Jv_([Dc,G.ew])],decls:4,vars:4,consts:[[1,"assets-selector"],["header","",4,"ngIf"],[4,"ngLet"],["header",""],[1,"assets-selector__header"],[3,"isMobile","onClick"],[1,"back-button__text"],[4,"ngIf"],[4,"ngIf","ngIfThen"],[1,"assets-selector__row"],["searchBar",""],["class","token-list-container",4,"ngIf"],[1,"vertical-iframe-token-search",3,"searchBarType"],[1,"token-list-container"],[1,"token-list-container__list"],[3,"searchBarType"]],template:function(i,a){1&i&&(e.j41(0,"section",0),e.DNE(1,gd,6,4,"ng-container",1),e.DNE(2,Td,7,4,"ng-container",2),e.nI1(3,"async"),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngIf",!a.isMobile),e.R7$(1),e.Y8G("ngLet",e.bMT(3,2,a.selectorListType$)))},dependencies:[_.bT,M.N,Ht,el,mt,cd,pi,hd,_.Jj],styles:["[_ngcontent-%COMP%]:root{--app-background: #282935;--primary-background: var(--tui-base-01);--secondary-background: var(--tui-secondary);--dropdpwn-background: rgba(60, 61, 68, .85);--io-background: #222331;--tui-primary: #d1384d;--tui-primary-hover: #e42f47;--tui-primary-active: #e42f47;--tui-primary-text: #ffffff;--tui-secondary: #3b3d4f;--tui-secondary-hover: #4c4e67;--tui-secondary-active: #4c4e67;--tui-elevation-01: var(--tui-secondary);--tui-elevation-02: var(--tui-secondary);--tui-clear: var(--primary-background);--tui-link: white;--tui-link-hover: white;--tui-warn: #cfa200;--tui-base-01: #2c2d3e;--tui-base-02: #2c2d3e;--tui-base-03: #2c2d3e;--tui-base-04: #4d4d59;--tui-text-01: white;--tui-text-02: #9a9ab0;--tui-text-03: #9a9ab0;--tui-padding-xs: .25rem;--tui-padding-s: .5rem;--tui-padding-xl: 1.25rem;--tui-padding-4xl: 2rem;--tui-disabled-opacity: .5;--tui-radius-l: 17px;--tui-radius-m: 17px;--tui-radius-s: 12px}.assets-selector__row[_ngcontent-%COMP%]{display:flex;gap:10px}.assets-selector__row[_ngcontent-%COMP%]:not(:first-child){margin-top:10px}.assets-selector__header[_ngcontent-%COMP%]{display:flex;font-weight:700;font-size:15px}app-search-bar[_ngcontent-%COMP%]{width:100%}.token-list__header[_ngcontent-%COMP%]{display:none}.token-list-container[_ngcontent-%COMP%]{width:100%;min-height:410px;max-height:410px}.token-list-container__list[_ngcontent-%COMP%]{height:100%}.blockchains-list-container[_ngcontent-%COMP%]{width:100%}@media (max-width: 651px){.assets-selector[_ngcontent-%COMP%]{padding-top:var(--tui-padding-l)}.assets-selector__row[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]{gap:12px;margin:var(--tui-padding-l) 0;margin-bottom:0;padding:0 var(--tui-padding-l)}.assets-selector__row[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]     app-search-bar .tui-autofill{height:51px}.assets-selector__row[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]     app-switch-list-type-button{height:51px}.assets-selector__row[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]     app-switch-list-type-button .t-wrapper{width:51px;height:51px}.assets-selector__row[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]     app-switch-list-type-button button{width:auto}.assets-selector[_ngcontent-%COMP%] > .assets-selector__row[_ngcontent-%COMP%]{flex-direction:column;gap:0;margin-top:0}.token-list__header[_ngcontent-%COMP%]{display:block;padding:0 1rem}.token-list__header-label[_ngcontent-%COMP%]{color:var(--tui-text-01);font-weight:400;font-size:18px;line-height:18px;letter-spacing:.54px}}"],changeDetection:0})}return n})(),Ad=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[Ce,N.K,Sn,rn,gn,Cn,at,_e.h,le.P,Bt,xe,Et,cn,Kt,kt,Ye.D,Vt,Je.h,Ye.D,et,Ne],imports:[Zs,_.MD,Zn.G,Xt.N,Ae.FC,pt.Nd,K.e1,re.Pv,jt.FQ,F.X1,h.Q3,F.YN,Q.CN,hc.O9,$n.jB,ut.NT,ye.zi,_t.Yc,Ac,lt.O,mc.Q,Be.x3]})}return n})();e.wjB(Fn.R,[Le.r,xd],[]),e.wjB(In.S,[_.YU,_.Sq,_c],[])}}]);