"use strict";(self.webpackChunkrubic=self.webpackChunkrubic||[]).push([[698],{90698:(F,y,t)=>{t.r(y),t.d(y,{ccipFetch:()=>x,offchainLookup:()=>j,offchainLookupAbiItem:()=>w,offchainLookupSignature:()=>T});var m=t(74523),k=t(53460),g=t(82666),f=t(76840),L=t(10922);class M extends f.C{constructor({callbackSelector:e,cause:r,data:c,extraData:i,sender:u,urls:n}){super(r.shortMessage||"An error occurred while fetching for an offchain result.",{cause:r,metaMessages:[...r.metaMessages||[],r.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map(d=>`    ${(0,L.ID)(d)}`)],`  Sender: ${u}`,`  Data: ${c}`,`  Callback selector: ${e}`,`  Extra data: ${i}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class A extends f.C{constructor({result:e,url:r}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,L.ID)(r)}`,`Response: ${(0,g.A)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class E extends f.C{constructor({sender:e,to:r}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${r}`,`OffchainLookup sender address: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}var b=t(7256),S=t(48735),$=t(71434),v=t(33529),O=t(60056),R=t(70030),D=t(7877);const T="0x556f1830",w={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};function j(a,e){return l.apply(this,arguments)}function l(){return(l=(0,m.A)(function*(a,{blockNumber:e,blockTag:r,data:c,to:i}){const{args:u}=(0,S.W)({data:c,abi:[w]}),[n,d,s,o,C]=u;try{if(!function P(a,e){if(!(0,O.P)(a))throw new v.M({address:a});if(!(0,O.P)(e))throw new v.M({address:e});return a.toLowerCase()===e.toLowerCase()}(i,n))throw new E({sender:n,to:i});const p=yield x({data:s,sender:n,urls:d}),{data:G}=yield(0,k.T)(a,{blockNumber:e,blockTag:r,data:(0,R.xW)([o,(0,$.h)([{type:"bytes"},{type:"bytes"}],[p,C])]),to:i});return G}catch(p){throw new M({callbackSelector:o,cause:p,data:c,extraData:C,sender:n,urls:d})}})).apply(this,arguments)}function x(a){return h.apply(this,arguments)}function h(){return(h=(0,m.A)(function*({data:a,sender:e,urls:r}){let c=new Error("An unknown error occurred.");for(let i=0;i<r.length;i++){const u=r[i],n=u.includes("{data}")?"GET":"POST",d="POST"===n?{data:a,sender:e}:void 0;try{const s=yield fetch(u.replace("{sender}",e).replace("{data}",a),{body:JSON.stringify(d),method:n});let o;if(o=s.headers.get("Content-Type")?.startsWith("application/json")?(yield s.json()).data:yield s.text(),!s.ok){c=new b.Ci({body:d,details:o?.error?(0,g.A)(o.error):s.statusText,headers:s.headers,status:s.status,url:u});continue}if(!(0,D.q)(o)){c=new A({result:o,url:u});continue}return o}catch(s){c=new b.Ci({body:d,details:s.message,url:u})}}throw c})).apply(this,arguments)}}}]);